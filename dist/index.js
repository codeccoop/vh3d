/*! For license information please see index.js.LICENSE.txt */
!function(){var e={6445:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},8456:function(e,t,n){e.exports=n(7450)},3121:function(e,t,n){"use strict";var r=n(7887);function i(e){var t=[1/0,1/0,-1/0,-1/0];return r.coordEach(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}i.default=i,t.Z=i},6941:function(e,t,n){"use strict";var r=n(6445);function i(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function a(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!v(e[0])||!v(e[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:e},t,n)}function o(e,t,n){void 0===n&&(n={});for(var r=0,a=e;r<a.length;r++){var o=a[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:e},t,n)}function s(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:e},t,n)}function u(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function c(e,t,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:e},t,n)}function l(e,t,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:e},t,n)}function h(e,t,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:e},t,n)}function f(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function d(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function p(e){return e%(2*Math.PI)*180/Math.PI}function v(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=i,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return a(t).geometry;case"LineString":return s(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return h(t).geometry;default:throw new Error(e+" is invalid")}},t.point=a,t.points=function(e,t,n){return void 0===n&&(n={}),u(e.map((function(e){return a(e,t)})),n)},t.polygon=o,t.polygons=function(e,t,n){return void 0===n&&(n={}),u(e.map((function(e){return o(e,t)})),n)},t.lineString=s,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),u(e.map((function(e){return s(e,t)})),n)},t.featureCollection=u,t.multiLineString=c,t.multiPoint=l,t.multiPolygon=h,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=f,t.lengthToRadians=d,t.lengthToDegrees=function(e,t){return p(d(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=p,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return f(d(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var a=t.areaFactors[r];if(!a)throw new Error("invalid final units");return e/i*a},t.isNumber=v,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!v(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(r(e)))throw new Error("id must be a number or a string")}},7887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6941);function i(e,t,n){if(null!==e)for(var r,a,o,s,u,c,l,h,f=0,d=0,p=e.type,v="FeatureCollection"===p,m="Feature"===p,g=v?e.features.length:1,y=0;y<g;y++){u=(h=!!(l=v?e.features[y].geometry:m?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var x=0;x<u;x++){var b=0,_=0;if(null!==(s=h?l.geometries[x]:l)){c=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===t(c[r],d,y,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(a=0;a<c[r].length-f;a++){if(!1===t(c[r][a],d,y,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,a=0;a<c[r].length;a++){for(o=0;o<c[r][a].length-f;o++){if(!1===t(c[r][a][o],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function o(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function s(e,t){var n,r,i,a,o,s,u,c,l,h,f=0,d="FeatureCollection"===e.type,p="Feature"===e.type,v=d?e.features.length:1;for(n=0;n<v;n++){for(s=d?e.features[n].geometry:p?e.geometry:e,c=d?e.features[n].properties:p?e.properties:{},l=d?e.features[n].bbox:p?e.bbox:void 0,h=d?e.features[n].id:p?e.id:void 0,o=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<o;i++)if(null!==(a=u?s.geometries[i]:s))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,c,l,h))return!1;f++}}function u(e,t){s(e,(function(e,n,i,a,o){var s,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(r.feature(e,i,{bbox:a,id:o}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<e.coordinates.length;c++){var l={type:s,coordinates:e.coordinates[c]};if(!1===t(r.feature(l,i),n,c))return!1}}))}function c(e,t){u(e,(function(e,n,a){var o=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,h=0;return!1!==i(e,(function(i,s,f,d,p){if(void 0===u||n>c||d>l||p>h)return u=i,c=n,l=d,h=p,void(o=0);var v=r.lineString([u,i],e.properties);if(!1===t(v,n,a,p,o))return!1;o++,u=i}))&&void 0}}}))}function l(e,t){if(!e)throw new Error("geojson is required");u(e,(function(e,n,i){if(null!==e.geometry){var a=e.geometry.type,o=e.geometry.coordinates;switch(a){case"LineString":if(!1===t(e,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===t(r.lineString(o[s],e.properties),n,i,s))return!1}}}))}t.coordAll=function(e){var t=[];return i(e,(function(e){t.push(e)})),t},t.coordEach=i,t.coordReduce=function(e,t,n,r){var a=n;return i(e,(function(e,r,i,o,s){a=0===r&&void 0===n?e:t(a,e,r,i,o,s)}),r),a},t.featureEach=o,t.featureReduce=function(e,t,n){var r=n;return o(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r},t.findPoint=function(e,t){if(t=t||{},!r.isObject(t))throw new Error("options is invalid");var n,i=t.featureIndex||0,a=t.multiFeatureIndex||0,o=t.geometryIndex||0,s=t.coordIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),u=u||e.features[i].properties,n=e.features[i].geometry;break;case"Feature":u=u||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,t);case"MultiPoint":return a<0&&(a=c.length+a),r.point(c[a],u,t);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],u,t);case"Polygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],u,t);case"MultiLineString":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],u,t);case"MultiPolygon":return a<0&&(a=c.length+a),o<0&&(o=c[a].length+o),s<0&&(s=c[a][o].length-s),r.point(c[a][o][s],u,t)}throw new Error("geojson is invalid")},t.findSegment=function(e,t){if(t=t||{},!r.isObject(t))throw new Error("options is invalid");var n,i=t.featureIndex||0,a=t.multiFeatureIndex||0,o=t.geometryIndex||0,s=t.segmentIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),u=u||e.features[i].properties,n=e.features[i].geometry;break;case"Feature":u=u||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],u,t);case"Polygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],u,t);case"MultiLineString":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],u,t);case"MultiPolygon":return a<0&&(a=c.length+a),o<0&&(o=c[a].length+o),s<0&&(s=c[a][o].length-s-1),r.lineString([c[a][o][s],c[a][o][s+1]],u,t)}throw new Error("geojson is invalid")},t.flattenEach=u,t.flattenReduce=function(e,t,n){var r=n;return u(e,(function(e,i,a){r=0===i&&0===a&&void 0===n?e:t(r,e,i,a)})),r},t.geomEach=s,t.geomReduce=function(e,t,n){var r=n;return s(e,(function(e,i,a,o,s){r=0===i&&void 0===n?e:t(r,e,i,a,o,s)})),r},t.lineEach=l,t.lineReduce=function(e,t,n){var r=n;return l(e,(function(e,i,a,o){r=0===i&&void 0===n?e:t(r,e,i,a,o)})),r},t.propEach=a,t.propReduce=function(e,t,n){var r=n;return a(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r},t.segmentEach=c,t.segmentReduce=function(e,t,n){var r=n,i=!1;return c(e,(function(e,a,o,s,u){r=!1===i&&void 0===n?e:t(r,e,a,o,s,u),i=!0})),r}},2844:function(e,t,n){var r=n(4390),i=n(3239);e.exports=function(e){if(r(e))return e;throw TypeError(i(e)+" is not a function")}},4950:function(e,t,n){var r=n(4175),i=n(3239);e.exports=function(e){if(r(e))return e;throw TypeError(i(e)+" is not a constructor")}},3631:function(e,t,n){var r=n(6445),i=n(4390);e.exports=function(e){if("object"===r(e)||i(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},5333:function(e,t,n){var r=n(3277),i=n(770),a=n(1662),o=r("unscopables"),s=Array.prototype;null==s[o]&&a.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},1311:function(e,t,n){"use strict";var r=n(4365).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},59:function(e){e.exports=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},8:function(e,t,n){var r=n(7575);e.exports=function(e){if(r(e))return e;throw TypeError(String(e)+" is not an object")}},2687:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},1610:function(e,t,n){"use strict";var r,i,a,o=n(2687),s=n(2179),u=n(8043),c=n(4390),l=n(7575),h=n(9145),f=n(6217),d=n(3239),p=n(1697),v=n(1609),m=n(1662).f,g=n(6020),y=n(7627),x=n(3277),b=n(7152),_=u.Int8Array,w=_&&_.prototype,M=u.Uint8ClampedArray,S=M&&M.prototype,E=_&&g(_),T=w&&g(w),A=Object.prototype,k=A.isPrototypeOf,L=x("toStringTag"),R=b("TYPED_ARRAY_TAG"),C=b("TYPED_ARRAY_CONSTRUCTOR"),P=o&&!!y&&"Opera"!==f(u.opera),O=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},D=function(e){if(!l(e))return!1;var t=f(e);return h(I,t)||h(N,t)};for(r in I)(a=(i=u[r])&&i.prototype)?p(a,C,i):P=!1;for(r in N)(a=(i=u[r])&&i.prototype)&&p(a,C,i);if((!P||!c(E)||E===Function.prototype)&&(E=function(){throw TypeError("Incorrect invocation")},P))for(r in I)u[r]&&y(u[r],E);if((!P||!T||T===A)&&(T=E.prototype,P))for(r in I)u[r]&&y(u[r].prototype,T);if(P&&g(S)!==T&&y(S,T),s&&!h(T,L))for(r in O=!0,m(T,L,{get:function(){return l(this)?this[R]:void 0}}),I)u[r]&&p(u[r],R,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_CONSTRUCTOR:C,TYPED_ARRAY_TAG:O&&R,aTypedArray:function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!y||k.call(E,e)))return e;throw TypeError(d(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(s){if(n)for(var r in I){var i=u[r];if(i&&h(i.prototype,e))try{delete i.prototype[e]}catch(e){}}T[e]&&!n||v(T,e,n?t:P&&w[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(s){if(y){if(n)for(r in I)if((i=u[r])&&h(i,e))try{delete i[e]}catch(e){}if(E[e]&&!n)return;try{return v(E,e,n?t:P&&E[e]||t)}catch(e){}}for(r in I)!(i=u[r])||i[e]&&!n||v(i,e,t)}},isView:function(e){if(!l(e))return!1;var t=f(e);return"DataView"===t||h(I,t)||h(N,t)},isTypedArray:D,TypedArray:E,TypedArrayPrototype:T}},6251:function(e,t,n){"use strict";var r=n(8043),i=n(2179),a=n(2687),o=n(360),s=n(1697),u=n(318),c=n(2513),l=n(59),h=n(8889),f=n(4384),d=n(3593),p=n(273),v=n(6020),m=n(7627),g=n(7516).f,y=n(1662).f,x=n(3241),b=n(1104),_=n(715),w=o.PROPER,M=o.CONFIGURABLE,S=_.get,E=_.set,T="ArrayBuffer",A="DataView",k="Wrong index",L=r.ArrayBuffer,R=L,C=r.DataView,P=C&&C.prototype,O=Object.prototype,I=r.RangeError,N=p.pack,D=p.unpack,F=function(e){return[255&e]},z=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},H=function(e){return N(e,23,4)},j=function(e){return N(e,52,8)},G=function(e,t){y(e.prototype,t,{get:function(){return S(this)[t]}})},V=function(e,t,n,r){var i=d(n),a=S(e);if(i+t>a.byteLength)throw I(k);var o=S(a.buffer).bytes,s=i+a.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()},W=function(e,t,n,r,i,a){var o=d(n),s=S(e);if(o+t>s.byteLength)throw I(k);for(var u=S(s.buffer).bytes,c=o+s.byteOffset,l=r(+i),h=0;h<t;h++)u[c+h]=l[a?h:t-h-1]};if(a){var q=w&&L.name!==T;if(c((function(){L(1)}))&&c((function(){new L(-1)}))&&!c((function(){return new L,new L(1.5),new L(NaN),q&&!M})))q&&M&&s(L,"name",T);else{for(var $,X=(R=function(e){return l(this,R),new L(d(e))}).prototype=L.prototype,Y=g(L),Z=0;Y.length>Z;)($=Y[Z++])in R||s(R,$,L[$]);X.constructor=R}m&&v(P)!==O&&m(P,O);var J=new C(new R(2)),K=P.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||u(P,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else R=function(e){l(this,R,T);var t=d(e);E(this,{bytes:x.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},C=function(e,t,n){l(this,C,A),l(e,R,A);var r=S(e).byteLength,a=h(t);if(a<0||a>r)throw I("Wrong offset");if(a+(n=void 0===n?r-a:f(n))>r)throw I("Wrong length");E(this,{buffer:e,byteLength:n,byteOffset:a}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},i&&(G(R,"byteLength"),G(C,"buffer"),G(C,"byteLength"),G(C,"byteOffset")),u(C.prototype,{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(V(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(V(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(V(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(V(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){W(this,1,e,F,t)},setUint8:function(e,t){W(this,1,e,F,t)},setInt16:function(e,t){W(this,2,e,z,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){W(this,2,e,z,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){W(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){W(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){W(this,4,e,H,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){W(this,8,e,j,t,arguments.length>2?arguments[2]:void 0)}});b(R,T),b(C,A),e.exports={ArrayBuffer:R,DataView:C}},304:function(e,t,n){"use strict";var r=n(9900),i=n(7842),a=n(3865),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=a(n),u=i(e,s),c=i(t,s),l=arguments.length>2?arguments[2]:void 0,h=o((void 0===l?s:i(l,s))-c,s-u),f=1;for(c<u&&u<c+h&&(f=-1,c+=h-1,u+=h-1);h-- >0;)c in n?n[u]=n[c]:delete n[u],u+=f,c+=f;return n}},3241:function(e,t,n){"use strict";var r=n(9900),i=n(7842),a=n(3865);e.exports=function(e){for(var t=r(this),n=a(t),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},4113:function(e,t,n){"use strict";var r=n(2218).forEach,i=n(7800)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},1521:function(e){e.exports=function(e,t){for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i}},1499:function(e,t,n){"use strict";var r=n(8882),i=n(9900),a=n(3113),o=n(6995),s=n(4175),u=n(3865),c=n(9576),l=n(7055),h=n(4560);e.exports=function(e){var t=i(e),n=s(this),f=arguments.length,d=f>1?arguments[1]:void 0,p=void 0!==d;p&&(d=r(d,f>2?arguments[2]:void 0,2));var v,m,g,y,x,b,_=h(t),w=0;if(!_||this==Array&&o(_))for(v=u(t),m=n?new this(v):Array(v);v>w;w++)b=p?d(t[w],w):t[w],c(m,w,b);else for(x=(y=l(t,_)).next,m=n?new this:[];!(g=x.call(y)).done;w++)b=p?a(y,d,[g.value,w],!0):g.value,c(m,w,b);return m.length=w,m}},5500:function(e,t,n){var r=n(7723),i=n(7842),a=n(3865),o=function(e){return function(t,n,o){var s,u=r(t),c=a(u),l=i(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2218:function(e,t,n){var r=n(8882),i=n(8064),a=n(9900),o=n(3865),s=n(201),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,h=6==e,f=7==e,d=5==e||h;return function(p,v,m,g){for(var y,x,b=a(p),_=i(b),w=r(v,m,3),M=o(_),S=0,E=g||s,T=t?E(p,M):n||f?E(p,0):void 0;M>S;S++)if((d||S in _)&&(x=w(y=_[S],S,b),e))if(t)T[S]=x;else if(x)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:u.call(T,y)}else switch(e){case 4:return!1;case 7:u.call(T,y)}return h?-1:c||l?l:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},2226:function(e,t,n){"use strict";var r=n(7723),i=n(8889),a=n(3865),o=n(7800),s=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf"),h=c||!l;e.exports=h?function(e){if(c)return u.apply(this,arguments)||0;var t=r(this),n=a(t),o=n-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},7580:function(e,t,n){var r=n(2513),i=n(3277),a=n(5009),o=i("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},7800:function(e,t,n){"use strict";var r=n(2513);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},4533:function(e,t,n){var r=n(2844),i=n(9900),a=n(8064),o=n(3865),s=function(e){return function(t,n,s,u){r(n);var c=i(t),l=a(c),h=o(c),f=e?h-1:0,d=e?-1:1;if(s<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,e?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=d)f in l&&(u=n(u,l[f],f,c));return u}};e.exports={left:s(!1),right:s(!0)}},7802:function(e){var t=Math.floor;e.exports=function e(n,r){var i=n.length,a=t(i/2);return i<8?function(e,t){for(var n,r,i=e.length,a=1;a<i;){for(r=a,n=e[a];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==a++&&(e[r]=n)}return e}(n,r):function(e,t,n){for(var r=e.length,i=t.length,a=0,o=0,s=[];a<r||o<i;)a<r&&o<i?s.push(n(e[a],t[o])<=0?e[a++]:t[o++]):s.push(a<r?e[a++]:t[o++]);return s}(e(n.slice(0,a),r),e(n.slice(a),r),r)}},3934:function(e,t,n){var r=n(8586),i=n(4175),a=n(7575),o=n(3277)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===Array||r(t.prototype))||a(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?Array:t}},201:function(e,t,n){var r=n(3934);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3113:function(e,t,n){var r=n(8),i=n(5627);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},7167:function(e,t,n){var r=n(3277)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},8369:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},6217:function(e,t,n){var r=n(9383),i=n(4390),a=n(8369),o=n(3277)("toStringTag"),s="Arguments"==a(function(){return arguments}());e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?a(t):"Object"==(r=a(t))&&i(t.callee)?"Arguments":r}},1359:function(e,t,n){"use strict";var r=n(1662).f,i=n(770),a=n(318),o=n(8882),s=n(59),u=n(3601),c=n(6305),l=n(3462),h=n(2179),f=n(5459).fastKey,d=n(715),p=d.set,v=d.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=r&&u(r,e[c],{that:e,AS_ENTRIES:n})})),d=v(t),m=function(e,t,n){var r,i,a=d(e),o=g(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),h?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},g=function(e,t){var n,r=d(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(l.prototype,{clear:function(){for(var e=d(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=this,n=d(t),r=g(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),h?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=d(this),r=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),a(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),h&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),a=v(r);c(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},2244:function(e,t,n){"use strict";var r=n(318),i=n(5459).getWeakData,a=n(8),o=n(7575),s=n(59),u=n(3601),c=n(2218),l=n(9145),h=n(715),f=h.set,d=h.getterFor,p=c.find,v=c.findIndex,m=0,g=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},x=function(e,t){return p(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=x(this,e);if(t)return t[1]},has:function(e){return!!x(this,e)},set:function(e,t){var n=x(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,c){var h=e((function(e,r){s(e,h,t),f(e,{type:t,id:m++,frozen:void 0}),null!=r&&u(r,e[c],{that:e,AS_ENTRIES:n})})),p=d(t),v=function(e,t,n){var r=p(e),o=i(a(t),!0);return!0===o?g(r).set(t,n):o[r.id]=n,e};return r(h.prototype,{delete:function(e){var t=p(this);if(!o(e))return!1;var n=i(e);return!0===n?g(t).delete(e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=p(this);if(!o(e))return!1;var n=i(e);return!0===n?g(t).has(e):n&&l(n,t.id)}}),r(h.prototype,n?{get:function(e){var t=p(this);if(o(e)){var n=i(e);return!0===n?g(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),h}}},6021:function(e,t,n){"use strict";var r=n(5743),i=n(8043),a=n(919),o=n(1609),s=n(5459),u=n(3601),c=n(59),l=n(4390),h=n(7575),f=n(2513),d=n(7167),p=n(1104),v=n(8154);e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),y=m?"set":"add",x=i[e],b=x&&x.prototype,_=x,w={},M=function(e){var t=b[e];o(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!h(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!h(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!h(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,!l(x)||!(g||b.forEach&&!f((function(){(new x).entries().next()})))))_=n.getConstructor(t,e,m,y),s.enable();else if(a(e,!0)){var S=new _,E=S[y](g?{}:-0,1)!=S,T=f((function(){S.has(1)})),A=d((function(e){new x(e)})),k=!g&&f((function(){for(var e=new x,t=5;t--;)e[y](t,t);return!e.has(-0)}));A||((_=t((function(t,n){c(t,_,e);var r=v(new x,t,_);return null!=n&&u(n,r[y],{that:r,AS_ENTRIES:m}),r}))).prototype=b,b.constructor=_),(T||k)&&(M("delete"),M("has"),m&&M("get")),(k||E)&&M(y),g&&b.clear&&delete b.clear}return w[e]=_,r({global:!0,forced:_!=x},w),p(_,e),g||n.setStrong(_,e,m),_}},6057:function(e,t,n){var r=n(9145),i=n(6891),a=n(9525),o=n(1662);e.exports=function(e,t){for(var n=i(t),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},3497:function(e,t,n){var r=n(3277)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},9654:function(e,t,n){var r=n(2513);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4697:function(e,t,n){var r=n(1181),i=n(8045),a=/"/g;e.exports=function(e,t,n,o){var s=i(r(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+i(o).replace(a,"&quot;")+'"'),u+">"+s+"</"+t+">"}},7776:function(e,t,n){"use strict";var r=n(5360).IteratorPrototype,i=n(770),a=n(3795),o=n(1104),s=n(6309),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,c,!1,!0),s[c]=u,e}},1697:function(e,t,n){var r=n(2179),i=n(1662),a=n(3795);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},3795:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9576:function(e,t,n){"use strict";var r=n(2413),i=n(1662),a=n(3795);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},8598:function(e,t,n){"use strict";var r=n(2513),i=n(5720).start,a=Math.abs,o=Date.prototype,s=o.getTime,u=o.toISOString;e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+i(a(t),r?6:4,0)+"-"+i(e.getUTCMonth()+1,2,0)+"-"+i(e.getUTCDate(),2,0)+"T"+i(e.getUTCHours(),2,0)+":"+i(e.getUTCMinutes(),2,0)+":"+i(e.getUTCSeconds(),2,0)+"."+i(n,3,0)+"Z"}:u},5740:function(e,t,n){"use strict";var r=n(8),i=n(4109);e.exports=function(e){if(r(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw TypeError("Incorrect hint");return i(this,e)}},6305:function(e,t,n){"use strict";var r=n(5743),i=n(5386),a=n(360),o=n(4390),s=n(7776),u=n(6020),c=n(7627),l=n(1104),h=n(1697),f=n(1609),d=n(3277),p=n(6309),v=n(5360),m=a.PROPER,g=a.CONFIGURABLE,y=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,b=d("iterator"),_="keys",w="values",M="entries",S=function(){return this};e.exports=function(e,t,n,a,d,v,E){s(n,t,a);var T,A,k,L=function(e){if(e===d&&I)return I;if(!x&&e in P)return P[e];switch(e){case _:case w:case M:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",C=!1,P=e.prototype,O=P[b]||P["@@iterator"]||d&&P[d],I=!x&&O||L(d),N="Array"==t&&P.entries||O;if(N&&(T=u(N.call(new e)))!==Object.prototype&&T.next&&(i||u(T)===y||(c?c(T,y):o(T[b])||f(T,b,S)),l(T,R,!0,!0),i&&(p[R]=S)),m&&d==w&&O&&O.name!==w&&(!i&&g?h(P,"name",w):(C=!0,I=function(){return O.call(this)})),d)if(A={values:L(w),keys:v?I:L(_),entries:L(M)},E)for(k in A)(x||C||!(k in P))&&f(P,k,A[k]);else r({target:t,proto:!0,forced:x||C},A);return i&&!E||P[b]===I||f(P,b,I,{name:d}),p[t]=I,A}},8113:function(e,t,n){var r=n(7751),i=n(9145),a=n(6200),o=n(1662).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},2179:function(e,t,n){var r=n(2513);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},5785:function(e,t,n){var r=n(8043),i=n(7575),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},3111:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},4228:function(e,t,n){var r=n(5785)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},1331:function(e,t,n){var r=n(5980).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7259:function(e,t,n){var r=n(6445);e.exports="object"==("undefined"==typeof window?"undefined":r(window))},5430:function(e,t,n){var r=n(5980);e.exports=/MSIE|Trident/.test(r)},646:function(e,t,n){var r=n(5980),i=n(8043);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},3302:function(e,t,n){var r=n(5980);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5989:function(e,t,n){var r=n(8369),i=n(8043);e.exports="process"==r(i.process)},3455:function(e,t,n){var r=n(5980);e.exports=/web0s(?!.*chrome)/i.test(r)},5980:function(e,t,n){var r=n(6900);e.exports=r("navigator","userAgent")||""},5009:function(e,t,n){var r,i,a=n(8043),o=n(5980),s=a.process,u=a.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l?i=(r=l.split("."))[0]<4?1:r[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},3741:function(e,t,n){var r=n(5980).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},7620:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5743:function(e,t,n){var r=n(6445),i=n(8043),a=n(9525).f,o=n(1697),s=n(1609),u=n(8600),c=n(6057),l=n(919);e.exports=function(e,t){var n,h,f,d,p,v=e.target,m=e.global,g=e.stat;if(n=m?i:g?i[v]||u(v,{}):(i[v]||{}).prototype)for(h in t){if(d=t[h],f=e.noTargetGet?(p=a(n,h))&&p.value:n[h],!l(m?h:v+(g?".":"#")+h,e.forced)&&void 0!==f){if(r(d)===r(f))continue;c(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),s(n,h,d,e)}}},2513:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},5949:function(e,t,n){"use strict";n(6579);var r=n(1609),i=n(4410),a=n(2513),o=n(3277),s=n(1697),u=o("species"),c=RegExp.prototype;e.exports=function(e,t,n,l){var h=o(e),f=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),d=f&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!f||!d||n){var p=/./[h],v=t(h,""[e],(function(e,t,n,r,a){var o=t.exec;return o===i||o===c.exec?f&&!a?{done:!0,value:p.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,v[0]),r(c,h,v[1])}l&&s(c[h],"sham",!0)}},3379:function(e,t,n){"use strict";var r=n(8586),i=n(3865),a=n(8882);e.exports=function e(t,n,o,s,u,c,l,h){for(var f,d=u,p=0,v=!!l&&a(l,h,3);p<s;){if(p in o){if(f=v?v(o[p],p,n):o[p],c>0&&r(f))d=e(t,n,f,i(f),d,c-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[d]=f}d++}p++}return d}},4242:function(e,t,n){var r=n(2513);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8882:function(e,t,n){var r=n(2844);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},4648:function(e,t,n){"use strict";var r=n(2844),i=n(7575),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},360:function(e,t,n){var r=n(2179),i=n(9145),a=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,s=i(a,"name"),u=s&&"something"===function(){}.name,c=s&&(!r||r&&o(a,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},6900:function(e,t,n){var r=n(8043),i=n(4390),a=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e]):r[e]&&r[e][t]}},4560:function(e,t,n){var r=n(6217),i=n(4812),a=n(6309),o=n(3277)("iterator");e.exports=function(e){if(null!=e)return i(e,o)||i(e,"@@iterator")||a[r(e)]}},7055:function(e,t,n){var r=n(2844),i=n(8),a=n(4560);e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(r(n))return i(n.call(e));throw TypeError(String(e)+" is not iterable")}},4812:function(e,t,n){var r=n(2844);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},9179:function(e,t,n){var r=n(9900),i=Math.floor,a="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,u,c,l){var h=n+e.length,f=u.length,d=s;return void 0!==c&&(c=r(c),d=o),a.call(l,d,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(h);case"<":o=c[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?void 0===u[l-1]?a.charAt(1):u[l-1]+a.charAt(1):r}o=u[s-1]}return void 0===o?"":o}))}},8043:function(e,t,n){var r=n(6445),i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==("undefined"==typeof globalThis?"undefined":r(globalThis))&&globalThis)||i("object"==("undefined"==typeof window?"undefined":r(window))&&window)||i("object"==("undefined"==typeof self?"undefined":r(self))&&self)||i("object"==(void 0===n.g?"undefined":r(n.g))&&n.g)||function(){return this}()||Function("return this")()},9145:function(e,t,n){var r=n(9900),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},9987:function(e){e.exports={}},985:function(e,t,n){var r=n(8043);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},6940:function(e,t,n){var r=n(6900);e.exports=r("document","documentElement")},5846:function(e,t,n){var r=n(2179),i=n(2513),a=n(5785);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},273:function(e){var t=Math.abs,n=Math.pow,r=Math.floor,i=Math.log,a=Math.LN2;e.exports={pack:function(e,o,s){var u,c,l,h=new Array(s),f=8*s-o-1,d=(1<<f)-1,p=d>>1,v=23===o?n(2,-24)-n(2,-77):0,m=e<0||0===e&&1/e<0?1:0,g=0;for((e=t(e))!=e||e===1/0?(c=e!=e?1:0,u=d):(u=r(i(e)/a),e*(l=n(2,-u))<1&&(u--,l*=2),(e+=u+p>=1?v/l:v*n(2,1-p))*l>=2&&(u++,l/=2),u+p>=d?(c=0,u=d):u+p>=1?(c=(e*l-1)*n(2,o),u+=p):(c=e*n(2,p-1)*n(2,o),u=0));o>=8;h[g++]=255&c,c/=256,o-=8);for(u=u<<o|c,f+=o;f>0;h[g++]=255&u,u/=256,f-=8);return h[--g]|=128*m,h},unpack:function(e,t){var r,i=e.length,a=8*i-t-1,o=(1<<a)-1,s=o>>1,u=a-7,c=i-1,l=e[c--],h=127&l;for(l>>=7;u>0;h=256*h+e[c],c--,u-=8);for(r=h&(1<<-u)-1,h>>=-u,u+=t;u>0;r=256*r+e[c],c--,u-=8);if(0===h)h=1-s;else{if(h===o)return r?NaN:l?-1/0:1/0;r+=n(2,t),h-=s}return(l?-1:1)*r*n(2,h-t)}}},8064:function(e,t,n){var r=n(2513),i=n(8369),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},8154:function(e,t,n){var r=n(4390),i=n(7575),a=n(7627);e.exports=function(e,t,n){var o,s;return a&&r(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&a(e,s),e}},713:function(e,t,n){var r=n(4390),i=n(9340),a=Function.toString;r(i.inspectSource)||(i.inspectSource=function(e){return a.call(e)}),e.exports=i.inspectSource},9962:function(e,t,n){var r=n(7575),i=n(1697);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",e.cause)}},5459:function(e,t,n){var r=n(6445),i=n(5743),a=n(9987),o=n(7575),s=n(9145),u=n(1662).f,c=n(7516),l=n(5298),h=n(7152),f=n(4242),d=!1,p=h("meta"),v=0,m=Object.isExtensible||function(){return!0},g=function(e){u(e,p,{value:{objectID:"O"+v++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},d=!0;var e=c.f,t=[].splice,n={};n[p]=1,e(n).length&&(c.f=function(n){for(var r=e(n),i=0,a=r.length;i<a;i++)if(r[i]===p){t.call(r,i,1);break}return r},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!o(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!s(e,p)){if(!m(e))return"F";if(!t)return"E";g(e)}return e[p].objectID},getWeakData:function(e,t){if(!s(e,p)){if(!m(e))return!0;if(!t)return!1;g(e)}return e[p].weakData},onFreeze:function(e){return f&&d&&m(e)&&!s(e,p)&&g(e),e}};a[p]=!0},715:function(e,t,n){var r,i,a,o=n(115),s=n(8043),u=n(7575),c=n(1697),l=n(9145),h=n(9340),f=n(3129),d=n(9987),p="Object already initialized",v=s.WeakMap;if(o||h.state){var m=h.state||(h.state=new v),g=m.get,y=m.has,x=m.set;r=function(e,t){if(y.call(m,e))throw new TypeError(p);return t.facade=e,x.call(m,e,t),t},i=function(e){return g.call(m,e)||{}},a=function(e){return y.call(m,e)}}else{var b=f("state");d[b]=!0,r=function(e,t){if(l(e,b))throw new TypeError(p);return t.facade=e,c(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},a=function(e){return l(e,b)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},6995:function(e,t,n){var r=n(3277),i=n(6309),a=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[a]===e)}},8586:function(e,t,n){var r=n(8369);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4390:function(e){e.exports=function(e){return"function"==typeof e}},4175:function(e,t,n){var r=n(2513),i=n(4390),a=n(6217),o=n(6900),s=n(713),u=[],c=o("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,f=!l.exec((function(){})),d=function(e){if(!i(e))return!1;try{return c(Object,u,e),!0}catch(e){return!1}};e.exports=!c||r((function(){var e;return d(d.call)||!d(Object)||!d((function(){e=!0}))||e}))?function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!h.call(l,s(e))}:d},7273:function(e,t,n){var r=n(9145);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},919:function(e,t,n){var r=n(2513),i=n(4390),a=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==l||n!=c&&(i(t)?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},1637:function(e,t,n){var r=n(7575),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},7575:function(e,t,n){var r=n(6445),i=n(4390);e.exports=function(e){return"object"===r(e)?null!==e:i(e)}},5386:function(e){e.exports=!1},6951:function(e,t,n){var r=n(7575),i=n(8369),a=n(3277)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},8306:function(e,t,n){var r=n(6445),i=n(4390),a=n(6900),o=n(2768);e.exports=o?function(e){return"symbol"==r(e)}:function(e){var t=a("Symbol");return i(t)&&Object(e)instanceof t}},3601:function(e,t,n){var r=n(6445),i=n(8),a=n(6995),o=n(3865),s=n(8882),u=n(7055),c=n(4560),l=n(5627),h=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var f,d,p,v,m,g,y,x=n&&n.that,b=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),M=s(t,x,1+b+w),S=function(e){return f&&l(f,"normal",e),new h(!0,e)},E=function(e){return b?(i(e),w?M(e[0],e[1],S):M(e[0],e[1])):w?M(e,S):M(e)};if(_)f=e;else{if(!(d=c(e)))throw TypeError(String(e)+" is not iterable");if(a(d)){for(p=0,v=o(e);v>p;p++)if((m=E(e[p]))&&m instanceof h)return m;return new h(!1)}f=u(e,d)}for(g=f.next;!(y=g.call(f)).done;){try{m=E(y.value)}catch(e){l(f,"throw",e)}if("object"==r(m)&&m&&m instanceof h)return m}return new h(!1)}},5627:function(e,t,n){var r=n(8),i=n(4812);e.exports=function(e,t,n){var a,o;r(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw n;return n}a=a.call(e)}catch(e){o=!0,a=e}if("throw"===t)throw n;if(o)throw a;return r(a),n}},5360:function(e,t,n){"use strict";var r,i,a,o=n(2513),s=n(4390),u=n(770),c=n(6020),l=n(1609),h=n(3277),f=n(5386),d=h("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(i=c(c(a)))!==Object.prototype&&(r=i):p=!0),null==r||o((function(){var e={};return r[d].call(e)!==e}))?r={}:f&&(r=u(r)),s(r[d])||l(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},6309:function(e){e.exports={}},3865:function(e,t,n){var r=n(4384);e.exports=function(e){return r(e.length)}},7101:function(e){var t=Math.expm1,n=Math.exp;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:t},5968:function(e,t,n){var r=n(9172),i=Math.abs,a=Math.pow,o=a(2,-52),s=a(2,-23),u=a(2,127)*(2-s),c=a(2,-126);e.exports=Math.fround||function(e){var t,n,a=i(e),l=r(e);return a<c?l*(a/c/s+1/o-1/o)*c*s:(n=(t=(1+s/o)*a)-(t-a))>u||n!=n?l*(1/0):l*n}},7174:function(e){var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},9172:function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},4403:function(e,t,n){var r,i,a,o,s,u,c,l,h=n(8043),f=n(9525).f,d=n(6866).set,p=n(3302),v=n(646),m=n(3455),g=n(5989),y=h.MutationObserver||h.WebKitMutationObserver,x=h.document,b=h.process,_=h.Promise,w=f(h,"queueMicrotask"),M=w&&w.value;M||(r=function(){var e,t;for(g&&(e=b.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?o():a=void 0,e}}a=void 0,e&&e.enter()},p||g||m||!y||!x?!v&&_&&_.resolve?((c=_.resolve(void 0)).constructor=_,l=c.then,o=function(){l.call(c,r)}):o=g?function(){b.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=x.createTextNode(""),new y(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s})),e.exports=M||function(e){var t={fn:e,next:void 0};a&&(a.next=t),i||(i=t,o()),a=t}},7634:function(e,t,n){var r=n(8043);e.exports=r.Promise},3028:function(e,t,n){var r=n(5009),i=n(2513);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4194:function(e,t,n){var r=n(2513),i=n(3277),a=n(5386),o=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},115:function(e,t,n){var r=n(8043),i=n(4390),a=n(713),o=r.WeakMap;e.exports=i(o)&&/native code/.test(a(o))},7908:function(e,t,n){"use strict";var r=n(2844),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},3106:function(e,t,n){var r=n(6951);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},6689:function(e,t,n){var r=n(8043).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},9337:function(e,t,n){var r=n(8043),i=n(2513),a=n(8045),o=n(6356).trim,s=n(6591),u=r.parseFloat,c=r.Symbol,l=c&&c.iterator,h=1/u(s+"-0")!=-1/0||l&&!i((function(){u(Object(l))}));e.exports=h?function(e){var t=o(a(e)),n=u(t);return 0===n&&"-"==t.charAt(0)?-0:n}:u},5017:function(e,t,n){var r=n(8043),i=n(2513),a=n(8045),o=n(6356).trim,s=n(6591),u=r.parseInt,c=r.Symbol,l=c&&c.iterator,h=/^[+-]?0[Xx]/,f=8!==u(s+"08")||22!==u(s+"0x16")||l&&!i((function(){u(Object(l))}));e.exports=f?function(e,t){var n=o(a(e));return u(n,t>>>0||(h.test(n)?16:10))}:u},8735:function(e,t,n){"use strict";var r=n(2179),i=n(2513),a=n(172),o=n(6547),s=n(8784),u=n(9900),c=n(8064),l=Object.assign,h=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||a(l({},t)).join("")!=i}))?function(e,t){for(var n=u(e),i=arguments.length,l=1,h=o.f,f=s.f;i>l;)for(var d,p=c(arguments[l++]),v=h?a(p).concat(h(p)):a(p),m=v.length,g=0;m>g;)d=v[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:l},770:function(e,t,n){var r,i=n(8),a=n(2734),o=n(7620),s=n(9987),u=n(6940),c=n(5785),l=n(3129)("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},d=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;p="undefined"!=typeof document?document.domain&&r?d(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):d(r);for(var n=o.length;n--;)delete p.prototype[o[n]];return p()};s[l]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[l]=e):n=p(),void 0===t?n:a(n,t)}},2734:function(e,t,n){var r=n(2179),i=n(1662),a=n(8),o=n(172);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},1662:function(e,t,n){var r=n(2179),i=n(5846),a=n(8),o=n(2413),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t),a(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},9525:function(e,t,n){var r=n(2179),i=n(8784),a=n(3795),o=n(7723),s=n(2413),u=n(9145),c=n(5846),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=s(t),c)try{return l(e,t)}catch(e){}if(u(e,t))return a(!i.f.call(e,t),e[t])}},5298:function(e,t,n){var r=n(6445),i=n(7723),a=n(7516).f,o={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return a(e)}catch(e){return s.slice()}}(e):a(i(e))}},7516:function(e,t,n){var r=n(5625),i=n(7620).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},6547:function(e,t){t.f=Object.getOwnPropertySymbols},6020:function(e,t,n){var r=n(9145),i=n(4390),a=n(9900),o=n(3129),s=n(9654),u=o("IE_PROTO"),c=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){var t=a(e);if(r(t,u))return t[u];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof Object?c:null}},5625:function(e,t,n){var r=n(9145),i=n(7723),a=n(5500).indexOf,o=n(9987);e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(o,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~a(c,n)||c.push(n));return c}},172:function(e,t,n){var r=n(5625),i=n(7620);e.exports=Object.keys||function(e){return r(e,i)}},8784:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},910:function(e,t,n){"use strict";var r=n(5386),i=n(8043),a=n(2513),o=n(3741);e.exports=r||!a((function(){if(!(o&&o<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}}))},7627:function(e,t,n){var r=n(8),i=n(3631);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return r(n),i(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},4862:function(e,t,n){var r=n(2179),i=n(172),a=n(7723),o=n(8784).f,s=function(e){return function(t){for(var n,s=a(t),u=i(s),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!o.call(s,n)||h.push(e?[n,s[n]]:s[n]);return h}};e.exports={entries:s(!0),values:s(!1)}},2707:function(e,t,n){"use strict";var r=n(9383),i=n(6217);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},4109:function(e,t,n){var r=n(4390),i=n(7575);e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!i(a=n.call(e)))return a;if(r(n=e.valueOf)&&!i(a=n.call(e)))return a;if("string"!==t&&r(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},6891:function(e,t,n){var r=n(6900),i=n(7516),a=n(6547),o=n(8);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},7751:function(e,t,n){var r=n(8043);e.exports=r},9325:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9195:function(e,t,n){var r=n(8),i=n(7575),a=n(7908);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},318:function(e,t,n){var r=n(1609);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},1609:function(e,t,n){var r=n(8043),i=n(4390),a=n(9145),o=n(1697),s=n(8600),u=n(713),c=n(715),l=n(360).CONFIGURABLE,h=c.get,f=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,u){var c,h=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,v=!!u&&!!u.noTargetGet,m=u&&void 0!==u.name?u.name:t;i(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!a(n,"name")||l&&n.name!==m)&&o(n,"name",m),(c=f(n)).source||(c.source=d.join("string"==typeof m?m:""))),e!==r?(h?!v&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||u(this)}))},891:function(e,t,n){var r=n(8),i=n(4390),a=n(8369),o=n(4410);e.exports=function(e,t){var n=e.exec;if(i(n)){var s=n.call(e,t);return null!==s&&r(s),s}if("RegExp"===a(e))return o.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")}},4410:function(e,t,n){"use strict";var r,i,a=n(8045),o=n(10),s=n(177),u=n(435),c=n(770),l=n(715).get,h=n(6886),f=n(6980),d=RegExp.prototype.exec,p=u("native-string-replace",String.prototype.replace),v=d,m=(r=/a/,i=/b*/g,d.call(r,"a"),d.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),g=s.UNSUPPORTED_Y||s.BROKEN_CARET,y=void 0!==/()??/.exec("")[1];(m||y||g||h||f)&&(v=function(e){var t,n,r,i,s,u,h,f=this,x=l(f),b=a(e),_=x.raw;if(_)return _.lastIndex=f.lastIndex,t=v.call(_,b),f.lastIndex=_.lastIndex,t;var w=x.groups,M=g&&f.sticky,S=o.call(f),E=f.source,T=0,A=b;if(M&&(-1===(S=S.replace("y","")).indexOf("g")&&(S+="g"),A=b.slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==b.charAt(f.lastIndex-1))&&(E="(?: "+E+")",A=" "+A,T++),n=new RegExp("^(?:"+E+")",S)),y&&(n=new RegExp("^"+E+"$(?!\\s)",S)),m&&(r=f.lastIndex),i=d.call(M?n:f,A),M?i?(i.input=i.input.slice(T),i[0]=i[0].slice(T),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:m&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),y&&i&&i.length>1&&p.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&w)for(i.groups=u=c(null),s=0;s<w.length;s++)u[(h=w[s])[0]]=i[h[1]];return i}),e.exports=v},10:function(e,t,n){"use strict";var r=n(8);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},177:function(e,t,n){var r=n(2513),i=n(8043).RegExp;t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},6886:function(e,t,n){var r=n(2513),i=n(8043).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},6980:function(e,t,n){var r=n(2513),i=n(8043).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1181:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3514:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},8600:function(e,t,n){var r=n(8043);e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},3462:function(e,t,n){"use strict";var r=n(6900),i=n(1662),a=n(3277),o=n(2179),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},1104:function(e,t,n){var r=n(1662).f,i=n(9145),a=n(3277)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},3129:function(e,t,n){var r=n(435),i=n(7152),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},9340:function(e,t,n){var r=n(8043),i=n(8600),a="__core-js_shared__",o=r[a]||i(a,{});e.exports=o},435:function(e,t,n){var r=n(5386),i=n(9340);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},4423:function(e,t,n){var r=n(8),i=n(4950),a=n(3277)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[a])?t:i(n)}},4220:function(e,t,n){var r=n(2513);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},4365:function(e,t,n){var r=n(8889),i=n(8045),a=n(1181),o=function(e){return function(t,n){var o,s,u=i(a(t)),c=r(n),l=u.length;return c<0||c>=l?e?"":void 0:(o=u.charCodeAt(c))<55296||o>56319||c+1===l||(s=u.charCodeAt(c+1))<56320||s>57343?e?u.charAt(c):o:e?u.slice(c,c+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},1584:function(e,t,n){var r=n(5980);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},5720:function(e,t,n){var r=n(4384),i=n(8045),a=n(7861),o=n(1181),s=Math.ceil,u=function(e){return function(t,n,u){var c,l,h=i(o(t)),f=r(n),d=h.length,p=void 0===u?" ":i(u);return f<=d||""==p?h:(c=f-d,(l=a.call(p,s(c/p.length))).length>c&&(l=l.slice(0,c)),e?h+l:l+h)}};e.exports={start:u(!1),end:u(!0)}},109:function(e){"use strict";var t=2147483647,n=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,o=String.fromCharCode,s=function(e){return e+22+75*(e<26)},u=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},c=function(e){var n=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);var r,c,l=e.length,h=128,f=0,d=72;for(r=0;r<e.length;r++)(c=e[r])<128&&n.push(o(c));var p=n.length,v=p;for(p&&n.push("-");v<l;){var m=t;for(r=0;r<e.length;r++)(c=e[r])>=h&&c<m&&(m=c);var g=v+1;if(m-h>a((t-f)/g))throw RangeError(i);for(f+=(m-h)*g,h=m,r=0;r<e.length;r++){if((c=e[r])<h&&++f>t)throw RangeError(i);if(c==h){for(var y=f,x=36;;x+=36){var b=x<=d?1:x>=d+26?26:x-d;if(y<b)break;var _=y-b,w=36-b;n.push(o(s(b+_%w))),y=a(_/w)}n.push(o(s(y))),d=u(f,g,v==p),f=0,++v}}++f,++h}return n.join("")};e.exports=function(e){var t,i,a=[],o=e.toLowerCase().replace(r,".").split(".");for(t=0;t<o.length;t++)i=o[t],a.push(n.test(i)?"xn--"+c(i):i);return a.join(".")}},7861:function(e,t,n){"use strict";var r=n(8889),i=n(8045),a=n(1181);e.exports=function(e){var t=i(a(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},4667:function(e,t,n){var r=n(360).PROPER,i=n(2513),a=n(6591);e.exports=function(e){return i((function(){return!!a[e]()||"​᠎"!=="​᠎"[e]()||r&&a[e].name!==e}))}},6356:function(e,t,n){var r=n(1181),i=n(8045),a="["+n(6591)+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),u=function(e){return function(t){var n=i(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},6866:function(e,t,n){var r,i,a,o,s=n(8043),u=n(4390),c=n(2513),l=n(8882),h=n(6940),f=n(5785),d=n(3302),p=n(5989),v=s.setImmediate,m=s.clearImmediate,g=s.process,y=s.MessageChannel,x=s.Dispatch,b=0,_={};try{r=s.location}catch(e){}var w=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},M=function(e){return function(){w(e)}},S=function(e){w(e.data)},E=function(e){s.postMessage(String(e),r.protocol+"//"+r.host)};v&&m||(v=function(e){for(var t=[],n=arguments.length,r=1;n>r;)t.push(arguments[r++]);return _[++b]=function(){(u(e)?e:Function(e)).apply(void 0,t)},i(b),b},m=function(e){delete _[e]},p?i=function(e){g.nextTick(M(e))}:x&&x.now?i=function(e){x.now(M(e))}:y&&!d?(o=(a=new y).port2,a.port1.onmessage=S,i=l(o.postMessage,o,1)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!c(E)?(i=E,s.addEventListener("message",S,!1)):i="onreadystatechange"in f("script")?function(e){h.appendChild(f("script")).onreadystatechange=function(){h.removeChild(this),w(e)}}:function(e){setTimeout(M(e),0)}),e.exports={set:v,clear:m}},3636:function(e){var t=1..valueOf;e.exports=function(e){return t.call(e)}},7842:function(e,t,n){var r=n(8889),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},3593:function(e,t,n){var r=n(8889),i=n(4384);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},7723:function(e,t,n){var r=n(8064),i=n(1181);e.exports=function(e){return r(i(e))}},8889:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?n:t)(r)}},4384:function(e,t,n){var r=n(8889),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},9900:function(e,t,n){var r=n(1181);e.exports=function(e){return Object(r(e))}},9668:function(e,t,n){var r=n(9447);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},9447:function(e,t,n){var r=n(8889);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},5598:function(e,t,n){var r=n(7575),i=n(8306),a=n(4812),o=n(4109),s=n(3277)("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,u=a(e,s);if(u){if(void 0===t&&(t="default"),n=u.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2413:function(e,t,n){var r=n(5598),i=n(8306);e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},9383:function(e,t,n){var r={};r[n(3277)("toStringTag")]="z",e.exports="[object z]"===String(r)},8045:function(e,t,n){var r=n(6217);e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},3239:function(e){e.exports=function(e){try{return String(e)}catch(e){return"Object"}}},8692:function(e,t,n){"use strict";var r=n(5743),i=n(8043),a=n(2179),o=n(3289),s=n(1610),u=n(6251),c=n(59),l=n(3795),h=n(1697),f=n(1637),d=n(4384),p=n(3593),v=n(9668),m=n(2413),g=n(9145),y=n(6217),x=n(7575),b=n(8306),_=n(770),w=n(7627),M=n(7516).f,S=n(1827),E=n(2218).forEach,T=n(3462),A=n(1662),k=n(9525),L=n(715),R=n(8154),C=L.get,P=L.set,O=A.f,I=k.f,N=Math.round,D=i.RangeError,F=u.ArrayBuffer,z=u.DataView,U=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_CONSTRUCTOR,H=s.TYPED_ARRAY_TAG,j=s.TypedArray,G=s.TypedArrayPrototype,V=s.aTypedArrayConstructor,W=s.isTypedArray,q="BYTES_PER_ELEMENT",$="Wrong length",X=function(e,t){for(var n=0,r=t.length,i=new(V(e))(r);r>n;)i[n]=t[n++];return i},Y=function(e,t){O(e,t,{get:function(){return C(this)[t]}})},Z=function(e){var t;return e instanceof F||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},J=function(e,t){return W(e)&&!b(t)&&t in e&&f(+t)&&t>=0},K=function(e,t){return t=m(t),J(e,t)?l(2,e[t]):I(e,t)},Q=function(e,t,n){return t=m(t),!(J(e,t)&&x(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?O(e,t,n):(e[t]=n.value,e)};a?(U||(k.f=K,A.f=Q,Y(G,"buffer"),Y(G,"byteOffset"),Y(G,"byteLength"),Y(G,"length")),r({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:K,defineProperty:Q}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,l="set"+e,f=i[s],m=f,g=m&&m.prototype,y={},b=function(e,t){O(e,t,{get:function(){return function(e,t){var n=C(e);return n.view[u](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=C(e);n&&(r=(r=N(r))<0?0:r>255?255:255&r),i.view[l](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};U?o&&(m=t((function(e,t,n,r){return c(e,m,s),R(x(t)?Z(t)?void 0!==r?new f(t,v(n,a),r):void 0!==n?new f(t,v(n,a)):new f(t):W(t)?X(m,t):S.call(m,t):new f(p(t)),e,m)})),w&&w(m,j),E(M(f),(function(e){e in m||h(m,e,f[e])})),m.prototype=g):(m=t((function(e,t,n,r){c(e,m,s);var i,o,u,l=0,h=0;if(x(t)){if(!Z(t))return W(t)?X(m,t):S.call(m,t);i=t,h=v(n,a);var f=t.byteLength;if(void 0===r){if(f%a)throw D($);if((o=f-h)<0)throw D($)}else if((o=d(r)*a)+h>f)throw D($);u=o/a}else u=p(t),i=new F(o=u*a);for(P(e,{buffer:i,byteOffset:h,byteLength:o,length:u,view:new z(i)});l<u;)b(e,l++)})),w&&w(m,j),g=m.prototype=_(G)),g.constructor!==m&&h(g,"constructor",m),h(g,B,m),H&&h(g,H,s),y[s]=m,r({global:!0,forced:m!=f,sham:!U},y),q in m||h(m,q,a),q in g||h(g,q,a),T(s)}):e.exports=function(){}},3289:function(e,t,n){var r=n(8043),i=n(2513),a=n(7167),o=n(1610).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!o||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!a((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},7365:function(e,t,n){var r=n(1521),i=n(750);e.exports=function(e,t){return r(i(e),t)}},1827:function(e,t,n){var r=n(4950),i=n(9900),a=n(3865),o=n(7055),s=n(4560),u=n(6995),c=n(8882),l=n(1610).aTypedArrayConstructor;e.exports=function(e){var t,n,h,f,d,p,v=r(this),m=i(e),g=arguments.length,y=g>1?arguments[1]:void 0,x=void 0!==y,b=s(m);if(b&&!u(b))for(p=(d=o(m,b)).next,m=[];!(f=p.call(d)).done;)m.push(f.value);for(x&&g>2&&(y=c(y,arguments[2],2)),n=a(m),h=new(l(v))(n),t=0;n>t;t++)h[t]=x?y(m[t],t):m[t];return h}},750:function(e,t,n){var r=n(1610),i=n(4423),a=r.TYPED_ARRAY_CONSTRUCTOR,o=r.aTypedArrayConstructor;e.exports=function(e){return o(i(e,e[a]))}},7152:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},2768:function(e,t,n){var r=n(6445),i=n(3028);e.exports=i&&!Symbol.sham&&"symbol"==r(Symbol.iterator)},6200:function(e,t,n){var r=n(3277);t.f=r},3277:function(e,t,n){var r=n(8043),i=n(435),a=n(9145),o=n(7152),s=n(3028),u=n(2768),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||o;e.exports=function(e){return a(c,e)&&(s||"string"==typeof c[e])||(s&&a(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},6591:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},6984:function(e,t,n){"use strict";var r=n(5743),i=n(6020),a=n(7627),o=n(770),s=n(1697),u=n(3795),c=n(9962),l=n(3601),h=n(8045),f=function(e,t){var n=this,r=arguments.length>2?arguments[2]:void 0;if(!(n instanceof f))return new f(e,t,r);a&&(n=a(new Error(void 0),i(n))),void 0!==t&&s(n,"message",h(t)),c(n,r);var o=[];return l(e,o.push,{that:o}),s(n,"errors",o),n};f.prototype=o(Error.prototype,{constructor:u(5,f),message:u(5,""),name:u(5,"AggregateError")}),r({global:!0},{AggregateError:f})},5287:function(e,t,n){"use strict";var r=n(5743),i=n(8043),a=n(6251),o=n(3462),s=a.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),o("ArrayBuffer")},2086:function(e,t,n){var r=n(5743),i=n(1610);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},735:function(e,t,n){"use strict";var r=n(5743),i=n(2513),a=n(6251),o=n(8),s=n(7842),u=n(4384),c=n(4423),l=a.ArrayBuffer,h=a.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(o(this),e);for(var n=o(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),a=new(c(this,l))(u(i-r)),d=new h(this),p=new h(a),v=0;r<i;)p.setUint8(v++,d.getUint8(r++));return a}})},3037:function(e,t,n){"use strict";var r=n(5743),i=n(9900),a=n(3865),o=n(8889),s=n(5333);r({target:"Array",proto:!0},{at:function(e){var t=i(this),n=a(t),r=o(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}}),s("at")},6894:function(e,t,n){"use strict";var r=n(5743),i=n(2513),a=n(8586),o=n(7575),s=n(9900),u=n(3865),c=n(9576),l=n(201),h=n(7580),f=n(3277),d=n(5009),p=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=d>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),y=h("concat"),x=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!y},{concat:function(e){var t,n,r,i,a,o=s(this),h=l(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(x(a=-1===t?o:arguments[t])){if(f+(i=u(a))>v)throw TypeError(m);for(n=0;n<i;n++,f++)n in a&&c(h,f,a[n])}else{if(f>=v)throw TypeError(m);c(h,f++,a)}return h.length=f,h}})},2582:function(e,t,n){var r=n(5743),i=n(304),a=n(5333);r({target:"Array",proto:!0},{copyWithin:i}),a("copyWithin")},2821:function(e,t,n){"use strict";var r=n(5743),i=n(2218).every;r({target:"Array",proto:!0,forced:!n(7800)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},3307:function(e,t,n){var r=n(5743),i=n(3241),a=n(5333);r({target:"Array",proto:!0},{fill:i}),a("fill")},1446:function(e,t,n){"use strict";var r=n(5743),i=n(2218).filter;r({target:"Array",proto:!0,forced:!n(7580)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},1235:function(e,t,n){"use strict";var r=n(5743),i=n(2218).findIndex,a=n(5333),o="findIndex",s=!0;o in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},9676:function(e,t,n){"use strict";var r=n(5743),i=n(2218).find,a=n(5333),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},8074:function(e,t,n){"use strict";var r=n(5743),i=n(3379),a=n(2844),o=n(9900),s=n(3865),u=n(201);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=s(n);return a(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},9119:function(e,t,n){"use strict";var r=n(5743),i=n(3379),a=n(9900),o=n(3865),s=n(8889),u=n(201);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),n=o(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},474:function(e,t,n){"use strict";var r=n(5743),i=n(4113);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},359:function(e,t,n){var r=n(5743),i=n(1499);r({target:"Array",stat:!0,forced:!n(7167)((function(e){Array.from(e)}))},{from:i})},3646:function(e,t,n){"use strict";var r=n(5743),i=n(5500).includes,a=n(5333);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},3994:function(e,t,n){"use strict";var r=n(5743),i=n(5500).indexOf,a=n(7800),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=a("indexOf");r({target:"Array",proto:!0,forced:s||!u},{indexOf:function(e){return s?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},9530:function(e,t,n){n(5743)({target:"Array",stat:!0},{isArray:n(8586)})},2578:function(e,t,n){"use strict";var r=n(7723),i=n(5333),a=n(6309),o=n(715),s=n(6305),u="Array Iterator",c=o.set,l=o.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},8405:function(e,t,n){"use strict";var r=n(5743),i=n(8064),a=n(7723),o=n(7800),s=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},1708:function(e,t,n){var r=n(5743),i=n(2226);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},9849:function(e,t,n){"use strict";var r=n(5743),i=n(2218).map;r({target:"Array",proto:!0,forced:!n(7580)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},341:function(e,t,n){"use strict";var r=n(5743),i=n(2513),a=n(4175),o=n(9576);r({target:"Array",stat:!0,forced:i((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(a(this)?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},3374:function(e,t,n){"use strict";var r=n(5743),i=n(4533).right,a=n(7800),o=n(5009),s=n(5989);r({target:"Array",proto:!0,forced:!a("reduceRight")||!s&&o>79&&o<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5127:function(e,t,n){"use strict";var r=n(5743),i=n(4533).left,a=n(7800),o=n(5009),s=n(5989);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3519:function(e,t,n){"use strict";var r=n(5743),i=n(8586),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},4760:function(e,t,n){"use strict";var r=n(5743),i=n(8586),a=n(4175),o=n(7575),s=n(7842),u=n(3865),c=n(7723),l=n(9576),h=n(3277),f=n(7580)("slice"),d=h("species"),p=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,h,f=c(this),m=u(f),g=s(e,m),y=s(void 0===t?m:t,m);if(i(f)&&(n=f.constructor,(a(n)&&(n===Array||i(n.prototype))||o(n)&&null===(n=n[d]))&&(n=void 0),n===Array||void 0===n))return p.call(f,g,y);for(r=new(void 0===n?Array:n)(v(y-g,0)),h=0;g<y;g++,h++)g in f&&l(r,h,f[g]);return r.length=h,r}})},4526:function(e,t,n){"use strict";var r=n(5743),i=n(2218).some;r({target:"Array",proto:!0,forced:!n(7800)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9783:function(e,t,n){"use strict";var r=n(5743),i=n(2844),a=n(9900),o=n(3865),s=n(8045),u=n(2513),c=n(7802),l=n(7800),h=n(1331),f=n(5430),d=n(5009),p=n(3741),v=[],m=v.sort,g=u((function(){v.sort(void 0)})),y=u((function(){v.sort(null)})),x=l("sort"),b=!u((function(){if(d)return d<70;if(!(h&&h>3)){if(f)return!0;if(p)return p<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:t+r,v:n})}for(v.sort((function(e,t){return t.v-e.v})),r=0;r<v.length;r++)t=v[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:g||!y||!x||!b},{sort:function(e){void 0!==e&&i(e);var t=a(this);if(b)return void 0===e?m.call(t):m.call(t,e);var n,r,u=[],l=o(t);for(r=0;r<l;r++)r in t&&u.push(t[r]);for(u=c(u,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}}(e)),n=u.length,r=0;r<n;)t[r]=u[r++];for(;r<l;)delete t[r++];return t}})},8923:function(e,t,n){n(3462)("Array")},7139:function(e,t,n){"use strict";var r=n(5743),i=n(7842),a=n(8889),o=n(3865),s=n(9900),u=n(201),c=n(9576),l=n(7580)("splice"),h=Math.max,f=Math.min,d=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,r,l,v,m,g,y=s(this),x=o(y),b=i(e,x),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=x-b):(n=_-2,r=f(h(a(t),0),x-b)),x+n-r>d)throw TypeError(p);for(l=u(y,r),v=0;v<r;v++)(m=b+v)in y&&c(l,v,y[m]);if(l.length=r,n<r){for(v=b;v<x-r;v++)g=v+n,(m=v+r)in y?y[g]=y[m]:delete y[g];for(v=x;v>x-r+n;v--)delete y[v-1]}else if(n>r)for(v=x-r;v>b;v--)g=v+n-1,(m=v+r-1)in y?y[g]=y[m]:delete y[g];for(v=0;v<n;v++)y[v+b]=arguments[v+2];return y.length=x-r+n,l}})},5588:function(e,t,n){n(5333)("flatMap")},7850:function(e,t,n){n(5333)("flat")},8914:function(e,t,n){var r=n(5743),i=n(6251);r({global:!0,forced:!n(2687)},{DataView:i.DataView})},7467:function(e,t,n){"use strict";var r=n(5743),i=n(2513)((function(){return 120!==new Date(16e11).getYear()})),a=Date.prototype.getFullYear;r({target:"Date",proto:!0,forced:i},{getYear:function(){return a.call(this)-1900}})},6912:function(e,t,n){n(5743)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},806:function(e,t,n){"use strict";var r=n(5743),i=n(8889),a=Date.prototype.getTime,o=Date.prototype.setFullYear;r({target:"Date",proto:!0},{setYear:function(e){a.call(this);var t=i(e),n=0<=t&&t<=99?t+1900:t;return o.call(this,n)}})},2881:function(e,t,n){n(5743)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},4198:function(e,t,n){var r=n(5743),i=n(8598);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},9104:function(e,t,n){"use strict";var r=n(5743),i=n(2513),a=n(9900),o=n(5598);r({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=a(this),n=o(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},2186:function(e,t,n){var r=n(1609),i=n(5740),a=n(3277)("toPrimitive"),o=Date.prototype;a in o||r(o,a,i)},492:function(e,t,n){var r=n(1609),i=Date.prototype,a="Invalid Date",o=i.toString,s=i.getTime;String(new Date(NaN))!=a&&r(i,"toString",(function(){var e=s.call(this);return e==e?o.call(this):a}))},9702:function(e,t,n){"use strict";var r=n(5743),i=n(8045),a=/[\w*+\-./@]/,o=function(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n};r({global:!0},{escape:function(e){for(var t,n,r=i(e),s="",u=r.length,c=0;c<u;)t=r.charAt(c++),a.test(t)?s+=t:s+=(n=t.charCodeAt(0))<256?"%"+o(n,2):"%u"+o(n,4).toUpperCase();return s}})},5567:function(e,t,n){n(5743)({target:"Function",proto:!0},{bind:n(4648)})},7642:function(e,t,n){"use strict";var r=n(4390),i=n(7575),a=n(1662),o=n(6020),s=n(3277)("hasInstance"),u=Function.prototype;s in u||a.f(u,s,{value:function(e){if(!r(this)||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},9434:function(e,t,n){var r=n(2179),i=n(360).EXISTS,a=n(1662).f,o=Function.prototype,s=o.toString,u=/^\s*function ([^ (]*)/;r&&!i&&a(o,"name",{configurable:!0,get:function(){try{return s.call(this).match(u)[1]}catch(e){return""}}})},4101:function(e,t,n){n(5743)({global:!0},{globalThis:n(8043)})},7102:function(e,t,n){var r=n(5743),i=n(6900),a=n(2513),o=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,l=function(e,t,n){var r=n.charAt(t-1),i=n.charAt(t+1);return u.test(e)&&!c.test(i)||c.test(e)&&!u.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},h=a((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&r({target:"JSON",stat:!0,forced:h},{stringify:function(e,t,n){var r=o.apply(null,arguments);return"string"==typeof r?r.replace(s,l):r}})},8056:function(e,t,n){var r=n(8043);n(1104)(r.JSON,"JSON",!0)},6429:function(e,t,n){"use strict";var r=n(6021),i=n(1359);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},2138:function(e,t,n){var r=n(5743),i=n(7174),a=Math.acosh,o=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!a||710!=Math.floor(a(Number.MAX_VALUE))||a(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?o(e)+u:i(e-1+s(e-1)*s(e+1))}})},8322:function(e,t,n){var r=n(5743),i=Math.asinh,a=Math.log,o=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):a(t+o(t*t+1)):t}})},1492:function(e,t,n){var r=n(5743),i=Math.atanh,a=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:a((1+e)/(1-e))/2}})},4080:function(e,t,n){var r=n(5743),i=n(9172),a=Math.abs,o=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return i(e=+e)*o(a(e),1/3)}})},9885:function(e,t,n){var r=n(5743),i=Math.floor,a=Math.log,o=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-i(a(e+.5)*o):32}})},570:function(e,t,n){var r=n(5743),i=n(7101),a=Math.cosh,o=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!a||a(710)===1/0},{cosh:function(e){var t=i(o(e)-1)+1;return(t+1/(t*s*s))*(s/2)}})},8975:function(e,t,n){var r=n(5743),i=n(7101);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},2728:function(e,t,n){n(5743)({target:"Math",stat:!0},{fround:n(5968)})},5483:function(e,t,n){var r=n(5743),i=Math.hypot,a=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,u=arguments.length,c=0;s<u;)c<(n=a(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*o(i)}})},5601:function(e,t,n){var r=n(5743),i=n(2513),a=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=a(4294967295,5)||2!=a.length}))},{imul:function(e,t){var n=65535,r=+e,i=+t,a=n&r,o=n&i;return 0|a*o+((n&r>>>16)*o+a*(n&i>>>16)<<16>>>0)}})},6366:function(e,t,n){var r=n(5743),i=Math.log,a=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(e){return i(e)*a}})},5936:function(e,t,n){n(5743)({target:"Math",stat:!0},{log1p:n(7174)})},6442:function(e,t,n){var r=n(5743),i=Math.log,a=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return i(e)/a}})},1478:function(e,t,n){n(5743)({target:"Math",stat:!0},{sign:n(9172)})},3192:function(e,t,n){var r=n(5743),i=n(2513),a=n(7101),o=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return o(e=+e)<1?(a(e)-a(-e))/2:(s(e-1)-s(-e-1))*(u/2)}})},5783:function(e,t,n){var r=n(5743),i=n(7101),a=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},3507:function(e,t,n){n(1104)(Math,"Math",!0)},2018:function(e,t,n){var r=n(5743),i=Math.ceil,a=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?a:i)(e)}})},2537:function(e,t,n){"use strict";var r=n(2179),i=n(8043),a=n(919),o=n(1609),s=n(9145),u=n(8154),c=n(8306),l=n(5598),h=n(2513),f=n(7516).f,d=n(9525).f,p=n(1662).f,v=n(3636),m=n(6356).trim,g="Number",y=i.Number,x=y.prototype,b=function(e){var t=l(e,"number");return"bigint"==typeof t?t:_(t)},_=function(e){var t,n,r,i,a,o,s,u,h=l(e,"number");if(c(h))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof h&&h.length>2)if(43===(t=(h=m(h)).charCodeAt(0))||45===t){if(88===(n=h.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(h.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+h}for(o=(a=h.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>i)return NaN;return parseInt(a,r)}return+h};if(a(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,M=function(e){var t=arguments.length<1?0:y(b(e)),n=this;return n instanceof M&&h((function(){v(n)}))?u(Object(t),n,M):t},S=r?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;S.length>E;E++)s(y,w=S[E])&&!s(M,w)&&p(M,w,d(y,w));M.prototype=x,x.constructor=M,o(i,g,M)}},298:function(e,t,n){n(5743)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},3572:function(e,t,n){n(5743)({target:"Number",stat:!0},{isFinite:n(6689)})},561:function(e,t,n){n(5743)({target:"Number",stat:!0},{isInteger:n(1637)})},6920:function(e,t,n){n(5743)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},6177:function(e,t,n){var r=n(5743),i=n(1637),a=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},2940:function(e,t,n){n(5743)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},7970:function(e,t,n){n(5743)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},2692:function(e,t,n){var r=n(5743),i=n(9337);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},8977:function(e,t,n){var r=n(5743),i=n(5017);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},4037:function(e,t,n){"use strict";var r=n(5743),i=n(8889),a=n(3636),o=n(7861),s=n(2513),u=1..toFixed,c=Math.floor,l=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},h=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=c(i/1e7)},f=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=c(r/t),r=r%t*1e7},d=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+o.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(e){var t,n,r,s,u=a(this),c=i(e),p=[0,0,0,0,0,0],v="",m="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*l(2,69,1))-69)<0?u*l(2,-t,1):u/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(p,0,n),r=c;r>=7;)h(p,1e7,0),r-=7;for(h(p,l(10,r,1),0),r=t-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),h(p,1,1),f(p,2),m=d(p)}else h(p,0,n),h(p,1<<-t,0),m=d(p)+o.call("0",c);return c>0?v+((s=m.length)<=c?"0."+o.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c)):v+m}})},3599:function(e,t,n){"use strict";var r=n(5743),i=n(2513),a=n(3636),o=1..toPrecision;r({target:"Number",proto:!0,forced:i((function(){return"1"!==o.call(1,void 0)}))||!i((function(){o.call({})}))},{toPrecision:function(e){return void 0===e?o.call(a(this)):o.call(a(this),e)}})},38:function(e,t,n){var r=n(5743),i=n(8735);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},3445:function(e,t,n){n(5743)({target:"Object",stat:!0,sham:!n(2179)},{create:n(770)})},9830:function(e,t,n){"use strict";var r=n(5743),i=n(2179),a=n(910),o=n(2844),s=n(9900),u=n(1662);i&&r({target:"Object",proto:!0,forced:a},{__defineGetter__:function(e,t){u.f(s(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},8652:function(e,t,n){var r=n(5743),i=n(2179);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(2734)})},9998:function(e,t,n){var r=n(5743),i=n(2179);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(1662).f})},458:function(e,t,n){"use strict";var r=n(5743),i=n(2179),a=n(910),o=n(2844),s=n(9900),u=n(1662);i&&r({target:"Object",proto:!0,forced:a},{__defineSetter__:function(e,t){u.f(s(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},9497:function(e,t,n){var r=n(5743),i=n(4862).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},9245:function(e,t,n){var r=n(5743),i=n(4242),a=n(2513),o=n(7575),s=n(5459).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){u(1)})),sham:!i},{freeze:function(e){return u&&o(e)?u(s(e)):e}})},5837:function(e,t,n){var r=n(5743),i=n(3601),a=n(9576);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){a(t,e,n)}),{AS_ENTRIES:!0}),t}})},5613:function(e,t,n){var r=n(5743),i=n(2513),a=n(7723),o=n(9525).f,s=n(2179),u=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},4420:function(e,t,n){var r=n(5743),i=n(2179),a=n(6891),o=n(7723),s=n(9525),u=n(9576);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),i=s.f,c=a(r),l={},h=0;c.length>h;)void 0!==(n=i(r,t=c[h++]))&&u(l,t,n);return l}})},6804:function(e,t,n){var r=n(5743),i=n(2513),a=n(5298).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:a})},6389:function(e,t,n){var r=n(5743),i=n(2513),a=n(9900),o=n(6020),s=n(9654);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},9466:function(e,t,n){n(5743)({target:"Object",stat:!0},{hasOwn:n(9145)})},3770:function(e,t,n){var r=n(5743),i=n(2513),a=n(7575),o=Object.isExtensible;r({target:"Object",stat:!0,forced:i((function(){o(1)}))},{isExtensible:function(e){return!!a(e)&&(!o||o(e))}})},7849:function(e,t,n){var r=n(5743),i=n(2513),a=n(7575),o=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){o(1)}))},{isFrozen:function(e){return!a(e)||!!o&&o(e)}})},3711:function(e,t,n){var r=n(5743),i=n(2513),a=n(7575),o=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){o(1)}))},{isSealed:function(e){return!a(e)||!!o&&o(e)}})},6387:function(e,t,n){n(5743)({target:"Object",stat:!0},{is:n(3514)})},2219:function(e,t,n){var r=n(5743),i=n(9900),a=n(172);r({target:"Object",stat:!0,forced:n(2513)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},368:function(e,t,n){"use strict";var r=n(5743),i=n(2179),a=n(910),o=n(9900),s=n(2413),u=n(6020),c=n(9525).f;i&&r({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(e){var t,n=o(this),r=s(e);do{if(t=c(n,r))return t.get}while(n=u(n))}})},2799:function(e,t,n){"use strict";var r=n(5743),i=n(2179),a=n(910),o=n(9900),s=n(2413),u=n(6020),c=n(9525).f;i&&r({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(e){var t,n=o(this),r=s(e);do{if(t=c(n,r))return t.set}while(n=u(n))}})},5251:function(e,t,n){var r=n(5743),i=n(7575),a=n(5459).onFreeze,o=n(4242),s=n(2513),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!o},{preventExtensions:function(e){return u&&i(e)?u(a(e)):e}})},5028:function(e,t,n){var r=n(5743),i=n(7575),a=n(5459).onFreeze,o=n(4242),s=n(2513),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!o},{seal:function(e){return u&&i(e)?u(a(e)):e}})},2438:function(e,t,n){n(5743)({target:"Object",stat:!0},{setPrototypeOf:n(7627)})},6526:function(e,t,n){var r=n(9383),i=n(1609),a=n(2707);r||i(Object.prototype,"toString",a,{unsafe:!0})},8427:function(e,t,n){var r=n(5743),i=n(4862).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},7359:function(e,t,n){var r=n(5743),i=n(9337);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},4729:function(e,t,n){var r=n(5743),i=n(5017);r({global:!0,forced:parseInt!=i},{parseInt:i})},3633:function(e,t,n){"use strict";var r=n(5743),i=n(2844),a=n(7908),o=n(9325),s=n(3601);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),r=n.resolve,u=n.reject,c=o((function(){var n=i(t.resolve),a=[],o=0,u=1;s(e,(function(e){var i=o++,s=!1;a.push(void 0),u++,n.call(t,e).then((function(e){s||(s=!0,a[i]={status:"fulfilled",value:e},--u||r(a))}),(function(e){s||(s=!0,a[i]={status:"rejected",reason:e},--u||r(a))}))})),--u||r(a)}));return c.error&&u(c.value),n.promise}})},9392:function(e,t,n){"use strict";var r=n(5743),i=n(2844),a=n(6900),o=n(7908),s=n(9325),u=n(3601),c="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=o.f(t),r=n.resolve,l=n.reject,h=s((function(){var n=i(t.resolve),o=[],s=0,h=1,f=!1;u(e,(function(e){var i=s++,u=!1;o.push(void 0),h++,n.call(t,e).then((function(e){u||f||(f=!0,r(e))}),(function(e){u||f||(u=!0,o[i]=e,--h||l(new(a("AggregateError"))(o,c)))}))})),--h||l(new(a("AggregateError"))(o,c))}));return h.error&&l(h.value),n.promise}})},7071:function(e,t,n){"use strict";var r=n(5743),i=n(5386),a=n(7634),o=n(2513),s=n(6900),u=n(4390),c=n(4423),l=n(9195),h=n(1609);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n=u(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&u(a)){var f=s("Promise").prototype.finally;a.prototype.finally!==f&&h(a.prototype,"finally",f,{unsafe:!0})}},6898:function(e,t,n){"use strict";var r,i,a,o,s=n(5743),u=n(5386),c=n(8043),l=n(6900),h=n(7634),f=n(1609),d=n(318),p=n(7627),v=n(1104),m=n(3462),g=n(2844),y=n(4390),x=n(7575),b=n(59),_=n(713),w=n(3601),M=n(7167),S=n(4423),E=n(6866).set,T=n(4403),A=n(9195),k=n(985),L=n(7908),R=n(9325),C=n(715),P=n(919),O=n(3277),I=n(7259),N=n(5989),D=n(5009),F=O("species"),z="Promise",U=C.get,B=C.set,H=C.getterFor(z),j=h&&h.prototype,G=h,V=j,W=c.TypeError,q=c.document,$=c.process,X=L.f,Y=X,Z=!!(q&&q.createEvent&&c.dispatchEvent),J=y(c.PromiseRejectionEvent),K="unhandledrejection",Q=!1,ee=P(z,(function(){var e=_(G),t=e!==String(G);if(!t&&66===D)return!0;if(u&&!V.finally)return!0;if(D>=51&&/native code/.test(e))return!1;var n=new G((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[F]=r,!(Q=n.then((function(){}))instanceof r)||!t&&I&&!J})),te=ee||!M((function(e){G.all(e).catch((function(){}))})),ne=function(e){var t;return!(!x(e)||!y(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;T((function(){for(var r=e.value,i=1==e.state,a=0;n.length>a;){var o,s,u,c=n[a++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===e.rejection&&se(e),e.rejection=1),!0===l?o=r:(d&&d.enter(),o=l(r),d&&(d.exit(),u=!0)),o===c.promise?f(W("Promise-chain cycle")):(s=ne(o))?s.call(o,h,f):h(o)):f(r)}catch(e){d&&!u&&d.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ae(e)}))}},ie=function(e,t,n){var r,i;Z?((r=q.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!J&&(i=c["on"+e])?i(r):e===K&&k("Unhandled promise rejection",n)},ae=function(e){E.call(c,(function(){var t,n=e.facade,r=e.value;if(oe(e)&&(t=R((function(){N?$.emit("unhandledRejection",r,n):ie(K,n,r)})),e.rejection=N||oe(e)?2:1,t.error))throw t.value}))},oe=function(e){return 1!==e.rejection&&!e.parent},se=function(e){E.call(c,(function(){var t=e.facade;N?$.emit("rejectionHandled",t):ie("rejectionhandled",t,e.value)}))},ue=function(e,t,n){return function(r){e(t,r,n)}},ce=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,re(e,!0))},le=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw W("Promise can't be resolved itself");var i=ne(n);i?T((function(){var r={done:!1};try{i.call(n,ue(e,r,t),ue(ce,r,t))}catch(e){ce(r,e,t)}})):(t.value=n,t.state=1,re(t,!1))}catch(e){ce({done:!1},e,t)}}};if(ee&&(V=(G=function(e){b(this,G,z),g(e),r.call(this);var t=U(this);try{e(ue(le,t),ue(ce,t))}catch(e){ce(t,e)}}).prototype,(r=function(e){B(this,{type:z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(V,{then:function(e,t){var n=H(this),r=X(S(this,G));return r.ok=!y(e)||e,r.fail=y(t)&&t,r.domain=N?$.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&re(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=U(e);this.promise=e,this.resolve=ue(le,t),this.reject=ue(ce,t)},L.f=X=function(e){return e===G||e===a?new i(e):Y(e)},!u&&y(h)&&j!==Object.prototype)){o=j.then,Q||(f(j,"then",(function(e,t){var n=this;return new G((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),f(j,"catch",V.catch,{unsafe:!0}));try{delete j.constructor}catch(e){}p&&p(j,V)}s({global:!0,wrap:!0,forced:ee},{Promise:G}),v(G,z,!1,!0),m(z),a=l(z),s({target:z,stat:!0,forced:ee},{reject:function(e){var t=X(this);return t.reject.call(void 0,e),t.promise}}),s({target:z,stat:!0,forced:u||ee},{resolve:function(e){return A(u&&this===a?G:this,e)}}),s({target:z,stat:!0,forced:te},{all:function(e){var t=this,n=X(t),r=n.resolve,i=n.reject,a=R((function(){var n=g(t.resolve),a=[],o=0,s=1;w(e,(function(e){var u=o++,c=!1;a.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=X(t),r=n.reject,i=R((function(){var i=g(t.resolve);w(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},6361:function(e,t,n){var r=n(5743),i=n(6900),a=n(2844),o=n(8),s=n(2513),u=i("Reflect","apply"),c=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){u((function(){}))}))},{apply:function(e,t,n){return a(e),o(n),u?u(e,t,n):c.call(e,t,n)}})},6123:function(e,t,n){var r=n(5743),i=n(6900),a=n(4950),o=n(8),s=n(7575),u=n(770),c=n(4648),l=n(2513),h=i("Reflect","construct"),f=l((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),d=!l((function(){h((function(){}))})),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(d&&!f)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),p=Function.apply.call(e,l,t);return s(p)?p:l}})},6418:function(e,t,n){var r=n(5743),i=n(2179),a=n(8),o=n(2413),s=n(1662);r({target:"Reflect",stat:!0,forced:n(2513)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){a(e);var r=o(t);a(n);try{return s.f(e,r,n),!0}catch(e){return!1}}})},623:function(e,t,n){var r=n(5743),i=n(8),a=n(9525).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},52:function(e,t,n){var r=n(5743),i=n(2179),a=n(8),o=n(9525);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},6015:function(e,t,n){var r=n(5743),i=n(8),a=n(6020);r({target:"Reflect",stat:!0,sham:!n(9654)},{getPrototypeOf:function(e){return a(i(e))}})},4907:function(e,t,n){var r=n(5743),i=n(7575),a=n(8),o=n(7273),s=n(9525),u=n(6020);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c,l=arguments.length<3?t:arguments[2];return a(t)===l?t[n]:(r=s.f(t,n))?o(r)?r.value:void 0===r.get?void 0:r.get.call(l):i(c=u(t))?e(c,n,l):void 0}})},4582:function(e,t,n){n(5743)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},6658:function(e,t,n){var r=n(5743),i=n(8),a=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!a||a(e)}})},6280:function(e,t,n){n(5743)({target:"Reflect",stat:!0},{ownKeys:n(6891)})},3961:function(e,t,n){var r=n(5743),i=n(6900),a=n(8);r({target:"Reflect",stat:!0,sham:!n(4242)},{preventExtensions:function(e){a(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},2279:function(e,t,n){var r=n(5743),i=n(8),a=n(3631),o=n(7627);o&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),a(t);try{return o(e,t),!0}catch(e){return!1}}})},1280:function(e,t,n){var r=n(5743),i=n(8),a=n(7575),o=n(7273),s=n(2513),u=n(1662),c=n(9525),l=n(6020),h=n(3795);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var s,f,d,p=arguments.length<4?t:arguments[3],v=c.f(i(t),n);if(!v){if(a(f=l(t)))return e(f,n,r,p);v=h(0)}if(o(v)){if(!1===v.writable||!a(p))return!1;if(s=c.f(p,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,u.f(p,n,s)}else u.f(p,n,h(0,r))}else{if(void 0===(d=v.set))return!1;d.call(p,r)}return!0}})},1842:function(e,t,n){var r=n(5743),i=n(8043),a=n(1104);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},4039:function(e,t,n){var r=n(2179),i=n(8043),a=n(919),o=n(8154),s=n(1697),u=n(1662).f,c=n(7516).f,l=n(6951),h=n(8045),f=n(10),d=n(177),p=n(1609),v=n(2513),m=n(9145),g=n(715).enforce,y=n(3462),x=n(3277),b=n(6886),_=n(6980),w=x("match"),M=i.RegExp,S=M.prototype,E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,A=/a/g,k=new M(T)!==T,L=d.UNSUPPORTED_Y;if(a("RegExp",r&&(!k||L||b||_||v((function(){return A[w]=!1,M(T)!=T||M(A)==A||"/a/i"!=M(T,"i")}))))){for(var R=function(e,t){var n,r,i,a,u,c,d=this instanceof R,p=l(e),v=void 0===t,y=[],x=e;if(!d&&p&&v&&e.constructor===R)return e;if((p||e instanceof R)&&(e=e.source,v&&(t="flags"in x?x.flags:f.call(x))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),x=e,b&&"dotAll"in T&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,L&&"sticky"in T&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),_&&(a=function(e){for(var t,n=e.length,r=0,i="",a=[],o={},s=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:E.test(e.slice(r+1))&&(r+=2,u=!0),i+=t,c++;continue;case">"===t&&u:if(""===l||m(o,l))throw new SyntaxError("Invalid capture group name");o[l]=!0,a.push([l,c]),u=!1,l="";continue}u?l+=t:i+=t}return[i,a]}(e),e=a[0],y=a[1]),u=o(M(e,t),d?this:S,R),(r||i||y.length)&&(c=g(u),r&&(c.dotAll=!0,c.raw=R(function(e){for(var t,n=e.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i}(e),n)),i&&(c.sticky=!0),y.length&&(c.groups=y)),e!==x)try{s(u,"source",""===x?"(?:)":x)}catch(e){}return u},C=function(e){e in R||u(R,e,{configurable:!0,get:function(){return M[e]},set:function(t){M[e]=t}})},P=c(M),O=0;P.length>O;)C(P[O++]);S.constructor=R,R.prototype=S,p(i,"RegExp",R)}y("RegExp")},6734:function(e,t,n){var r=n(2179),i=n(6886),a=n(1662).f,o=n(715).get,s=RegExp.prototype;r&&i&&a(s,"dotAll",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!o(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},6579:function(e,t,n){"use strict";var r=n(5743),i=n(4410);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},44:function(e,t,n){var r=n(2179),i=n(1662),a=n(10),o=n(2513);r&&o((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&i.f(RegExp.prototype,"flags",{configurable:!0,get:a})},8856:function(e,t,n){var r=n(2179),i=n(177).UNSUPPORTED_Y,a=n(1662).f,o=n(715).get,s=RegExp.prototype;r&&i&&a(s,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},8173:function(e,t,n){"use strict";n(6579);var r,i,a=n(5743),o=n(4390),s=n(7575),u=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),c=/./.test;a({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!o(t))return c.call(this,e);var n=t.call(this,e);if(null!==n&&!s(n))throw new Error("RegExp exec method returned something other than an Object or null");return!!n}})},8374:function(e,t,n){"use strict";var r=n(360).PROPER,i=n(1609),a=n(8),o=n(8045),s=n(2513),u=n(10),c="toString",l=RegExp.prototype,h=l.toString,f=s((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),d=r&&h.name!=c;(f||d)&&i(RegExp.prototype,c,(function(){var e=a(this),t=o(e.source),n=e.flags;return"/"+t+"/"+o(void 0===n&&e instanceof RegExp&&!("flags"in l)?u.call(e):n)}),{unsafe:!0})},3076:function(e,t,n){"use strict";var r=n(6021),i=n(1359);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6510:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("anchor")},{anchor:function(e){return i(this,"a","name",e)}})},6220:function(e,t,n){"use strict";var r=n(5743),i=n(1181),a=n(8889),o=n(8045);r({target:"String",proto:!0,forced:n(2513)((function(){return"\ud842"!=="𠮷".at(0)}))},{at:function(e){var t=o(i(this)),n=t.length,r=a(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t.charAt(s)}})},4693:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("big")},{big:function(){return i(this,"big","","")}})},326:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("blink")},{blink:function(){return i(this,"blink","","")}})},7704:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("bold")},{bold:function(){return i(this,"b","","")}})},219:function(e,t,n){"use strict";var r=n(5743),i=n(4365).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},8994:function(e,t,n){"use strict";var r,i=n(5743),a=n(9525).f,o=n(4384),s=n(8045),u=n(3106),c=n(1181),l=n(3497),h=n(5386),f="".endsWith,d=Math.min,p=l("endsWith");i({target:"String",proto:!0,forced:!(!h&&!p&&(r=a(String.prototype,"endsWith"),r&&!r.writable)||p)},{endsWith:function(e){var t=s(c(this));u(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:d(o(n),r),a=s(e);return f?f.call(t,a,i):t.slice(i-a.length,i)===a}})},9306:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("fixed")},{fixed:function(){return i(this,"tt","","")}})},197:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("fontcolor")},{fontcolor:function(e){return i(this,"font","color",e)}})},6569:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("fontsize")},{fontsize:function(e){return i(this,"font","size",e)}})},8539:function(e,t,n){var r=n(5743),i=n(7842),a=String.fromCharCode,o=String.fromCodePoint;r({target:"String",stat:!0,forced:!!o&&1!=o.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},2579:function(e,t,n){"use strict";var r=n(5743),i=n(3106),a=n(1181),o=n(8045);r({target:"String",proto:!0,forced:!n(3497)("includes")},{includes:function(e){return!!~o(a(this)).indexOf(o(i(e)),arguments.length>1?arguments[1]:void 0)}})},4720:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("italics")},{italics:function(){return i(this,"i","","")}})},4783:function(e,t,n){"use strict";var r=n(4365).charAt,i=n(8045),a=n(715),o=n(6305),s="String Iterator",u=a.set,c=a.getterFor(s);o(String,"String",(function(e){u(this,{type:s,string:i(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},9943:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("link")},{link:function(e){return i(this,"a","href",e)}})},5373:function(e,t,n){"use strict";var r=n(5743),i=n(7776),a=n(1181),o=n(4384),s=n(8045),u=n(8),c=n(8369),l=n(6951),h=n(10),f=n(4812),d=n(1609),p=n(2513),v=n(3277),m=n(4423),g=n(1311),y=n(891),x=n(715),b=n(5386),_=v("matchAll"),w="RegExp String Iterator",M=x.set,S=x.getterFor(w),E=RegExp.prototype,T="".matchAll,A=!!T&&!p((function(){"a".matchAll(/./)})),k=i((function(e,t,n,r){M(this,{type:w,regexp:e,string:t,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var e=S(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=y(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""===s(r[0])&&(t.lastIndex=g(n,o(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),L=function(e){var t,n,r,i,a,c,l=u(this),f=s(e);return t=m(l,RegExp),void 0===(n=l.flags)&&l instanceof RegExp&&!("flags"in E)&&(n=h.call(l)),r=void 0===n?"":s(n),i=new t(t===RegExp?l.source:l,r),a=!!~r.indexOf("g"),c=!!~r.indexOf("u"),i.lastIndex=o(l.lastIndex),new k(i,f,a,c)};r({target:"String",proto:!0,forced:A},{matchAll:function(e){var t,n,r,i=a(this);if(null!=e){if(l(e)&&!~s(a("flags"in E?e.flags:h.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(A)return T.apply(i,arguments);if(void 0===(n=f(e,_))&&b&&"RegExp"==c(e)&&(n=L),n)return n.call(e,i)}else if(A)return T.apply(i,arguments);return t=s(i),r=new RegExp(e,"g"),b?L.call(r,t):r[_](t)}}),b||_ in E||d(E,_,L)},3474:function(e,t,n){"use strict";var r=n(5949),i=n(8),a=n(4384),o=n(8045),s=n(1181),u=n(4812),c=n(1311),l=n(891);r("match",(function(e,t,n){return[function(t){var n=s(this),r=null==t?void 0:u(t,e);return r?r.call(t,n):new RegExp(t)[e](o(n))},function(e){var r=i(this),s=o(e),u=n(t,r,s);if(u.done)return u.value;if(!r.global)return l(r,s);var h=r.unicode;r.lastIndex=0;for(var f,d=[],p=0;null!==(f=l(r,s));){var v=o(f[0]);d[p]=v,""===v&&(r.lastIndex=c(s,a(r.lastIndex),h)),p++}return 0===p?null:d}]}))},1494:function(e,t,n){"use strict";var r=n(5743),i=n(5720).end;r({target:"String",proto:!0,forced:n(1584)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},4620:function(e,t,n){"use strict";var r=n(5743),i=n(5720).start;r({target:"String",proto:!0,forced:n(1584)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},4995:function(e,t,n){var r=n(5743),i=n(7723),a=n(9900),o=n(8045),s=n(3865),u=Array.prototype,c=u.push,l=u.join;r({target:"String",stat:!0},{raw:function(e){for(var t=i(a(e).raw),n=s(t),r=arguments.length,u=[],h=0;n>h;){if(c.call(u,o(t[h++])),h===n)return l.call(u,"");h<r&&c.call(u,o(arguments[h]))}}})},2683:function(e,t,n){n(5743)({target:"String",proto:!0},{repeat:n(7861)})},8791:function(e,t,n){"use strict";var r=n(5743),i=n(1181),a=n(4390),o=n(6951),s=n(8045),u=n(4812),c=n(10),l=n(9179),h=n(3277),f=n(5386),d=h("replace"),p=RegExp.prototype,v=Math.max,m=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,h,g,y,x,b,_,w=i(this),M=0,S=0,E="";if(null!=e){if((n=o(e))&&!~s(i("flags"in p?e.flags:c.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(r=u(e,d))return r.call(e,w,t);if(f&&n)return s(w).replace(e,t)}for(h=s(w),g=s(e),(y=a(t))||(t=s(t)),x=g.length,b=v(1,x),M=m(h,g,0);-1!==M;)_=y?s(t(g,M,h)):l(g,h,M,[],void 0,t),E+=h.slice(S,M)+_,S=M+x,M=m(h,g,M+b);return S<h.length&&(E+=h.slice(S)),E}})},5151:function(e,t,n){"use strict";var r=n(5949),i=n(2513),a=n(8),o=n(4390),s=n(8889),u=n(4384),c=n(8045),l=n(1181),h=n(1311),f=n(4812),d=n(9179),p=n(891),v=n(3277)("replace"),m=Math.max,g=Math.min,y="$0"==="a".replace(/./,"$0"),x=!!/./[v]&&""===/./[v]("a","$0");r("replace",(function(e,t,n){var r=x?"$":"$0";return[function(e,n){var r=l(this),i=null==e?void 0:f(e,v);return i?i.call(e,r,n):t.call(c(r),e,n)},function(e,i){var l=a(this),f=c(e);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var v=n(t,l,f,i);if(v.done)return v.value}var y=o(i);y||(i=c(i));var x=l.global;if(x){var b=l.unicode;l.lastIndex=0}for(var _=[];;){var w=p(l,f);if(null===w)break;if(_.push(w),!x)break;""===c(w[0])&&(l.lastIndex=h(f,u(l.lastIndex),b))}for(var M,S="",E=0,T=0;T<_.length;T++){w=_[T];for(var A=c(w[0]),k=m(g(s(w.index),f.length),0),L=[],R=1;R<w.length;R++)L.push(void 0===(M=w[R])?M:String(M));var C=w.groups;if(y){var P=[A].concat(L,k,f);void 0!==C&&P.push(C);var O=c(i.apply(void 0,P))}else O=d(A,f,k,L,C,i);k>=E&&(S+=f.slice(E,k)+O,E=k+A.length)}return S+f.slice(E)}]}),!!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!y||x)},2884:function(e,t,n){"use strict";var r=n(5949),i=n(8),a=n(1181),o=n(3514),s=n(8045),u=n(4812),c=n(891);r("search",(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:u(t,e);return r?r.call(t,n):new RegExp(t)[e](s(n))},function(e){var r=i(this),a=s(e),u=n(t,r,a);if(u.done)return u.value;var l=r.lastIndex;o(l,0)||(r.lastIndex=0);var h=c(r,a);return o(r.lastIndex,l)||(r.lastIndex=l),null===h?-1:h.index}]}))},7397:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("small")},{small:function(){return i(this,"small","","")}})},8771:function(e,t,n){"use strict";var r=n(5949),i=n(6951),a=n(8),o=n(1181),s=n(4423),u=n(1311),c=n(4384),l=n(8045),h=n(4812),f=n(891),d=n(4410),p=n(177),v=n(2513),m=p.UNSUPPORTED_Y,g=[].push,y=Math.min,x=4294967295,b=!v((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=l(o(this)),a=void 0===n?x:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,a);for(var s,u,c,h=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,f+"g");(s=d.call(v,r))&&!((u=v.lastIndex)>p&&(h.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&g.apply(h,s.slice(1)),c=s[0].length,p=u,h.length>=a));)v.lastIndex===s.index&&v.lastIndex++;return p===r.length?!c&&v.test("")||h.push(""):h.push(r.slice(p)),h.length>a?h.slice(0,a):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=null==t?void 0:h(t,e);return a?a.call(t,i,n):r.call(l(i),t,n)},function(e,i){var o=a(this),h=l(e),d=n(r,o,h,i,r!==t);if(d.done)return d.value;var p=s(o,RegExp),v=o.unicode,g=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(m?"g":"y"),b=new p(m?"^(?:"+o.source+")":o,g),_=void 0===i?x:i>>>0;if(0===_)return[];if(0===h.length)return null===f(b,h)?[h]:[];for(var w=0,M=0,S=[];M<h.length;){b.lastIndex=m?0:M;var E,T=f(b,m?h.slice(M):h);if(null===T||(E=y(c(b.lastIndex+(m?M:0)),h.length))===w)M=u(h,M,v);else{if(S.push(h.slice(w,M)),S.length===_)return S;for(var A=1;A<=T.length-1;A++)if(S.push(T[A]),S.length===_)return S;M=w=E}}return S.push(h.slice(w)),S}]}),!b,m)},223:function(e,t,n){"use strict";var r,i=n(5743),a=n(9525).f,o=n(4384),s=n(8045),u=n(3106),c=n(1181),l=n(3497),h=n(5386),f="".startsWith,d=Math.min,p=l("startsWith");i({target:"String",proto:!0,forced:!(!h&&!p&&(r=a(String.prototype,"startsWith"),r&&!r.writable)||p)},{startsWith:function(e){var t=s(c(this));u(e);var n=o(d(arguments.length>1?arguments[1]:void 0,t.length)),r=s(e);return f?f.call(t,r,n):t.slice(n,n+r.length)===r}})},6529:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("strike")},{strike:function(){return i(this,"strike","","")}})},4010:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("sub")},{sub:function(){return i(this,"sub","","")}})},5974:function(e,t,n){"use strict";var r=n(5743),i=n(1181),a=n(8889),o=n(8045),s="".slice,u=Math.max,c=Math.min;r({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var n,r,l=o(i(this)),h=l.length,f=a(e);return f===1/0&&(f=0),f<0&&(f=u(h+f,0)),(n=void 0===t?h:a(t))<=0||n===1/0||f>=(r=c(f+n,h))?"":s.call(l,f,r)}})},3585:function(e,t,n){"use strict";var r=n(5743),i=n(4697);r({target:"String",proto:!0,forced:n(4220)("sup")},{sup:function(){return i(this,"sup","","")}})},1308:function(e,t,n){"use strict";var r=n(5743),i=n(6356).end,a=n(4667)("trimEnd"),o=a?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,name:"trimEnd",forced:a},{trimEnd:o,trimRight:o})},9246:function(e,t,n){"use strict";var r=n(5743),i=n(6356).start,a=n(4667)("trimStart"),o=a?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,name:"trimStart",forced:a},{trimStart:o,trimLeft:o})},1145:function(e,t,n){"use strict";var r=n(5743),i=n(6356).trim;r({target:"String",proto:!0,forced:n(4667)("trim")},{trim:function(){return i(this)}})},4864:function(e,t,n){n(8113)("asyncIterator")},8117:function(e,t,n){"use strict";var r=n(5743),i=n(2179),a=n(8043),o=n(9145),s=n(4390),u=n(7575),c=n(1662).f,l=n(6057),h=a.Symbol;if(i&&s(h)&&(!("description"in h.prototype)||void 0!==h().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new h(e):void 0===e?h():h(e);return""===e&&(f[t]=!0),t};l(d,h);var p=d.prototype=h.prototype;p.constructor=d;var v=p.toString,m="Symbol(test)"==String(h("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=v.call(e);if(o(f,e))return"";var n=m?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},2128:function(e,t,n){n(8113)("hasInstance")},2045:function(e,t,n){n(8113)("isConcatSpreadable")},7131:function(e,t,n){n(8113)("iterator")},8624:function(e,t,n){"use strict";var r=n(5743),i=n(8043),a=n(6900),o=n(5386),s=n(2179),u=n(3028),c=n(2513),l=n(9145),h=n(8586),f=n(4390),d=n(7575),p=n(8306),v=n(8),m=n(9900),g=n(7723),y=n(2413),x=n(8045),b=n(3795),_=n(770),w=n(172),M=n(7516),S=n(5298),E=n(6547),T=n(9525),A=n(1662),k=n(8784),L=n(1609),R=n(435),C=n(3129),P=n(9987),O=n(7152),I=n(3277),N=n(6200),D=n(8113),F=n(1104),z=n(715),U=n(2218).forEach,B=C("hidden"),H="Symbol",j=I("toPrimitive"),G=z.set,V=z.getterFor(H),W=Object.prototype,q=i.Symbol,$=a("JSON","stringify"),X=T.f,Y=A.f,Z=S.f,J=k.f,K=R("symbols"),Q=R("op-symbols"),ee=R("string-to-symbol-registry"),te=R("symbol-to-string-registry"),ne=R("wks"),re=i.QObject,ie=!re||!re.prototype||!re.prototype.findChild,ae=s&&c((function(){return 7!=_(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=X(W,t);r&&delete W[t],Y(e,t,n),r&&e!==W&&Y(W,t,r)}:Y,oe=function(e,t){var n=K[e]=_(q.prototype);return G(n,{type:H,tag:e,description:t}),s||(n.description=t),n},se=function(e,t,n){e===W&&se(Q,t,n),v(e);var r=y(t);return v(n),l(K,r)?(n.enumerable?(l(e,B)&&e[B][r]&&(e[B][r]=!1),n=_(n,{enumerable:b(0,!1)})):(l(e,B)||Y(e,B,b(1,{})),e[B][r]=!0),ae(e,r,n)):Y(e,r,n)},ue=function(e,t){v(e);var n=g(t),r=w(n).concat(fe(n));return U(r,(function(t){s&&!ce.call(n,t)||se(e,t,n[t])})),e},ce=function(e){var t=y(e),n=J.call(this,t);return!(this===W&&l(K,t)&&!l(Q,t))&&(!(n||!l(this,t)||!l(K,t)||l(this,B)&&this[B][t])||n)},le=function(e,t){var n=g(e),r=y(t);if(n!==W||!l(K,r)||l(Q,r)){var i=X(n,r);return!i||!l(K,r)||l(n,B)&&n[B][r]||(i.enumerable=!0),i}},he=function(e){var t=Z(g(e)),n=[];return U(t,(function(e){l(K,e)||l(P,e)||n.push(e)})),n},fe=function(e){var t=e===W,n=Z(t?Q:g(e)),r=[];return U(n,(function(e){!l(K,e)||t&&!l(W,e)||r.push(K[e])})),r};if(u||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,t=O(e),n=function e(n){this===W&&e.call(Q,n),l(this,B)&&l(this[B],t)&&(this[B][t]=!1),ae(this,t,b(1,n))};return s&&ie&&ae(W,t,{configurable:!0,set:n}),oe(t,e)},L(q.prototype,"toString",(function(){return V(this).tag})),L(q,"withoutSetter",(function(e){return oe(O(e),e)})),k.f=ce,A.f=se,T.f=le,M.f=S.f=he,E.f=fe,N.f=function(e){return oe(I(e),e)},s&&(Y(q.prototype,"description",{configurable:!0,get:function(){return V(this).description}}),o||L(W,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),U(w(ne),(function(e){D(e)})),r({target:H,stat:!0,forced:!u},{for:function(e){var t=x(e);if(l(ee,t))return ee[t];var n=q(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!p(e))throw TypeError(e+" is not a symbol");if(l(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?_(e):ue(_(e),t)},defineProperty:se,defineProperties:ue,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:he,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:c((function(){E.f(1)}))},{getOwnPropertySymbols:function(e){return E.f(m(e))}}),$&&r({target:"JSON",stat:!0,forced:!u||c((function(){var e=q();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(r=t,(d(t)||void 0!==e)&&!p(e))return h(t)||(t=function(e,t){if(f(r)&&(t=r.call(this,e,t)),!p(t))return t}),i[1]=t,$.apply(null,i)}}),!q.prototype[j]){var de=q.prototype.valueOf;L(q.prototype,j,(function(){return de.apply(this,arguments)}))}F(q,H),P[B]=!0},8808:function(e,t,n){n(8113)("matchAll")},2142:function(e,t,n){n(8113)("match")},8089:function(e,t,n){n(8113)("replace")},3282:function(e,t,n){n(8113)("search")},6822:function(e,t,n){n(8113)("species")},2631:function(e,t,n){n(8113)("split")},2832:function(e,t,n){n(8113)("toPrimitive")},4221:function(e,t,n){n(8113)("toStringTag")},1302:function(e,t,n){n(8113)("unscopables")},3275:function(e,t,n){"use strict";var r=n(1610),i=n(3865),a=n(8889),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(e){var t=o(this),n=i(t),r=a(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}))},3195:function(e,t,n){"use strict";var r=n(1610),i=n(304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},9378:function(e,t,n){"use strict";var r=n(1610),i=n(2218).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},8441:function(e,t,n){"use strict";var r=n(1610),i=n(3241),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(a(this),arguments)}))},9509:function(e,t,n){"use strict";var r=n(1610),i=n(2218).filter,a=n(7365),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:void 0);return a(this,t)}))},6698:function(e,t,n){"use strict";var r=n(1610),i=n(2218).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},1249:function(e,t,n){"use strict";var r=n(1610),i=n(2218).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},8641:function(e,t,n){n(8692)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},8767:function(e,t,n){n(8692)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6944:function(e,t,n){"use strict";var r=n(1610),i=n(2218).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},5473:function(e,t,n){"use strict";var r=n(3289);(0,n(1610).exportTypedArrayStaticMethod)("from",n(1827),r)},9573:function(e,t,n){"use strict";var r=n(1610),i=n(5500).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},5891:function(e,t,n){"use strict";var r=n(1610),i=n(5500).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},6958:function(e,t,n){n(8692)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},5041:function(e,t,n){n(8692)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9395:function(e,t,n){n(8692)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},7827:function(e,t,n){"use strict";var r=n(8043),i=n(360).PROPER,a=n(1610),o=n(2578),s=n(3277)("iterator"),u=r.Uint8Array,c=o.values,l=o.keys,h=o.entries,f=a.aTypedArray,d=a.exportTypedArrayMethod,p=u&&u.prototype[s],v=!!p&&"values"===p.name,m=function(){return c.call(f(this))};d("entries",(function(){return h.call(f(this))})),d("keys",(function(){return l.call(f(this))})),d("values",m,i&&!v),d(s,m,i&&!v)},3205:function(e,t,n){"use strict";var r=n(1610),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].join;a("join",(function(e){return o.apply(i(this),arguments)}))},1368:function(e,t,n){"use strict";var r=n(1610),i=n(2226),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(a(this),arguments)}))},8754:function(e,t,n){"use strict";var r=n(1610),i=n(2218).map,a=n(750),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(e))(t)}))}))},4340:function(e,t,n){"use strict";var r=n(1610),i=n(3289),a=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(a(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},7279:function(e,t,n){"use strict";var r=n(1610),i=n(4533).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2590:function(e,t,n){"use strict";var r=n(1610),i=n(4533).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},4385:function(e,t,n){"use strict";var r=n(1610),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var e,t=this,n=i(t).length,r=o(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}))},4165:function(e,t,n){"use strict";var r=n(1610),i=n(3865),a=n(9668),o=n(9900),s=n(2513),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){u(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=o(e),s=i(r),c=0;if(s+t>n)throw RangeError("Wrong length");for(;c<s;)this[t+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},0:function(e,t,n){"use strict";var r=n(1610),i=n(750),a=n(2513),o=r.aTypedArray,s=r.exportTypedArrayMethod,u=[].slice;s("slice",(function(e,t){for(var n=u.call(o(this),e,t),r=i(this),a=0,s=n.length,c=new r(s);s>a;)c[a]=n[a++];return c}),a((function(){new Int8Array(1).slice()})))},6778:function(e,t,n){"use strict";var r=n(1610),i=n(2218).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},9522:function(e,t,n){"use strict";var r=n(1610),i=n(8043),a=n(2513),o=n(2844),s=n(3865),u=n(7802),c=n(1331),l=n(5430),h=n(5009),f=n(3741),d=r.aTypedArray,p=r.exportTypedArrayMethod,v=i.Uint16Array,m=v&&v.prototype.sort,g=!!m&&!a((function(){var e=new v(2);e.sort(null),e.sort({})})),y=!!m&&!a((function(){if(h)return h<74;if(c)return c<67;if(l)return!0;if(f)return f<602;var e,t,n=new v(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));p("sort",(function(e){var t=this;if(void 0!==e&&o(e),y)return m.call(t,e);d(t);var n,r=s(t),i=Array(r);for(n=0;n<r;n++)i[n]=t[n];for(i=u(t,function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e)),n=0;n<r;n++)t[n]=i[n];return t}),!y||g)},7162:function(e,t,n){"use strict";var r=n(1610),i=n(4384),a=n(7842),o=n(750),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,u=a(e,r);return new(o(n))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===t?r:a(t,r))-u))}))},5372:function(e,t,n){"use strict";var r=n(8043),i=n(1610),a=n(2513),o=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,h=!!o&&a((function(){c.call(new o(1))}));u("toLocaleString",(function(){return c.apply(h?l.call(s(this)):s(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!a((function(){o.prototype.toLocaleString.call([1,2])})))},3859:function(e,t,n){"use strict";var r=n(1610).exportTypedArrayMethod,i=n(2513),a=n(8043).Uint8Array,o=a&&a.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=o.toString!=s;r("toString",s,c)},4834:function(e,t,n){n(8692)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9315:function(e,t,n){n(8692)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9193:function(e,t,n){n(8692)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},3937:function(e,t,n){n(8692)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},3697:function(e,t,n){"use strict";var r=n(5743),i=n(8045),a=String.fromCharCode,o=/^[\da-f]{2}$/i,s=/^[\da-f]{4}$/i;r({global:!0},{unescape:function(e){for(var t,n,r=i(e),u="",c=r.length,l=0;l<c;){if("%"===(t=r.charAt(l++)))if("u"===r.charAt(l)){if(n=r.slice(l+1,l+5),s.test(n)){u+=a(parseInt(n,16)),l+=5;continue}}else if(n=r.slice(l,l+2),o.test(n)){u+=a(parseInt(n,16)),l+=2;continue}u+=t}return u}})},404:function(e,t,n){"use strict";var r,i=n(8043),a=n(318),o=n(5459),s=n(6021),u=n(2244),c=n(7575),l=n(715).enforce,h=n(115),f=!i.ActiveXObject&&"ActiveXObject"in i,d=Object.isExtensible,p=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=s("WeakMap",p,u);if(h&&f){r=u.getConstructor(p,"WeakMap",!0),o.enable();var m=v.prototype,g=m.delete,y=m.has,x=m.get,b=m.set;a(m,{delete:function(e){if(c(e)&&!d(e)){var t=l(this);return t.frozen||(t.frozen=new r),g.call(this,e)||t.frozen.delete(e)}return g.call(this,e)},has:function(e){if(c(e)&&!d(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)||t.frozen.has(e)}return y.call(this,e)},get:function(e){if(c(e)&&!d(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)?x.call(this,e):t.frozen.get(e)}return x.call(this,e)},set:function(e,t){if(c(e)&&!d(e)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,e)?b.call(this,e,t):n.frozen.set(e,t)}else b.call(this,e,t);return this}})}},5048:function(e,t,n){"use strict";n(6021)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(2244))},4328:function(e,t,n){var r=n(8043),i=n(3111),a=n(4228),o=n(4113),s=n(1697),u=function(e){if(e&&e.forEach!==o)try{s(e,"forEach",o)}catch(t){e.forEach=o}};for(var c in i)i[c]&&u(r[c]&&r[c].prototype);u(a)},1127:function(e,t,n){var r=n(8043),i=n(3111),a=n(4228),o=n(2578),s=n(1697),u=n(3277),c=u("iterator"),l=u("toStringTag"),h=o.values,f=function(e,t){if(e){if(e[c]!==h)try{s(e,c,h)}catch(t){e[c]=h}if(e[l]||s(e,l,t),i[t])for(var n in o)if(e[n]!==o[n])try{s(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var d in i)f(r[d]&&r[d].prototype,d);f(a,"DOMTokenList")},5453:function(e,t,n){var r=n(5743),i=n(8043),a=n(6866);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:a.set,clearImmediate:a.clear})},3784:function(e,t,n){var r=n(5743),i=n(8043),a=n(4403),o=n(5989),s=i.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=o&&s.domain;a(t?t.bind(e):e)}})},6587:function(e,t,n){var r=n(5743),i=n(8043),a=n(4390),o=n(5980),s=[].slice,u=function(e){return function(t,n){var r=arguments.length>2,i=r?s.call(arguments,2):void 0;return e(r?function(){(a(t)?t:Function(t)).apply(this,i)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},1980:function(e,t,n){"use strict";n(2578);var r=n(5743),i=n(6900),a=n(4194),o=n(1609),s=n(318),u=n(1104),c=n(7776),l=n(715),h=n(59),f=n(4390),d=n(9145),p=n(8882),v=n(6217),m=n(8),g=n(7575),y=n(8045),x=n(770),b=n(3795),_=n(7055),w=n(4560),M=n(3277),S=i("fetch"),E=i("Request"),T=E&&E.prototype,A=i("Headers"),k=M("iterator"),L="URLSearchParams",R="URLSearchParamsIterator",C=l.set,P=l.getterFor(L),O=l.getterFor(R),I=/\+/g,N=Array(4),D=function(e){return N[e-1]||(N[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},F=function(e){try{return decodeURIComponent(e)}catch(t){return e}},z=function(e){var t=e.replace(I," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(D(n--),F);return t}},U=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},H=function(e){return B[e]},j=function(e){return encodeURIComponent(e).replace(U,H)},G=function(e,t){if(t)for(var n,r,i=t.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),e.push({key:z(r.shift()),value:z(r.join("="))}))},V=function(e){this.entries.length=0,G(this.entries,e)},W=function(e,t){if(e<t)throw TypeError("Not enough arguments")},q=c((function(e,t){C(this,{type:R,iterator:_(P(e).entries),kind:t})}),"Iterator",(function(){var e=O(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),$=function(){h(this,$,L);var e,t,n,r,i,a,o,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(C(l,{type:L,entries:f,updateURL:function(){},updateSearchParams:V}),void 0!==c)if(g(c))if(e=w(c))for(n=(t=_(c,e)).next;!(r=n.call(t)).done;){if((o=(a=(i=_(m(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:y(o.value),value:y(s.value)})}else for(u in c)d(c,u)&&f.push({key:u,value:y(c[u])});else G(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:y(c))},X=$.prototype;if(s(X,{append:function(e,t){W(arguments.length,2);var n=P(this);n.entries.push({key:y(e),value:y(t)}),n.updateURL()},delete:function(e){W(arguments.length,1);for(var t=P(this),n=t.entries,r=y(e),i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){W(arguments.length,1);for(var t=P(this).entries,n=y(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){W(arguments.length,1);for(var t=P(this).entries,n=y(e),r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){W(arguments.length,1);for(var t=P(this).entries,n=y(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){W(arguments.length,1);for(var n,r=P(this),i=r.entries,a=!1,o=y(e),s=y(t),u=0;u<i.length;u++)(n=i[u]).key===o&&(a?i.splice(u--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=P(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=P(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new q(this,"keys")},values:function(){return new q(this,"values")},entries:function(){return new q(this,"entries")}},{enumerable:!0}),o(X,k,X.entries,{name:"entries"}),o(X,"toString",(function(){for(var e,t=P(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(j(e.key)+"="+j(e.value));return n.join("&")}),{enumerable:!0}),u($,L),r({global:!0,forced:!a},{URLSearchParams:$}),!a&&f(A)){var Y=function(e){if(g(e)){var t,n=e.body;if(v(n)===L)return(t=e.headers?new A(e.headers):new A).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),x(e,{body:b(0,String(n)),headers:b(0,t)})}return e};if(f(S)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return S(e,arguments.length>1?Y(arguments[1]):{})}}),f(E)){var Z=function(e){return h(this,Z,"Request"),new E(e,arguments.length>1?Y(arguments[1]):{})};T.constructor=Z,Z.prototype=T,r({global:!0,forced:!0},{Request:Z})}}e.exports={URLSearchParams:$,getState:P}},6233:function(e,t,n){"use strict";var r=n(6445);n(4783);var i,a=n(5743),o=n(2179),s=n(4194),u=n(8043),c=n(2734),l=n(1609),h=n(59),f=n(9145),d=n(8735),p=n(1499),v=n(4365).codeAt,m=n(109),g=n(8045),y=n(1104),x=n(1980),b=n(715),_=u.URL,w=x.URLSearchParams,M=x.getState,S=b.set,E=b.getterFor("URL"),T=Math.floor,A=Math.pow,k="Invalid scheme",L="Invalid host",R="Invalid port",C=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,O=/\d/,I=/^0x/i,N=/^[0-7]+$/,D=/^\d+$/,F=/^[\dA-Fa-f]+$/,z=/[\0\t\n\r #%/:<>?@[\\\]^|]/,U=/[\0\t\n\r #/:<>?@[\\\]^|]/,B=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,H=/[\t\n\r]/g,j=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return L;if(!(n=V(t.slice(1,-1))))return L;e.host=n}else if(K(e)){if(t=m(t),z.test(t))return L;if(null===(n=G(t)))return L;e.host=n}else{if(U.test(t))return L;for(n="",r=p(t),i=0;i<r.length;i++)n+=Z(r[i],q);e.host=n}},G=function(e){var t,n,r,i,a,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=I.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?D:8==a?N:F).test(i))return e;o=parseInt(i,a)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=A(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*A(256,3-r);return s},V=function(e){var t,n,r,i,a,o,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&F.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!O.test(f()))return;for(;O.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(o=c-l,c=7;0!=c&&o>0;)s=u[c],u[c--]=u[l+o-1],u[l+--o]=s;else if(8!=c)return;return u},W=function(e){var t,n,i,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=T(e/256);return t.join(".")}if("object"==r(e)){for(t="",i=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),i===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},q={},$=d({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),X=d({},$,{"#":1,"?":1,"{":1,"}":1}),Y=d({},X,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Z=function(e,t){var n=v(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},J={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return f(J,e.scheme)},Q=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var n;return 2==e.length&&C.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ne=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},re=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&te(t[0],!0)||t.pop()},ie=function(e){return"."===e||"%2e"===e.toLowerCase()},ae={},oe={},se={},ue={},ce={},le={},he={},fe={},de={},pe={},ve={},me={},ge={},ye={},xe={},be={},_e={},we={},Me={},Se={},Ee={},Te=function(e,t,n,r){var a,o,s,u,c,l=n||ae,h=0,d="",v=!1,m=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(B,"")),t=t.replace(H,""),a=p(t);h<=a.length;){switch(o=a[h],l){case ae:if(!o||!C.test(o)){if(n)return k;l=se;continue}d+=o.toLowerCase(),l=oe;break;case oe:if(o&&(P.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(n)return k;d="",l=se,h=0;continue}if(n&&(K(e)!=f(J,d)||"file"==d&&(Q(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(K(e)&&J[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=ye:K(e)&&r&&r.scheme==e.scheme?l=ue:K(e)?l=fe:"/"==a[h+1]?(l=ce,h++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Me)}break;case se:if(!r||r.cannotBeABaseURL&&"#"!=o)return k;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=Ee;break}l="file"==r.scheme?ye:le;continue;case ue:if("/"!=o||"/"!=a[h+1]){l=le;continue}l=de,h++;break;case ce:if("/"==o){l=pe;break}l=we;continue;case le:if(e.scheme=r.scheme,o==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&K(e))l=he;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",l=Se;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),l=we;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Ee}break;case he:if(!K(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=we;continue}l=pe}else l=de;break;case fe:if(l=de,"/"!=o||"/"!=d.charAt(h+1))continue;h++;break;case de:if("/"!=o&&"\\"!=o){l=pe;continue}break;case pe:if("@"==o){v&&(d="%40"+d),v=!0,s=p(d);for(var y=0;y<s.length;y++){var x=s[y];if(":"!=x||g){var b=Z(x,Y);g?e.password+=b:e.username+=b}else g=!0}d=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&K(e)){if(v&&""==d)return"Invalid authority";h-=p(d).length+1,d="",l=ve}else d+=o;break;case ve:case me:if(n&&"file"==e.scheme){l=be;continue}if(":"!=o||m){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&K(e)){if(K(e)&&""==d)return L;if(n&&""==d&&(Q(e)||null!==e.port))return;if(u=j(e,d))return u;if(d="",l=_e,n)return;continue}"["==o?m=!0:"]"==o&&(m=!1),d+=o}else{if(""==d)return L;if(u=j(e,d))return u;if(d="",l=ge,n==me)return}break;case ge:if(!O.test(o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&K(e)||n){if(""!=d){var _=parseInt(d,10);if(_>65535)return R;e.port=K(e)&&_===J[e.scheme]?null:_,d=""}if(n)return;l=_e;continue}return R}d+=o;break;case ye:if(e.scheme="file","/"==o||"\\"==o)l=xe;else{if(!r||"file"!=r.scheme){l=we;continue}if(o==i)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",l=Se;else{if("#"!=o){ne(a.slice(h).join(""))||(e.host=r.host,e.path=r.path.slice(),re(e)),l=we;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Ee}}break;case xe:if("/"==o||"\\"==o){l=be;break}r&&"file"==r.scheme&&!ne(a.slice(h).join(""))&&(te(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),l=we;continue;case be:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&te(d))l=we;else if(""==d){if(e.host="",n)return;l=_e}else{if(u=j(e,d))return u;if("localhost"==e.host&&(e.host=""),n)return;d="",l=_e}continue}d+=o;break;case _e:if(K(e)){if(l=we,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=i&&(l=we,"/"!=o))continue}else e.fragment="",l=Ee;else e.query="",l=Se;break;case we:if(o==i||"/"==o||"\\"==o&&K(e)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(re(e),"/"==o||"\\"==o&&K(e)||e.path.push("")):ie(d)?"/"==o||"\\"==o&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==i||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=Se):"#"==o&&(e.fragment="",l=Ee)}else d+=Z(o,X);break;case Me:"?"==o?(e.query="",l=Se):"#"==o?(e.fragment="",l=Ee):o!=i&&(e.path[0]+=Z(o,q));break;case Se:n||"#"!=o?o!=i&&("'"==o&&K(e)?e.query+="%27":e.query+="#"==o?"%23":Z(o,q)):(e.fragment="",l=Ee);break;case Ee:o!=i&&(e.fragment+=Z(o,$))}h++}},Ae=function(e){var t,n,r=h(this,Ae,"URL"),i=arguments.length>1?arguments[1]:void 0,a=g(e),s=S(r,{type:"URL"});if(void 0!==i)if(i instanceof Ae)t=E(i);else if(n=Te(t={},g(i)))throw TypeError(n);if(n=Te(s,a,null,t))throw TypeError(n);var u=s.searchParams=new w,c=M(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Le.call(r),r.origin=Re.call(r),r.protocol=Ce.call(r),r.username=Pe.call(r),r.password=Oe.call(r),r.host=Ie.call(r),r.hostname=Ne.call(r),r.port=De.call(r),r.pathname=Fe.call(r),r.search=ze.call(r),r.searchParams=Ue.call(r),r.hash=Be.call(r))},ke=Ae.prototype,Le=function(){var e=E(this),t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",Q(e)&&(c+=n+(r?":"+r:"")+"@"),c+=W(i),null!==a&&(c+=":"+a)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Re=function(){var e=E(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Ae(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&K(e)?t+"://"+W(e.host)+(null!==n?":"+n:""):"null"},Ce=function(){return E(this).scheme+":"},Pe=function(){return E(this).username},Oe=function(){return E(this).password},Ie=function(){var e=E(this),t=e.host,n=e.port;return null===t?"":null===n?W(t):W(t)+":"+n},Ne=function(){var e=E(this).host;return null===e?"":W(e)},De=function(){var e=E(this).port;return null===e?"":String(e)},Fe=function(){var e=E(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ze=function(){var e=E(this).query;return e?"?"+e:""},Ue=function(){return E(this).searchParams},Be=function(){var e=E(this).fragment;return e?"#"+e:""},He=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&c(ke,{href:He(Le,(function(e){var t=E(this),n=g(e),r=Te(t,n);if(r)throw TypeError(r);M(t.searchParams).updateSearchParams(t.query)})),origin:He(Re),protocol:He(Ce,(function(e){var t=E(this);Te(t,g(e)+":",ae)})),username:He(Pe,(function(e){var t=E(this),n=p(g(e));if(!ee(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Z(n[r],Y)}})),password:He(Oe,(function(e){var t=E(this),n=p(g(e));if(!ee(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Z(n[r],Y)}})),host:He(Ie,(function(e){var t=E(this);t.cannotBeABaseURL||Te(t,g(e),ve)})),hostname:He(Ne,(function(e){var t=E(this);t.cannotBeABaseURL||Te(t,g(e),me)})),port:He(De,(function(e){var t=E(this);ee(t)||(""==(e=g(e))?t.port=null:Te(t,e,ge))})),pathname:He(Fe,(function(e){var t=E(this);t.cannotBeABaseURL||(t.path=[],Te(t,g(e),_e))})),search:He(ze,(function(e){var t=E(this);""==(e=g(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Te(t,e,Se)),M(t.searchParams).updateSearchParams(t.query)})),searchParams:He(Ue),hash:He(Be,(function(e){var t=E(this);""!=(e=g(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Te(t,e,Ee)):t.fragment=null}))}),l(ke,"toJSON",(function(){return Le.call(this)}),{enumerable:!0}),l(ke,"toString",(function(){return Le.call(this)}),{enumerable:!0}),_){var je=_.createObjectURL,Ge=_.revokeObjectURL;je&&l(Ae,"createObjectURL",(function(e){return je.apply(_,arguments)})),Ge&&l(Ae,"revokeObjectURL",(function(e){return Ge.apply(_,arguments)}))}y(Ae,"URL"),a({global:!0,forced:!s,sham:!o},{URL:Ae})},9742:function(e,t,n){"use strict";n(5743)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},1206:function(e,t,n){n(8624),n(8117),n(4864),n(2128),n(2045),n(7131),n(2142),n(8808),n(8089),n(3282),n(6822),n(2631),n(2832),n(4221),n(1302),n(6984),n(3037),n(6894),n(2582),n(2821),n(3307),n(1446),n(9676),n(1235),n(9119),n(8074),n(474),n(359),n(3646),n(3994),n(9530),n(2578),n(8405),n(1708),n(9849),n(341),n(5127),n(3374),n(3519),n(4760),n(4526),n(9783),n(8923),n(7139),n(7850),n(5588),n(5287),n(2086),n(735),n(8914),n(7467),n(6912),n(806),n(2881),n(4198),n(9104),n(2186),n(492),n(9702),n(5567),n(7642),n(9434),n(4101),n(7102),n(8056),n(6429),n(2138),n(8322),n(1492),n(4080),n(9885),n(570),n(8975),n(2728),n(5483),n(5601),n(6366),n(5936),n(6442),n(1478),n(3192),n(5783),n(3507),n(2018),n(2537),n(298),n(3572),n(561),n(6920),n(6177),n(2940),n(7970),n(2692),n(8977),n(4037),n(3599),n(38),n(3445),n(9830),n(8652),n(9998),n(458),n(9497),n(9245),n(5837),n(5613),n(4420),n(6804),n(6389),n(9466),n(6387),n(3770),n(7849),n(3711),n(2219),n(368),n(2799),n(5251),n(5028),n(2438),n(6526),n(8427),n(7359),n(4729),n(6898),n(3633),n(9392),n(7071),n(6361),n(6123),n(6418),n(623),n(4907),n(52),n(6015),n(4582),n(6658),n(6280),n(3961),n(1280),n(2279),n(1842),n(4039),n(6734),n(6579),n(44),n(8856),n(8173),n(8374),n(3076),n(6220),n(219),n(8994),n(8539),n(2579),n(4783),n(3474),n(5373),n(1494),n(4620),n(4995),n(2683),n(5151),n(8791),n(2884),n(8771),n(223),n(5974),n(1145),n(1308),n(9246),n(6510),n(4693),n(326),n(7704),n(9306),n(197),n(6569),n(4720),n(9943),n(7397),n(6529),n(4010),n(3585),n(8641),n(8767),n(9395),n(6958),n(5041),n(9193),n(3937),n(4834),n(9315),n(3275),n(3195),n(9378),n(8441),n(9509),n(1249),n(6698),n(6944),n(5473),n(9573),n(5891),n(7827),n(3205),n(1368),n(8754),n(4340),n(2590),n(7279),n(4385),n(4165),n(0),n(6778),n(9522),n(7162),n(5372),n(3859),n(3697),n(404),n(5048),n(4328),n(1127),n(5453),n(3784),n(6587),n(6233),n(9742),n(1980),n(7751)},5210:function(e,t,n){var r=n(3322),i=n(6941),a=n(7887),o=n(3121).Z,s=a.featureEach,u=(a.coordEach,i.polygon,i.featureCollection);function c(e){var t=new r(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:o(e),r.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:o(e),t.push(e)})):s(e,(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:o(e),t.push(e)})),r.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:o(e),r.prototype.remove.call(this,e,t)},t.clear=function(){return r.prototype.clear.call(this)},t.search=function(e){var t=r.prototype.search.call(this,this.toBBox(e));return u(t)},t.collides=function(e){return r.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=r.prototype.all.call(this);return u(e)},t.toJSON=function(){return r.prototype.toJSON.call(this)},t.fromJSON=function(e){return r.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=o(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=o(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}e.exports=c,e.exports.default=c},3322:function(e,t,n){var r,i,a;a=function(){"use strict";function e(e,r,i,a,o){!function e(n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-u*l/s+h)),Math.min(a,Math.floor(r+(s-u)*l/s+h)),o)}var f=n[r],d=i,p=a;for(t(n,i,r),o(n[a],f)>0&&t(n,i,a);d<p;){for(t(n,d,p),d++,p--;o(n[d],f)<0;)d++;for(;o(n[p],f)>0;)p--}0===o(n[i],f)?t(n,i,p):t(n,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}(e,r,i||0,a||e.length-1,o||n)}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}var r=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function a(e,t){o(e,0,e.children.length,t,e)}function o(e,t,n,r,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=t;a<n;a++){var o=e.children[a];s(i,e.leaf?r(o):o)}return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function l(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function d(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function p(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,a),o.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(e){var t=this.data,n=[];if(!d(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;d(e,s)&&(t.leaf?n.push(o):f(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n},r.prototype.collides=function(e){var t=this.data;if(!d(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(d(e,a)){if(t.leaf||f(e,a))return!0;n.push(i)}}t=n.pop()}return!1},r.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(e,t){if(!e)return this;for(var n,r,a,o=this.data,s=this.toBBox(e),u=[],c=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),o.leaf){var l=i(e,o.children,t);if(-1!==l)return o.children.splice(l,1),u.push(o),this._condense(u),this}a||o.leaf||!f(o,s)?r?(n++,o=r.children[n],a=!1):o=null:(u.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(e){return e},r.prototype.compareMinX=function(e,t){return e.minX-t.minX},r.prototype.compareMinY=function(e,t){return e.minY-t.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(e){return this.data=e,this},r.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},r.prototype._build=function(e,t,n,r){var i,o=n-t+1,s=this._maxEntries;if(o<=s)return a(i=p(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=p([])).leaf=!1,i.height=r;var u=Math.ceil(o/s),c=u*Math.ceil(Math.sqrt(s));v(e,t,n,c,this.compareMinX);for(var l=t;l<=n;l+=c){var h=Math.min(l+c-1,n);v(e,l,h,u,this.compareMinY);for(var f=l;f<=h;f+=u){var d=Math.min(f+u-1,h);i.children.push(this._build(e,f,d,r-1))}}return a(i,this.toBBox),i},r.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var u=t.children[s],c=l(u),h=(f=e,d=u,(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-c);h<a?(a=h,i=c<i?c:i,o=u):h===a&&c<i&&(i=c,o=u)}t=o||t.children[0]}var f,d;return t},r.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),s(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},r.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=p(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(e,t){this.data=p([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(e,t,n){for(var r,i,a,s,u,c,h,f=1/0,d=1/0,p=t;p<=n-t;p++){var v=o(e,0,p,this.toBBox),m=o(e,p,n,this.toBBox),g=(i=v,a=m,s=Math.max(i.minX,a.minX),u=Math.max(i.minY,a.minY),c=Math.min(i.maxX,a.maxX),h=Math.min(i.maxY,a.maxY),Math.max(0,c-s)*Math.max(0,h-u)),y=l(v)+l(m);g<f?(f=g,r=p,d=y<d?y:d):g===f&&y<d&&(d=y,r=p)}return r||n-t},r.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:u,i=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},r.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,a=o(e,0,t,i),u=o(e,n-t,n,i),c=h(a)+h(u),l=t;l<n-t;l++){var f=e.children[l];s(a,e.leaf?i(f):f),c+=h(a)}for(var d=n-t-1;d>=t;d--){var p=e.children[d];s(u,e.leaf?i(p):p),c+=h(u)}return c},r.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},r.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():a(e[t],this.toBBox)},r},"object"==n(6445)(t)?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},7450:function(e,t,n){e=n.nmd(e);var r=n(6445),i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),o=new L(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=h(e,t,n);if("normal"===u.type){if(r=n.done?v:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function g(){}function y(){}function x(){}var b={};c(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(R([])));w&&w!==n&&i.call(w,o)&&(b=w);var M=x.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=h(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return y.prototype=x,c(M,"constructor",x),c(x,"constructor",y),y.displayName=c(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,u,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}("object"===r(e)?e.exports:{});try{regeneratorRuntime=i}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},3727:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s=Object.freeze({});function u(e){return null==e}function c(e){return null!=e}function l(e){return!0===e}function h(e){return"string"==typeof e||"number"==typeof e||"symbol"===o(e)||"boolean"==typeof e}function f(e){return null!==e&&"object"===o(e)}var d=Object.prototype.toString;function p(e){return d.call(e).slice(8,-1)}function v(e){return"[object Object]"===d.call(e)}function m(e){return"[object RegExp]"===d.call(e)}function g(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function y(e){return c(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function x(e){return null==e?"":Array.isArray(e)||v(e)&&e.toString===d?JSON.stringify(e,null,2):String(e)}function b(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var w=_("slot,component",!0),M=_("key,ref,slot,slot-scope,is");function S(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var E=Object.prototype.hasOwnProperty;function T(e,t){return E.call(e,t)}function A(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var k=/-(\w)/g,L=A((function(e){return e.replace(k,(function(e,t){return t?t.toUpperCase():""}))})),R=A((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),C=/\B([A-Z])/g,P=A((function(e){return e.replace(C,"-$1").toLowerCase()})),O=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function I(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function N(e,t){for(var n in t)e[n]=t[n];return e}function D(e){for(var t={},n=0;n<e.length;n++)e[n]&&N(t,e[n]);return t}function F(e,t,n){}var z=function(e,t,n){return!1},U=function(e){return e};function B(e,t){if(e===t)return!0;var n=f(e),r=f(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),a=Array.isArray(t);if(i&&a)return e.length===t.length&&e.every((function(e,n){return B(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||a)return!1;var o=Object.keys(e),s=Object.keys(t);return o.length===s.length&&o.every((function(n){return B(e[n],t[n])}))}catch(e){return!1}}function H(e,t){for(var n=0;n<e.length;n++)if(B(e[n],t))return n;return-1}function j(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var G="data-server-rendered",V=["component","directive","filter"],W=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:z,isReservedAttr:z,isUnknownElement:z,getTagNamespace:F,parsePlatformTagName:U,mustUseProp:z,async:!0,_lifecycleHooks:W},$=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function X(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function Y(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Z,J=new RegExp("[^".concat($.source,".$_\\d]")),K="__proto__"in{},Q="undefined"!=typeof window,ee="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,te=ee&&WXEnvironment.platform.toLowerCase(),ne=Q&&window.navigator.userAgent.toLowerCase(),re=ne&&/msie|trident/.test(ne),ie=ne&&ne.indexOf("msie 9.0")>0,ae=ne&&ne.indexOf("edge/")>0,oe=(ne&&ne.indexOf("android"),ne&&/iphone|ipad|ipod|ios/.test(ne)||"ios"===te),se=(ne&&/chrome\/\d+/.test(ne),ne&&/phantomjs/.test(ne),ne&&ne.match(/firefox\/(\d+)/)),ue={}.watch,ce=!1;if(Q)try{var le={};Object.defineProperty(le,"passive",{get:function(){ce=!0}}),window.addEventListener("test-passive",null,le)}catch(e){}var he=function(){return void 0===Z&&(Z=!Q&&!ee&&void 0!==n.g&&n.g.process&&"server"===n.g.process.env.VUE_ENV),Z},fe=Q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function de(e){return"function"==typeof e&&/native code/.test(e.toString())}var pe,ve="undefined"!=typeof Symbol&&de(Symbol)&&"undefined"!=typeof Reflect&&de(Reflect.ownKeys);pe="undefined"!=typeof Set&&de(Set)?Set:function(){function e(){r(this,e),this.set=Object.create(null)}return a(e,[{key:"has",value:function(e){return!0===this.set[e]}},{key:"add",value:function(e){this.set[e]=!0}},{key:"clear",value:function(){this.set=Object.create(null)}}]),e}();var me,ge,ye,xe=F,be="undefined"!=typeof console,_e=/(?:^|[-_])(\w)/g;me=function(e,t){var n=t?xe(t):"";q.warnHandler?q.warnHandler.call(null,e,t,n):be&&!q.silent&&console.error("[Vue warn]: ".concat(e).concat(n))},ge=function(e,t){be&&!q.silent&&console.warn("[Vue tip]: ".concat(e)+(t?xe(t):""))},ye=function(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,r=n.name||n._componentTag,i=n.__file;if(!r&&i){var a=i.match(/([^/\\]+)\.vue$/);r=a&&a[1]}return(r?"<".concat(function(e){return e.replace(_e,(function(e){return e.toUpperCase()})).replace(/[-_]/g,"")}(r),">"):"<Anonymous>")+(i&&!1!==t?" at ".concat(i):"")},xe=function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map((function(e,t){return"".concat(0===t?"---\x3e ":function(e,t){for(var n="";t;)t%2==1&&(n+=e),t>1&&(e+=e),t>>=1;return n}(" ",5+2*t)).concat(Array.isArray(e)?"".concat(ye(e[0]),"... (").concat(e[1]," recursive calls)"):ye(e))})).join("\n")}return"\n\n(found in ".concat(ye(e),")")};var we=0,Me=function(){function e(){r(this,e),this.id=we++,this.subs=[]}return a(e,[{key:"addSub",value:function(e){this.subs.push(e)}},{key:"removeSub",value:function(e){S(this.subs,e)}},{key:"depend",value:function(){e.target&&e.target.addDep(this)}},{key:"notify",value:function(){var e=this.subs.slice();q.async||e.sort((function(e,t){return e.id-t.id}));for(var t=0,n=e.length;t<n;t++)e[t].update()}}]),e}();Me.target=null;var Se=[];function Ee(e){Se.push(e),Me.target=e}function Te(){Se.pop(),Me.target=Se[Se.length-1]}var Ae=function(){function e(t,n,i,a,o,s,u,c){r(this,e),this.tag=t,this.data=n,this.children=i,this.text=a,this.elm=o,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=u,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return a(e,[{key:"child",get:function(){return this.componentInstance}}]),e}(),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Ae;return t.text=e,t.isComment=!0,t};function Le(e){return new Ae(void 0,void 0,void 0,String(e))}function Re(e){var t=new Ae(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ce=Array.prototype,Pe=Object.create(Ce);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=Ce[e];Y(Pe,e,(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a,o=t.apply(this,r),s=this.__ob__;switch(e){case"push":case"unshift":a=r;break;case"splice":a=r.slice(2)}return a&&s.observeArray(a),s.dep.notify(),o}))}));var Oe=Object.getOwnPropertyNames(Pe),Ie=!0;function Ne(e){Ie=e}var De=function(){function e(t){r(this,e),this.value=t,this.dep=new Me,this.vmCount=0,Y(t,"__ob__",this),Array.isArray(t)?(K?function(e,t){e.__proto__=t}(t,Pe):function(e,t,n){for(var r=0,i=n.length;r<i;r++){var a=n[r];Y(e,a,t[a])}}(t,Pe,Oe),this.observeArray(t)):this.walk(t)}return a(e,[{key:"walk",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)ze(e,t[n])}},{key:"observeArray",value:function(e){for(var t=0,n=e.length;t<n;t++)Fe(e[t])}}]),e}();function Fe(e,t){var n;if(f(e)&&!(e instanceof Ae))return T(e,"__ob__")&&e.__ob__ instanceof De?n=e.__ob__:Ie&&!he()&&(Array.isArray(e)||v(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new De(e)),t&&n&&n.vmCount++,n}function ze(e,t,n,r,i){var a=new Me,o=Object.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.configurable){var s=o&&o.get,u=o&&o.set;s&&!u||2!==arguments.length||(n=e[t]);var c=!i&&Fe(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return Me.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(t)&&He(t))),t},set:function(t){var o=s?s.call(e):n;t===o||t!=t&&o!=o||(r&&r(),s&&!u||(u?u.call(e,t):n=t,c=!i&&Fe(t),a.notify()))}})}}function Ue(e,t,n){if((u(e)||h(e))&&me("Cannot set reactive property on undefined, null, or primitive value: ".concat(e)),Array.isArray(e)&&g(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?(me("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(ze(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Be(e,t){if((u(e)||h(e))&&me("Cannot delete reactive property on undefined, null, or primitive value: ".concat(e)),Array.isArray(e)&&g(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount?me("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):T(e,t)&&(delete e[t],n&&n.dep.notify())}}function He(e){for(var t,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&He(t)}var je=q.optionMergeStrategies;function Ge(e,t){if(!t)return e;for(var n,r,i,a=ve?Reflect.ownKeys(t):Object.keys(t),o=0;o<a.length;o++)"__ob__"!==(n=a[o])&&(r=e[n],i=t[n],T(e,n)?r!==i&&v(r)&&v(i)&&Ge(r,i):Ue(e,n,i));return e}function Ve(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?Ge(r,i):i}:t?e?function(){return Ge("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function We(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function qe(e,t,n,r){var i=Object.create(e||null);return t?(Ye(r,t,n),N(i,t)):i}je.el=je.propsData=function(e,t,n,r){return n||me('option "'.concat(r,'" can only be used during instance ')+"creation with the `new` keyword."),$e(e,t)},je.data=function(e,t,n){return n?Ve(e,t,n):t&&"function"!=typeof t?(me('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):Ve(e,t)},W.forEach((function(e){je[e]=We})),V.forEach((function(e){je[e+"s"]=qe})),je.watch=function(e,t,n,r){if(e===ue&&(e=void 0),t===ue&&(t=void 0),!t)return Object.create(e||null);if(Ye(r,t,n),!e)return t;var i={};for(var a in N(i,e),t){var o=i[a],s=t[a];o&&!Array.isArray(o)&&(o=[o]),i[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return i},je.props=je.methods=je.inject=je.computed=function(e,t,n,r){if(t&&Ye(r,t,n),!e)return t;var i=Object.create(null);return N(i,e),t&&N(i,t),i},je.provide=Ve;var $e=function(e,t){return void 0===t?e:t};function Xe(e){new RegExp("^[a-zA-Z][\\-\\.0-9_".concat($.source,"]*$")).test(e)||me('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(w(e)||q.isReservedTag(e))&&me("Do not use built-in or reserved HTML elements as component id: "+e)}function Ye(e,t,n){v(t)||me('Invalid value for option "'.concat(e,'": expected an Object, ')+"but got ".concat(p(t),"."),n)}function Ze(e,t,n){if(function(e){for(var t in e.components)Xe(t)}(t),"function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,i,a={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])?a[L(i)]={type:null}:me("props must be strings when using array syntax.");else if(v(n))for(var o in n)i=n[o],a[L(o)]=v(i)?i:{type:i};else me('Invalid value for option "props": expected an Array or an Object, '+"but got ".concat(p(n),"."),t);e.props=a}}(t,n),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(v(n))for(var a in n){var o=n[a];r[a]=v(o)?N({from:a},o):{from:o}}else me('Invalid value for option "inject": expected an Array or an Object, '+"but got ".concat(p(n),"."),t)}}(t,n),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(e=Ze(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ze(e,t.mixins[r],n);var a,o={};for(a in e)s(a);for(a in t)T(e,a)||s(a);function s(r){var i=je[r]||$e;o[r]=i(e[r],t[r],n,r)}return o}function Je(e,t,n,r){if("string"==typeof n){var i=e[t];if(T(i,n))return i[n];var a=L(n);if(T(i,a))return i[a];var o=R(a);if(T(i,o))return i[o];var s=i[n]||i[a]||i[o];return r&&!s&&me("Failed to resolve "+t.slice(0,-1)+": "+n,e),s}}function Ke(e,t,n,r){var i=t[e],a=!T(n,e),s=n[e],u=it(Boolean,i.type);if(u>-1)if(a&&!T(i,"default"))s=!1;else if(""===s||s===P(e)){var c=it(String,i.type);(c<0||u<c)&&(s=!0)}if(void 0===s){s=function(e,t,n){if(T(t,"default")){var r=t.default;return f(r)&&me('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof r&&"Function"!==nt(t.type)?r.call(e):r}}(r,i,e);var l=Ie;Ne(!0),Fe(s),Ne(l)}return function(e,t,n,r,i){if(e.required&&i)me('Missing required prop: "'+t+'"',r);else if(null!=n||e.required){var a=e.type,s=!a||!0===a,u=[];if(a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length&&!s;c++){var l=et(n,a[c],r);u.push(l.expectedType||""),s=l.valid}}var h=u.some((function(e){return e}));if(s||!h){var f=e.validator;f&&(f(n)||me('Invalid prop: custom validator check failed for prop "'+t+'".',r))}else me(function(e,t,n){var r='Invalid prop: type check failed for prop "'.concat(e,'".')+" Expected ".concat(n.map(R).join(", ")),i=n[0],a=p(t);return 1===n.length&&st(i)&&st(o(t))&&!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return"boolean"===e.toLowerCase()}))}(i,a)&&(r+=" with value ".concat(at(t,i))),r+=", got ".concat(a," "),st(a)&&(r+="with value ".concat(at(t,a),".")),r}(t,n,u),r)}}(i,e,s,r,a),s}var Qe=/^(String|Number|Boolean|Function|Symbol|BigInt)$/;function et(e,t,n){var r,i=nt(t);if(Qe.test(i)){var a=o(e);(r=a===i.toLowerCase())||"object"!==a||(r=e instanceof t)}else if("Object"===i)r=v(e);else if("Array"===i)r=Array.isArray(e);else try{r=e instanceof t}catch(e){me('Invalid prop type: "'+String(t)+'" is not a constructor',n),r=!1}return{valid:r,expectedType:i}}var tt=/^\s*function (\w+)/;function nt(e){var t=e&&e.toString().match(tt);return t?t[1]:""}function rt(e,t){return nt(e)===nt(t)}function it(e,t){if(!Array.isArray(t))return rt(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(rt(t[n],e))return n;return-1}function at(e,t){return"String"===t?'"'.concat(e,'"'):"".concat("Number"===t?Number(e):e)}var ot=["string","number","boolean"];function st(e){return ot.some((function(t){return e.toLowerCase()===t}))}function ut(e,t,n){Ee();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{if(!1===i[a].call(r,e,t,n))return}catch(e){lt(e,r,"errorCaptured hook")}}lt(e,t,n)}finally{Te()}}function ct(e,t,n,r,i){var a;try{(a=n?e.apply(t,n):e.call(t))&&!a._isVue&&y(a)&&!a._handled&&(a.catch((function(e){return ut(e,r,i+" (Promise/async)")})),a._handled=!0)}catch(e){ut(e,r,i)}return a}function lt(e,t,n){if(q.errorHandler)try{return q.errorHandler.call(null,e,t,n)}catch(t){t!==e&&ht(t,null,"config.errorHandler")}ht(e,t,n)}function ht(e,t,n){if(me("Error in ".concat(n,': "').concat(e.toString(),'"'),t),!Q&&!ee||"undefined"==typeof console)throw e;console.error(e)}var ft,dt,pt,vt=!1,mt=[],gt=!1;function yt(){gt=!1;var e=mt.slice(0);mt.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&de(Promise)){var xt=Promise.resolve();ft=function(){xt.then(yt),oe&&setTimeout(F)},vt=!0}else if(re||"undefined"==typeof MutationObserver||!de(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ft="undefined"!=typeof setImmediate&&de(setImmediate)?function(){setImmediate(yt)}:function(){setTimeout(yt,0)};else{var bt=1,_t=new MutationObserver(yt),wt=document.createTextNode(String(bt));_t.observe(wt,{characterData:!0}),ft=function(){bt=(bt+1)%2,wt.data=String(bt)},vt=!0}function Mt(e,t){var n;if(mt.push((function(){if(e)try{e.call(t)}catch(e){ut(e,t,"nextTick")}else n&&n(t)})),gt||(gt=!0,ft()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var St,Et=Q&&window.performance;Et&&Et.mark&&Et.measure&&Et.clearMarks&&Et.clearMeasures&&(dt=function(e){return Et.mark(e)},pt=function(e,t,n){Et.measure(e,t,n),Et.clearMarks(t),Et.clearMarks(n)});var Tt=_("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,require"),At=function(e,t){me('Property or method "'.concat(t,'" is not defined on the instance but ')+"referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.",e)},kt=function(e,t){me('Property "'.concat(t,'" must be accessed with "$data.').concat(t,'" because ')+'properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',e)},Lt="undefined"!=typeof Proxy&&de(Proxy);if(Lt){var Rt=_("stop,prevent,self,ctrl,shift,alt,meta,exact");q.keyCodes=new Proxy(q.keyCodes,{set:function(e,t,n){return Rt(t)?(me("Avoid overwriting built-in modifier in config.keyCodes: .".concat(t)),!1):(e[t]=n,!0)}})}var Ct={has:function(e,t){var n=t in e,r=Tt(t)||"string"==typeof t&&"_"===t.charAt(0)&&!(t in e.$data);return n||r||(t in e.$data?kt(e,t):At(e,t)),n||!r}},Pt={get:function(e,t){return"string"!=typeof t||t in e||(t in e.$data?kt(e,t):At(e,t)),e[t]}};St=function(e){if(Lt){var t=e.$options,n=t.render&&t.render._withStripped?Pt:Ct;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var Ot=new pe;function It(e){Nt(e,Ot),Ot.clear()}function Nt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!f(e)||Object.isFrozen(e)||e instanceof Ae)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(n=e.length;n--;)Nt(e[n],t);else for(n=(r=Object.keys(e)).length;n--;)Nt(e[r[n]],t)}}var Dt=A((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function Ft(e,t){function n(){var e=n.fns;if(!Array.isArray(e))return ct(e,null,arguments,t,"v-on handler");for(var r=e.slice(),i=0;i<r.length;i++)ct(r[i],null,arguments,t,"v-on handler")}return n.fns=e,n}function zt(e,t,n,r,i,a){var o,s,c,h;for(o in e)s=e[o],c=t[o],h=Dt(o),u(s)?me('Invalid handler for event "'.concat(h.name,'": got ')+String(s),a):u(c)?(u(s.fns)&&(s=e[o]=Ft(s,a)),l(h.once)&&(s=e[o]=i(h.name,s,h.capture)),n(h.name,s,h.capture,h.passive,h.params)):s!==c&&(c.fns=s,e[o]=c);for(o in t)u(e[o])&&r((h=Dt(o)).name,t[o],h.capture)}function Ut(e,t,n){var r;e instanceof Ae&&(e=e.data.hook||(e.data.hook={}));var i=e[t];function a(){n.apply(this,arguments),S(r.fns,a)}u(i)?r=Ft([a]):c(i.fns)&&l(i.merged)?(r=i).fns.push(a):r=Ft([i,a]),r.merged=!0,e[t]=r}function Bt(e,t,n,r,i){if(c(t)){if(T(t,n))return e[n]=t[n],i||delete t[n],!0;if(T(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function Ht(e){return h(e)?[Le(e)]:Array.isArray(e)?Gt(e):void 0}function jt(e){return c(e)&&c(e.text)&&!1===e.isComment}function Gt(e,t){var n,r,i,a,o=[];for(n=0;n<e.length;n++)u(r=e[n])||"boolean"==typeof r||(a=o[i=o.length-1],Array.isArray(r)?r.length>0&&(jt((r=Gt(r,"".concat(t||"","_").concat(n)))[0])&&jt(a)&&(o[i]=Le(a.text+r[0].text),r.shift()),o.push.apply(o,r)):h(r)?jt(a)?o[i]=Le(a.text+r):""!==r&&o.push(Le(r)):jt(r)&&jt(a)?o[i]=Le(a.text+r.text):(l(e._isVList)&&c(r.tag)&&u(r.key)&&c(t)&&(r.key="__vlist".concat(t,"_").concat(n,"__")),o.push(r)));return o}function Vt(e,t){if(e){for(var n=Object.create(null),r=ve?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){for(var o=e[a].from,s=t;s;){if(s._provided&&T(s._provided,o)){n[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in e[a]){var u=e[a].default;n[a]="function"==typeof u?u.call(t):u}else me('Injection "'.concat(a,'" not found'),t)}}return n}}function Wt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var a=e[r],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==t&&a.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(a);else{var s=o.slot,u=n[s]||(n[s]=[]);"template"===a.tag?u.push.apply(u,a.children||[]):u.push(a)}}for(var c in n)n[c].every(qt)&&delete n[c];return n}function qt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function $t(e){return e.isComment&&e.asyncFactory}function Xt(e,t,n){var r,i=Object.keys(t).length>0,a=e?!!e.$stable:!i,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==s&&o===n.$key&&!i&&!n.$hasNormal)return n;for(var u in r={},e)e[u]&&"$"!==u[0]&&(r[u]=Yt(t,u,e[u]))}else r={};for(var c in t)c in r||(r[c]=Zt(t,c));return e&&Object.isExtensible(e)&&(e._normalized=r),Y(r,"$stable",a),Y(r,"$key",o),Y(r,"$hasNormal",i),r}function Yt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({}),t=(e=e&&"object"===o(e)&&!Array.isArray(e)?[e]:Ht(e))&&e[0];return e&&(!t||1===e.length&&t.isComment&&!$t(t))?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Zt(e,t){return function(){return e[t]}}function Jt(e,t){var n,r,i,a,o;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(f(e))if(ve&&e[Symbol.iterator]){n=[];for(var s=e[Symbol.iterator](),u=s.next();!u.done;)n.push(t(u.value,n.length)),u=s.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,i=a.length;r<i;r++)o=a[r],n[r]=t(e[o],o,r);return c(n)||(n=[]),n._isVList=!0,n}function Kt(e,t,n,r){var i,a=this.$scopedSlots[e];a?(n=n||{},r&&(f(r)||me("slot v-bind without argument expects an Object",this),n=N(N({},r),n)),i=a(n)||("function"==typeof t?t():t)):i=this.$slots[e]||("function"==typeof t?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},i):i}function Qt(e){return Je(this.$options,"filters",e,!0)||U}function en(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function tn(e,t,n,r,i){var a=q.keyCodes[t]||n;return i&&r&&!q.keyCodes[t]?en(i,r):a?en(a,e):r?P(r)!==t:void 0===e}function nn(e,t,n,r,i){if(n)if(f(n)){var a;Array.isArray(n)&&(n=D(n));var o=function(o){if("class"===o||"style"===o||M(o))a=e;else{var s=e.attrs&&e.attrs.type;a=r||q.mustUseProp(t,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=L(o),c=P(o);u in a||c in a||(a[o]=n[o],i&&((e.on||(e.on={}))["update:".concat(o)]=function(e){n[o]=e}))};for(var s in n)o(s)}else me("v-bind without argument expects an Object or Array value",this);return e}function rn(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||on(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__".concat(e),!1),r}function an(e,t,n){return on(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function on(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&sn(e[r],"".concat(t,"_").concat(r),n);else sn(e,t,n)}function sn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function un(e,t){if(t)if(v(t)){var n=e.on=e.on?N({},e.on):{};for(var r in t){var i=n[r],a=t[r];n[r]=i?[].concat(i,a):a}}else me("v-on without argument expects an Object value",this);return e}function cn(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var a=e[i];Array.isArray(a)?cn(a,t,n):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return r&&(t.$key=r),t}function ln(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r?e[t[n]]=t[n+1]:""!==r&&null!==r&&me("Invalid value for dynamic directive argument (expected string or null): ".concat(r),this)}return e}function hn(e,t){return"string"==typeof e?t+e:e}function fn(e){e._o=an,e._n=b,e._s=x,e._l=Jt,e._t=Kt,e._q=B,e._i=H,e._m=rn,e._f=Qt,e._k=tn,e._b=nn,e._v=Le,e._e=ke,e._u=cn,e._g=un,e._d=ln,e._p=hn}function dn(e,t,n,r,i){var a,o=this,u=i.options;T(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var c=l(u._compiled),h=!c;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||s,this.injections=Vt(u.inject,r),this.slots=function(){return o.$slots||Xt(e.scopedSlots,o.$slots=Wt(n,r)),o.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Xt(e.scopedSlots,this.slots())}}),c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Xt(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,i){var o=bn(a,e,t,n,i,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=r),o}:this._c=function(e,t,n,r){return bn(a,e,t,n,r,h)}}function pn(e,t,n,r,i){var a=Re(e);return a.fnContext=n,a.fnOptions=r,(a.devtoolsMeta=a.devtoolsMeta||{}).renderContext=i,t.slot&&((a.data||(a.data={})).slot=t.slot),a}function vn(e,t){for(var n in t)e[L(n)]=t[n]}fn(dn.prototype);var mn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;mn.prepatch(n,n)}else(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return c(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}(e,Rn)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,r,i){Cn=!0;var a=r.data.scopedSlots,o=e.$scopedSlots,u=!!(a&&!a.$stable||o!==s&&!o.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),c=!!(i||e.$options._renderChildren||u);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=i,e.$attrs=r.data.attrs||s,e.$listeners=n||s,t&&e.$options.props){Ne(!1);for(var l=e._props,h=e.$options._propKeys||[],f=0;f<h.length;f++){var d=h[f],p=e.$options.props;l[d]=Ke(d,p,t,e)}Ne(!0),e.$options.propsData=t}n=n||s;var v=e.$options._parentListeners;e.$options._parentListeners=n,Ln(e,n,v),c&&(e.$slots=Wt(i,r.context),e.$forceUpdate()),Cn=!1}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,Dn(r,"mounted")),e.data.keepAlive&&(n._isMounted?((t=r)._inactive=!1,zn.push(t)):In(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Nn(t,!0):t.$destroy())}},gn=Object.keys(mn);function yn(e,t,n,r,i){if(!u(e)){var a=n.$options._base;if(f(e)&&(e=a.extend(e)),"function"==typeof e){var o;if(u(e.cid)&&(e=function(e,t){if(l(e.error)&&c(e.errorComp))return e.errorComp;if(c(e.resolved))return e.resolved;var n=Mn;if(n&&c(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),l(e.loading)&&c(e.loadingComp))return e.loadingComp;if(n&&!c(e.owners)){var r=e.owners=[n],i=!0,a=null,o=null;n.$on("hook:destroyed",(function(){return S(r,n)}));var s=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==a&&(clearTimeout(a),a=null),null!==o&&(clearTimeout(o),o=null))},h=j((function(n){e.resolved=Sn(n,t),i?r.length=0:s(!0)})),d=j((function(t){me("Failed to resolve async component: ".concat(String(e))+(t?"\nReason: ".concat(t):"")),c(e.errorComp)&&(e.error=!0,s(!0))})),p=e(h,d);return f(p)&&(y(p)?u(e.resolved)&&p.then(h,d):y(p.component)&&(p.component.then(h,d),c(p.error)&&(e.errorComp=Sn(p.error,t)),c(p.loading)&&(e.loadingComp=Sn(p.loading,t),0===p.delay?e.loading=!0:a=setTimeout((function(){a=null,u(e.resolved)&&u(e.error)&&(e.loading=!0,s(!1))}),p.delay||200)),c(p.timeout)&&(o=setTimeout((function(){o=null,u(e.resolved)&&d("timeout (".concat(p.timeout,"ms)"))}),p.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}(o=e,a),void 0===e))return function(e,t,n,r,i){var a=ke();return a.asyncFactory=e,a.asyncMeta={data:t,context:n,children:r,tag:i},a}(o,t,n,r,i);t=t||{},ir(e),c(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),a=i[r],o=t.model.callback;c(a)?(Array.isArray(a)?-1===a.indexOf(o):a!==o)&&(i[r]=[o].concat(a)):i[r]=o}(e.options,t);var h=function(e,t,n){var r=t.options.props;if(!u(r)){var i={},a=e.attrs,o=e.props;if(c(a)||c(o))for(var s in r){var l=P(s),h=s.toLowerCase();s!==h&&a&&T(a,h)&&ge('Prop "'.concat(h,'" is passed to component ')+"".concat(ye(n||t),", but the declared prop name is")+' "'.concat(s,'". ')+"Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM "+'templates. You should probably use "'.concat(l,'" instead of "').concat(s,'".')),Bt(i,o,s,l,!0)||Bt(i,a,s,l,!1)}return i}}(t,e,i);if(l(e.options.functional))return function(e,t,n,r,i){var a=e.options,o={},u=a.props;if(c(u))for(var l in u)o[l]=Ke(l,u,t||s);else c(n.attrs)&&vn(o,n.attrs),c(n.props)&&vn(o,n.props);var h=new dn(n,o,i,r,e),f=a.render.call(null,h._c,h);if(f instanceof Ae)return pn(f,n,h.parent,a,h);if(Array.isArray(f)){for(var d=Ht(f)||[],p=new Array(d.length),v=0;v<d.length;v++)p[v]=pn(d[v],n,h.parent,a,h);return p}}(e,h,t,n,r);var d=t.on;if(t.on=t.nativeOn,l(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<gn.length;n++){var r=gn[n],i=t[r],a=mn[r];i===a||i&&i._merged||(t[r]=i?xn(a,i):a)}}(t);var v=e.options.name||i;return new Ae("vue-component-".concat(e.cid).concat(v?"-".concat(v):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:d,tag:i,children:r},o)}me("Invalid Component definition: ".concat(String(e)),n)}}function xn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function bn(e,t,n,r,i,a){return(Array.isArray(n)||h(n))&&(i=r,r=n,n=void 0),l(a)&&(i=2),function(e,t,n,r,i){if(c(n)&&c(n.__ob__))return me("Avoid using observed data object as vnode data: ".concat(JSON.stringify(n),"\n")+"Always create fresh vnode data objects in each render!",e),ke();if(c(n)&&c(n.is)&&(t=n.is),!t)return ke();var a,o,s;(c(n)&&c(n.key)&&!h(n.key)&&me("Avoid using non-primitive value as key, use string/number value instead.",e),Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0),2===i?r=Ht(r):1===i&&(r=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(r)),"string"==typeof t)?(o=e.$vnode&&e.$vnode.ns||q.getTagNamespace(t),q.isReservedTag(t)?(c(n)&&c(n.nativeOn)&&"component"!==n.tag&&me("The .native modifier for v-on is only valid on components but it was used on <".concat(t,">."),e),a=new Ae(q.parsePlatformTagName(t),n,r,void 0,void 0,e)):a=n&&n.pre||!c(s=Je(e.$options,"components",t))?new Ae(t,n,r,void 0,void 0,e):yn(s,n,e,r,t)):a=yn(t,n,e,r);return Array.isArray(a)?a:c(a)?(c(o)&&_n(a,o),c(n)&&function(e){f(e.style)&&It(e.style),f(e.class)&&It(e.class)}(n),a):ke()}(e,t,n,r,i)}function _n(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),c(e.children))for(var r=0,i=e.children.length;r<i;r++){var a=e.children[r];c(a.tag)&&(u(a.ns)||l(n)&&"svg"!==a.tag)&&_n(a,t,n)}}var wn,Mn=null;function Sn(e,t){return(e.__esModule||ve&&"Module"===e[Symbol.toStringTag])&&(e=e.default),f(e)?t.extend(e):e}function En(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(c(n)&&(c(n.componentOptions)||$t(n)))return n}}function Tn(e,t){wn.$on(e,t)}function An(e,t){wn.$off(e,t)}function kn(e,t){var n=wn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Ln(e,t,n){wn=e,zt(t,n||{},Tn,An,kn,e),wn=void 0}var Rn=null,Cn=!1;function Pn(e){var t=Rn;return Rn=e,function(){Rn=t}}function On(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function In(e,t){if(t){if(e._directInactive=!1,On(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)In(e.$children[n]);Dn(e,"activated")}}function Nn(e,t){if(!(t&&(e._directInactive=!0,On(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Nn(e.$children[n]);Dn(e,"deactivated")}}function Dn(e,t){Ee();var n=e.$options[t],r="".concat(t," hook");if(n)for(var i=0,a=n.length;i<a;i++)ct(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),Te()}var Fn=[],zn=[],Un={},Bn={},Hn=!1,jn=!1,Gn=0,Vn=0,Wn=Date.now;if(Q&&!re){var qn=window.performance;qn&&"function"==typeof qn.now&&Wn()>document.createEvent("Event").timeStamp&&(Wn=function(){return qn.now()})}function $n(){var e,t;for(Vn=Wn(),jn=!0,Fn.sort((function(e,t){return e.id-t.id})),Gn=0;Gn<Fn.length;Gn++)if((e=Fn[Gn]).before&&e.before(),t=e.id,Un[t]=null,e.run(),null!=Un[t]&&(Bn[t]=(Bn[t]||0)+1,Bn[t]>100)){me("You may have an infinite update loop "+(e.user?'in watcher with expression "'.concat(e.expression,'"'):"in a component render function."),e.vm);break}var n=zn.slice(),r=Fn.slice();Gn=Fn.length=zn.length=0,Un={},Bn={},Hn=jn=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,In(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Dn(r,"updated")}}(r),fe&&q.devtools&&fe.emit("flush")}var Xn=0,Yn=function(){function e(t,n,i,a,o){r(this,e),this.vm=t,o&&(t._watcher=this),t._watchers.push(this),a?(this.deep=!!a.deep,this.user=!!a.user,this.lazy=!!a.lazy,this.sync=!!a.sync,this.before=a.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++Xn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression=n.toString(),"function"==typeof n?this.getter=n:(this.getter=function(e){if(!J.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(n),this.getter||(this.getter=F,me('Failed watching path: "'.concat(n,'" ')+"Watcher only accepts simple dot-delimited paths. For full control, use a function instead.",t))),this.value=this.lazy?void 0:this.get()}return a(e,[{key:"get",value:function(){var e;Ee(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;ut(e,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&It(e),Te(),this.cleanupDeps()}return e}},{key:"addDep",value:function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))}},{key:"cleanupDeps",value:function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0}},{key:"update",value:function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==Un[t]){if(Un[t]=!0,jn){for(var n=Fn.length-1;n>Gn&&Fn[n].id>e.id;)n--;Fn.splice(n+1,0,e)}else Fn.push(e);if(!Hn){if(Hn=!0,!q.async)return void $n();Mt($n)}}}(this)}},{key:"run",value:function(){if(this.active){var e=this.get();if(e!==this.value||f(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');ct(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}}},{key:"evaluate",value:function(){this.value=this.get(),this.dirty=!1}},{key:"depend",value:function(){for(var e=this.deps.length;e--;)this.deps[e].depend()}},{key:"teardown",value:function(){if(this.active){this.vm._isBeingDestroyed||S(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}}}]),e}(),Zn={enumerable:!0,configurable:!0,get:F,set:F};function Jn(e,t,n){Zn.get=function(){return this[t][n]},Zn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Zn)}var Kn={lazy:!0};function Qn(e,t,n){var r=!he();"function"==typeof n?(Zn.get=r?er(t):tr(n),Zn.set=F):(Zn.get=n.get?r&&!1!==n.cache?er(t):tr(n.get):F,Zn.set=n.set||F),Zn.set===F&&(Zn.set=function(){me('Computed property "'.concat(t,'" was assigned to but it has no setter.'),this)}),Object.defineProperty(e,t,Zn)}function er(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Me.target&&t.depend(),t.value}}function tr(e){return function(){return e.call(this,this)}}function nr(e,t,n,r){return v(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var rr=0;function ir(e){var t=e.options;if(e.super){var n=ir(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}(e);r&&N(e.extendOptions,r),(t=e.options=Ze(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function ar(e){this instanceof ar||me("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function or(e){return e&&(e.Ctor.options.name||e.tag)}function sr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!m(e)&&e.test(t)}function ur(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var a in n){var o=n[a];if(o){var s=o.name;s&&!t(s)&&cr(n,a,r,i)}}}function cr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,S(n,t)}!function(e){e.prototype._init=function(e){var t,n,r=this;r._uid=rr++,q.performance&&dt&&(t="vue-perf-start:".concat(r._uid),n="vue-perf-end:".concat(r._uid),dt(t)),r._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(r,e):r.$options=Ze(ir(r.constructor),e||{},r),St(r),r._self=r,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(r),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Ln(e,t)}(r),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=Wt(t._renderChildren,r),e.$scopedSlots=s,e._c=function(t,n,r,i){return bn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return bn(e,t,n,r,i,!0)};var i=n&&n.data;ze(e,"$attrs",i&&i.attrs||s,(function(){!Cn&&me("$attrs is readonly.",e)}),!0),ze(e,"$listeners",t._parentListeners||s,(function(){!Cn&&me("$listeners is readonly.",e)}),!0)}(r),Dn(r,"beforeCreate"),function(e){var t=Vt(e.$options.inject,e);t&&(Ne(!1),Object.keys(t).forEach((function(n){ze(e,n,t[n],(function(){me("Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. "+'injection being mutated: "'.concat(n,'"'),e)}))})),Ne(!0))}(r),function(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],a=!e.$parent;a||Ne(!1);var o=function(o){i.push(o);var s=Ke(o,t,n,e),u=P(o);(M(u)||q.isReservedAttr(u))&&me('"'.concat(u,'" is a reserved attribute and cannot be used as component prop.'),e),ze(r,o,s,(function(){a||Cn||me("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's "+'value. Prop being mutated: "'.concat(o,'"'),e)})),o in e||Jn(e,"_props",o)};for(var s in t)o(s);Ne(!0)}(e,t.props),t.methods&&function(e,t){var n=e.$options.props;for(var r in t)"function"!=typeof t[r]&&me('Method "'.concat(r,'" has type "').concat(o(t[r]),'" in the component definition. ')+"Did you reference the function correctly?",e),n&&T(n,r)&&me('Method "'.concat(r,'" has already been defined as a prop.'),e),r in e&&X(r)&&me('Method "'.concat(r,'" conflicts with an existing Vue instance method. ')+"Avoid defining component methods that start with _ or $."),e[r]="function"!=typeof t[r]?F:O(t[r],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;v(t=e._data="function"==typeof t?function(e,t){Ee();try{return e.call(t,t)}catch(e){return ut(e,t,"data()"),{}}finally{Te()}}(t,e):t||{})||(t={},me("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var n=Object.keys(t),r=e.$options.props,i=e.$options.methods,a=n.length;a--;){var o=n[a];i&&T(i,o)&&me('Method "'.concat(o,'" has already been defined as a data property.'),e),r&&T(r,o)?me('The data property "'.concat(o,'" is already declared as a prop. ')+"Use prop default value instead.",e):X(o)||Jn(e,"_data",o)}Fe(t,!0)}(e):Fe(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=he();for(var i in t){var a=t[i],o="function"==typeof a?a:a.get;null==o&&me('Getter is missing for computed property "'.concat(i,'".'),e),r||(n[i]=new Yn(e,o||F,F,Kn)),i in e?i in e.$data?me('The computed property "'.concat(i,'" is already defined in data.'),e):e.$options.props&&i in e.$options.props?me('The computed property "'.concat(i,'" is already defined as a prop.'),e):e.$options.methods&&i in e.$options.methods&&me('The computed property "'.concat(i,'" is already defined as a method.'),e):Qn(e,i,a)}}(e,t.computed),t.watch&&t.watch!==ue&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)nr(e,n,r[i]);else nr(e,n,r)}}(e,t.watch)}(r),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(r),Dn(r,"created"),q.performance&&dt&&(r._name=ye(r,!1),dt(n),pt("vue ".concat(r._name," init"),t,n)),r.$options.el&&r.$mount(r.$options.el)}}(ar),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};t.set=function(){me("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){me("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ue,e.prototype.$delete=Be,e.prototype.$watch=function(e,t,n){var r=this;if(v(t))return nr(r,e,t,n);(n=n||{}).user=!0;var i=new Yn(r,e,t,n);if(n.immediate){var a='callback for immediate watcher "'.concat(i.expression,'"');Ee(),ct(t,r,[i.value],r,a),Te()}return function(){i.teardown()}}}(ar),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var a,o=n._events[e];if(!o)return n;if(!t)return n._events[e]=null,n;for(var s=o.length;s--;)if((a=o[s])===t||a.fn===t){o.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=e.toLowerCase();n!==e&&t._events[n]&&ge('Event "'.concat(n,'" is emitted in component ')+"".concat(ye(t),' but the handler is registered for "').concat(e,'". ')+"Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. "+'You should probably use "'.concat(P(e),'" instead of "').concat(e,'".'));var r=t._events[e];if(r){r=r.length>1?I(r):r;for(var i=I(arguments,1),a='event handler for "'.concat(e,'"'),o=0,s=r.length;o<s;o++)ct(r[o],t,i,t,a)}return t}}(ar),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,a=Pn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Dn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||S(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Dn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(ar),function(e){fn(e.prototype),e.prototype.$nextTick=function(e){return Mt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Xt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{Mn=t,e=r.call(t._renderProxy,t.$createElement)}catch(n){if(ut(n,t,"render"),t.$options.renderError)try{e=t.$options.renderError.call(t._renderProxy,t.$createElement,n)}catch(n){ut(n,t,"renderError"),e=t._vnode}else e=t._vnode}finally{Mn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof Ae||(Array.isArray(e)&&me("Multiple root nodes returned from render function. Render function should return a single root node.",t),e=ke()),e.parent=i,e}}(ar);var lr=[String,RegExp,Array],hr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:lr,exclude:lr,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,t=this.keys,n=this.vnodeToCache,r=this.keyToCache;if(n){var i=n.tag,a=n.componentInstance,o=n.componentOptions;e[r]={name:or(o),tag:i,componentInstance:a},t.push(r),this.max&&t.length>parseInt(this.max)&&cr(e,t[0],t,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)cr(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){ur(e,(function(e){return sr(t,e)}))})),this.$watch("exclude",(function(t){ur(e,(function(e){return!sr(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=En(e),n=t&&t.componentOptions;if(n){var r=or(n),i=this.include,a=this.exclude;if(i&&(!r||!sr(i,r))||a&&r&&sr(a,r))return t;var o=this.cache,s=this.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;o[u]?(t.componentInstance=o[u].componentInstance,S(s,u),s.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return q},set:function(){me("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(e,"config",t),e.util={warn:me,extend:N,mergeOptions:Ze,defineReactive:ze},e.set=Ue,e.delete=Be,e.nextTick=Mt,e.observable=function(e){return Fe(e),e},e.options=Object.create(null),V.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,N(e.options.components,hr),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=I(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ze(this.options,e),this}}(e),function(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var a=e.name||n.options.name;a&&Xe(a);var o=function(e){this._init(e)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=t++,o.options=Ze(n.options,e),o.super=n,o.options.props&&function(e){var t=e.options.props;for(var n in t)Jn(e.prototype,"_props",n)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var n in t)Qn(e.prototype,n,t[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,V.forEach((function(e){o[e]=n[e]})),a&&(o.options.components[a]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=N({},o.options),i[r]=o,o}}(e),function(e){V.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&Xe(e),"component"===t&&v(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(ar),Object.defineProperty(ar.prototype,"$isServer",{get:he}),Object.defineProperty(ar.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ar,"FunctionalRenderContext",{value:dn}),ar.version="2.6.14";var fr=_("style,class"),dr=_("input,textarea,option,select,progress"),pr=function(e,t,n){return"value"===n&&dr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},vr=_("contenteditable,draggable,spellcheck"),mr=_("events,caret,typing,plaintext-only"),gr=_("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),yr="http://www.w3.org/1999/xlink",xr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},br=function(e){return xr(e)?e.slice(6,e.length):""},_r=function(e){return null==e||!1===e};function wr(e,t){return{staticClass:Mr(e.staticClass,t.staticClass),class:c(e.class)?[e.class,t.class]:t.class}}function Mr(e,t){return e?t?e+" "+t:e:t||""}function Sr(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,i=e.length;r<i;r++)c(t=Sr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):f(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var Er={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Tr=_("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ar=_("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),kr=function(e){return Tr(e)||Ar(e)};function Lr(e){return Ar(e)?"svg":"math"===e?"math":void 0}var Rr=Object.create(null),Cr=_("text,number,password,search,email,tel,url");function Pr(e){return"string"==typeof e?document.querySelector(e)||(me("Cannot find element: "+e),document.createElement("div")):e}var Or=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(Er[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Ir={create:function(e,t){Nr(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Nr(e,!0),Nr(t))},destroy:function(e){Nr(e,!0)}};function Nr(e,t){var n=e.data.ref;if(c(n)){var r=e.context,i=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?S(a[n],i):a[n]===i&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var Dr=new Ae("",{},[]),Fr=["create","activate","update","remove","destroy"];function zr(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&c(e.data)===c(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=c(n=e.data)&&c(n=n.attrs)&&n.type,i=c(n=t.data)&&c(n=n.attrs)&&n.type;return r===i||Cr(r)&&Cr(i)}(e,t)||l(e.isAsyncPlaceholder)&&u(t.asyncFactory.error))}function Ur(e,t,n){var r,i,a={};for(r=t;r<=n;++r)c(i=e[r].key)&&(a[i]=r);return a}var Br={create:Hr,update:Hr,destroy:function(e){Hr(e,Dr)}};function Hr(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,i,a=e===Dr,o=t===Dr,s=Gr(e.data.directives,e.context),u=Gr(t.data.directives,t.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Wr(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(Wr(i,"bind",t,e),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Wr(c[n],"inserted",t,e)};a?Ut(t,"insert",h):h()}if(l.length&&Ut(t,"postpatch",(function(){for(var n=0;n<l.length;n++)Wr(l[n],"componentUpdated",t,e)})),!a)for(n in s)u[n]||Wr(s[n],"unbind",e,e,o)}(e,t)}var jr=Object.create(null);function Gr(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=jr),i[Vr(r)]=r,r.def=Je(t.$options,"directives",r.name,!0);return i}function Vr(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function Wr(e,t,n,r,i){var a=e.def&&e.def[t];if(a)try{a(n.elm,e,n,r,i)}catch(r){ut(r,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var qr=[Ir,Br];function $r(e,t){var n=t.componentOptions;if(!(c(n)&&!1===n.Ctor.options.inheritAttrs||u(e.data.attrs)&&u(t.data.attrs))){var r,i,a=t.elm,o=e.data.attrs||{},s=t.data.attrs||{};for(r in c(s.__ob__)&&(s=t.data.attrs=N({},s)),s)i=s[r],o[r]!==i&&Xr(a,r,i,t.data.pre);for(r in(re||ae)&&s.value!==o.value&&Xr(a,"value",s.value),o)u(s[r])&&(xr(r)?a.removeAttributeNS(yr,br(r)):vr(r)||a.removeAttribute(r))}}function Xr(e,t,n,r){r||e.tagName.indexOf("-")>-1?Yr(e,t,n):gr(t)?_r(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):vr(t)?e.setAttribute(t,function(e,t){return _r(t)||"false"===t?"false":"contenteditable"===e&&mr(t)?t:"true"}(t,n)):xr(t)?_r(n)?e.removeAttributeNS(yr,br(t)):e.setAttributeNS(yr,t,n):Yr(e,t,n)}function Yr(e,t,n){_r(n)?e.removeAttribute(t):(!re||ie||"TEXTAREA"!==e.tagName||"placeholder"!==t||""===n||e.__ieph||(e.addEventListener("input",(function t(n){n.stopImmediatePropagation(),e.removeEventListener("input",t)})),e.__ieph=!0),e.setAttribute(t,n))}var Zr={create:$r,update:$r};function Jr(e,t){var n=t.elm,r=t.data,i=e.data;if(!(u(r.staticClass)&&u(r.class)&&(u(i)||u(i.staticClass)&&u(i.class)))){var a=function(e){for(var t=e.data,n=e,r=e;c(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=wr(r.data,t));for(;c(n=n.parent);)n&&n.data&&(t=wr(t,n.data));return i=t.staticClass,a=t.class,c(i)||c(a)?Mr(i,Sr(a)):"";var i,a}(t),o=n._transitionClasses;c(o)&&(a=Mr(a,Sr(o))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var Kr,Qr,ei,ti,ni,ri,ii,ai={create:Jr,update:Jr},oi=/[\w).+\-_$\]]/;function si(e){var t,n,r,i,a,o=!1,s=!1,u=!1,c=!1,l=0,h=0,f=0,d=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),o)39===t&&92!==n&&(o=!1);else if(s)34===t&&92!==n&&(s=!1);else if(u)96===t&&92!==n&&(u=!1);else if(c)47===t&&92!==n&&(c=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||l||h||f){switch(t){case 34:s=!0;break;case 39:o=!0;break;case 96:u=!0;break;case 40:f++;break;case 41:f--;break;case 91:h++;break;case 93:h--;break;case 123:l++;break;case 125:l--}if(47===t){for(var p=r-1,v=void 0;p>=0&&" "===(v=e.charAt(p));p--);v&&oi.test(v)||(c=!0)}}else void 0===i?(d=r+1,i=e.slice(0,r).trim()):m();function m(){(a||(a=[])).push(e.slice(d,r).trim()),d=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==d&&m(),a)for(r=0;r<a.length;r++)i=ui(i,a[r]);return i}function ui(e,t){var n=t.indexOf("(");if(n<0)return'_f("'.concat(t,'")(').concat(e,")");var r=t.slice(0,n),i=t.slice(n+1);return'_f("'.concat(r,'")(').concat(e).concat(")"!==i?","+i:i)}function ci(e,t){console.error("[Vue compiler]: ".concat(e))}function li(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function hi(e,t,n,r,i){(e.props||(e.props=[])).push(_i({name:t,value:n,dynamic:i},r)),e.plain=!1}function fi(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(_i({name:t,value:n,dynamic:i},r)),e.plain=!1}function di(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(_i({name:t,value:n},r))}function pi(e,t,n,r,i,a,o,s){(e.directives||(e.directives=[])).push(_i({name:t,rawName:n,value:r,arg:i,isDynamicArg:a,modifiers:o},s)),e.plain=!1}function vi(e,t,n){return n?"_p(".concat(t,',"').concat(e,'")'):e+t}function mi(e,t,n,r,i,a,o,u){var c;r=r||s,a&&r.prevent&&r.passive&&a("passive and prevent can't be used together. Passive handler can't prevent default event.",o),r.right?u?t="(".concat(t,")==='click'?'contextmenu':(").concat(t,")"):"click"===t&&(t="contextmenu",delete r.right):r.middle&&(u?t="(".concat(t,")==='click'?'mouseup':(").concat(t,")"):"click"===t&&(t="mouseup")),r.capture&&(delete r.capture,t=vi("!",t,u)),r.once&&(delete r.once,t=vi("~",t,u)),r.passive&&(delete r.passive,t=vi("&",t,u)),r.native?(delete r.native,c=e.nativeEvents||(e.nativeEvents={})):c=e.events||(e.events={});var l=_i({value:n.trim(),dynamic:u},o);r!==s&&(l.modifiers=r);var h=c[t];Array.isArray(h)?i?h.unshift(l):h.push(l):c[t]=h?i?[l,h]:[h,l]:l,e.plain=!1}function gi(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}function yi(e,t,n){var r=xi(e,":"+t)||xi(e,"v-bind:"+t);if(null!=r)return si(r);if(!1!==n){var i=xi(e,t);if(null!=i)return JSON.stringify(i)}}function xi(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,a=0,o=i.length;a<o;a++)if(i[a].name===t){i.splice(a,1);break}return n&&delete e.attrsMap[t],r}function bi(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var a=n[r];if(t.test(a.name))return n.splice(r,1),a}}function _i(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function wi(e,t,n){var r=n||{},i=r.number,a="$$v",o=a;r.trim&&(o="(typeof ".concat(a," === 'string'")+"? ".concat(a,".trim()")+": ".concat(a,")")),i&&(o="_n(".concat(o,")"));var s=Mi(t,o);e.model={value:"(".concat(t,")"),expression:JSON.stringify(t),callback:"function (".concat(a,") {").concat(s,"}")}}function Mi(e,t){var n=function(e){if(e=e.trim(),Kr=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Kr-1)return(ti=e.lastIndexOf("."))>-1?{exp:e.slice(0,ti),key:'"'+e.slice(ti+1)+'"'}:{exp:e,key:null};for(Qr=e,ti=ni=ri=0;!Ei();)Ti(ei=Si())?ki(ei):91===ei&&Ai(ei);return{exp:e.slice(0,ni),key:e.slice(ni+1,ri)}}(e);return null===n.key?"".concat(e,"=").concat(t):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(t,")")}function Si(){return Qr.charCodeAt(++ti)}function Ei(){return ti>=Kr}function Ti(e){return 34===e||39===e}function Ai(e){var t=1;for(ni=ti;!Ei();)if(Ti(e=Si()))ki(e);else if(91===e&&t++,93===e&&t--,0===t){ri=ti;break}}function ki(e){for(var t=e;!Ei()&&(e=Si())!==t;);}var Li;function Ri(e,t,n){var r=Li;return function i(){var a=t.apply(null,arguments);null!==a&&Oi(e,i,n,r)}}var Ci=vt&&!(se&&Number(se[1])<=53);function Pi(e,t,n,r){if(Ci){var i=Vn,a=t;t=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}Li.addEventListener(e,t,ce?{capture:n,passive:r}:n)}function Oi(e,t,n,r){(r||Li).removeEventListener(e,t._wrapper||t,n)}function Ii(e,t){if(!u(e.data.on)||!u(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Li=t.elm,function(e){if(c(e.__r)){var t=re?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}c(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(n),zt(n,r,Pi,Oi,Ri,t.context),Li=void 0}}var Ni,Di={create:Ii,update:Ii};function Fi(e,t){if(!u(e.data.domProps)||!u(t.data.domProps)){var n,r,i=t.elm,a=e.data.domProps||{},o=t.data.domProps||{};for(n in c(o.__ob__)&&(o=t.data.domProps=N({},o)),a)n in o||(i[n]="");for(n in o){if(r=o[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===a[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){i._value=r;var s=u(r)?"":String(r);zi(i,s)&&(i.value=s)}else if("innerHTML"===n&&Ar(i.tagName)&&u(i.innerHTML)){(Ni=Ni||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var l=Ni.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}else if(r!==a[n])try{i[n]=r}catch(e){}}}}function zi(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(c(r)){if(r.number)return b(n)!==b(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var Ui={create:Fi,update:Fi},Bi=A((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function Hi(e){var t=ji(e.style);return e.staticStyle?N(e.staticStyle,t):t}function ji(e){return Array.isArray(e)?D(e):"string"==typeof e?Bi(e):e}var Gi,Vi=/^--/,Wi=/\s*!important$/,qi=function(e,t,n){if(Vi.test(t))e.style.setProperty(t,n);else if(Wi.test(n))e.style.setProperty(P(t),n.replace(Wi,""),"important");else{var r=Xi(t);if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++)e.style[r]=n[i];else e.style[r]=n}},$i=["Webkit","Moz","ms"],Xi=A((function(e){if(Gi=Gi||document.createElement("div").style,"filter"!==(e=L(e))&&e in Gi)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<$i.length;n++){var r=$i[n]+t;if(r in Gi)return r}}));function Yi(e,t){var n=t.data,r=e.data;if(!(u(n.staticStyle)&&u(n.style)&&u(r.staticStyle)&&u(r.style))){var i,a,o=t.elm,s=r.staticStyle,l=r.normalizedStyle||r.style||{},h=s||l,f=ji(t.data.style)||{};t.data.normalizedStyle=c(f.__ob__)?N({},f):f;var d=function(e,t){for(var n,r={},i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=Hi(i.data))&&N(r,n);(n=Hi(e.data))&&N(r,n);for(var a=e;a=a.parent;)a.data&&(n=Hi(a.data))&&N(r,n);return r}(t);for(a in h)u(d[a])&&qi(o,a,"");for(a in d)(i=d[a])!==h[a]&&qi(o,a,null==i?"":i)}}var Zi={create:Yi,update:Yi},Ji=/\s+/;function Ki(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ji).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Qi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ji).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" ".concat(e.getAttribute("class")||""," "),r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function ea(e){if(e){if("object"===o(e)){var t={};return!1!==e.css&&N(t,ta(e.name||"v")),N(t,e),t}return"string"==typeof e?ta(e):void 0}}var ta=A((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),na=Q&&!ie,ra="transition",ia="animation",aa="transition",oa="transitionend",sa="animation",ua="animationend";na&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(aa="WebkitTransition",oa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(sa="WebkitAnimation",ua="webkitAnimationEnd"));var ca=Q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function la(e){ca((function(){ca(e)}))}function ha(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Ki(e,t))}function fa(e,t){e._transitionClasses&&S(e._transitionClasses,t),Qi(e,t)}function da(e,t,n){var r=va(e,t),i=r.type,a=r.timeout,o=r.propCount;if(!i)return n();var s=i===ra?oa:ua,u=0,c=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++u>=o&&c()};setTimeout((function(){u<o&&c()}),a+1),e.addEventListener(s,l)}var pa=/\b(transform|all)(,|$)/;function va(e,t){var n,r=window.getComputedStyle(e),i=(r[aa+"Delay"]||"").split(", "),a=(r[aa+"Duration"]||"").split(", "),o=ma(i,a),s=(r[sa+"Delay"]||"").split(", "),u=(r[sa+"Duration"]||"").split(", "),c=ma(s,u),l=0,h=0;return t===ra?o>0&&(n=ra,l=o,h=a.length):t===ia?c>0&&(n=ia,l=c,h=u.length):h=(n=(l=Math.max(o,c))>0?o>c?ra:ia:null)?n===ra?a.length:u.length:0,{type:n,timeout:l,propCount:h,hasTransform:n===ra&&pa.test(r[aa+"Property"])}}function ma(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return ga(t)+ga(e[n])})))}function ga(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ya(e,t){var n=e.elm;c(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=ea(e.data.transition);if(!u(r)&&!c(n._enterCb)&&1===n.nodeType){for(var i=r.css,a=r.type,o=r.enterClass,s=r.enterToClass,l=r.enterActiveClass,h=r.appearClass,d=r.appearToClass,p=r.appearActiveClass,v=r.beforeEnter,m=r.enter,g=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,_=r.appear,w=r.afterAppear,M=r.appearCancelled,S=r.duration,E=Rn,T=Rn.$vnode;T&&T.parent;)E=T.context,T=T.parent;var A=!E._isMounted||!e.isRootInsert;if(!A||_||""===_){var k=A&&h?h:o,L=A&&p?p:l,R=A&&d?d:s,C=A&&x||v,P=A&&"function"==typeof _?_:m,O=A&&w||g,I=A&&M||y,N=b(f(S)?S.enter:S);null!=N&&ba(N,"enter",e);var D=!1!==i&&!ie,F=wa(P),z=n._enterCb=j((function(){D&&(fa(n,R),fa(n,L)),z.cancelled?(D&&fa(n,k),I&&I(n)):O&&O(n),n._enterCb=null}));e.data.show||Ut(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(n,z)})),C&&C(n),D&&(ha(n,k),ha(n,L),la((function(){fa(n,k),z.cancelled||(ha(n,R),F||(_a(N)?setTimeout(z,N):da(n,a,z)))}))),e.data.show&&(t&&t(),P&&P(n,z)),D||F||z()}}}function xa(e,t){var n=e.elm;c(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=ea(e.data.transition);if(u(r)||1!==n.nodeType)return t();if(!c(n._leaveCb)){var i=r.css,a=r.type,o=r.leaveClass,s=r.leaveToClass,l=r.leaveActiveClass,h=r.beforeLeave,d=r.leave,p=r.afterLeave,v=r.leaveCancelled,m=r.delayLeave,g=r.duration,y=!1!==i&&!ie,x=wa(d),_=b(f(g)?g.leave:g);c(_)&&ba(_,"leave",e);var w=n._leaveCb=j((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(fa(n,s),fa(n,l)),w.cancelled?(y&&fa(n,o),v&&v(n)):(t(),p&&p(n)),n._leaveCb=null}));m?m(M):M()}function M(){w.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),h&&h(n),y&&(ha(n,o),ha(n,l),la((function(){fa(n,o),w.cancelled||(ha(n,s),x||(_a(_)?setTimeout(w,_):da(n,a,w)))}))),d&&d(n,w),y||x||w())}}function ba(e,t,n){"number"!=typeof e?me("<transition> explicit ".concat(t," duration is not a valid number - ")+"got ".concat(JSON.stringify(e),"."),n.context):isNaN(e)&&me("<transition> explicit ".concat(t," duration is NaN - ")+"the duration expression might be incorrect.",n.context)}function _a(e){return"number"==typeof e&&!isNaN(e)}function wa(e){if(u(e))return!1;var t=e.fns;return c(t)?wa(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ma(e,t){!0!==t.data.show&&ya(t)}var Sa=function(e){var t,n,r={},i=e.modules,a=e.nodeOps;for(t=0;t<Fr.length;++t)for(r[Fr[t]]=[],n=0;n<i.length;++n)c(i[n][Fr[t]])&&r[Fr[t]].push(i[n][Fr[t]]);function o(e){var t=a.parentNode(e);c(t)&&a.removeChild(t,e)}function s(e,t){return!t&&!e.ns&&!(q.ignoredElements.length&&q.ignoredElements.some((function(t){return m(t)?t.test(e.tag):t===e.tag})))&&q.isUnknownElement(e.tag)}var f=0;function d(e,t,n,i,o,u,h){if(c(e.elm)&&c(u)&&(e=u[h]=Re(e)),e.isRootInsert=!o,!function(e,t,n,i){var a=e.data;if(c(a)){var o=c(e.componentInstance)&&a.keepAlive;if(c(a=a.hook)&&c(a=a.init)&&a(e,!1),c(e.componentInstance))return p(e,t),v(n,e.elm,i),l(o)&&function(e,t,n,i){for(var a,o=e;o.componentInstance;)if(c(a=(o=o.componentInstance._vnode).data)&&c(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Dr,o);t.push(o);break}v(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i)){var d=e.data,m=e.children,y=e.tag;c(y)?(d&&d.pre&&f++,s(e,f)&&me("Unknown custom element: <"+y+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?a.createElementNS(e.ns,y):a.createElement(y,e),b(e),g(e,m,t),c(d)&&x(e,t),v(n,e.elm,i),d&&d.pre&&f--):l(e.isComment)?(e.elm=a.createComment(e.text),v(n,e.elm,i)):(e.elm=a.createTextNode(e.text),v(n,e.elm,i))}}function p(e,t){c(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,y(e)?(x(e,t),b(e)):(Nr(e),t.push(e))}function v(e,t,n){c(e)&&(c(n)?a.parentNode(n)===e&&a.insertBefore(e,t,n):a.appendChild(e,t))}function g(e,t,n){if(Array.isArray(t)){T(t);for(var r=0;r<t.length;++r)d(t[r],n,e.elm,null,!0,t,r)}else h(e.text)&&a.appendChild(e.elm,a.createTextNode(String(e.text)))}function y(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return c(e.tag)}function x(e,n){for(var i=0;i<r.create.length;++i)r.create[i](Dr,e);c(t=e.data.hook)&&(c(t.create)&&t.create(Dr,e),c(t.insert)&&n.push(e))}function b(e){var t;if(c(t=e.fnScopeId))a.setStyleScope(e.elm,t);else for(var n=e;n;)c(t=n.context)&&c(t=t.$options._scopeId)&&a.setStyleScope(e.elm,t),n=n.parent;c(t=Rn)&&t!==e.context&&t!==e.fnContext&&c(t=t.$options._scopeId)&&a.setStyleScope(e.elm,t)}function w(e,t,n,r,i,a){for(;r<=i;++r)d(n[r],a,e,t,!1,n,r)}function M(e){var t,n,i=e.data;if(c(i))for(c(t=i.hook)&&c(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(c(t=e.children))for(n=0;n<e.children.length;++n)M(e.children[n])}function S(e,t,n){for(;t<=n;++t){var r=e[t];c(r)&&(c(r.tag)?(E(r),M(r)):o(r.elm))}}function E(e,t){if(c(t)||c(e.data)){var n,i=r.remove.length+1;for(c(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&o(e)}return n.listeners=t,n}(e.elm,i),c(n=e.componentInstance)&&c(n=n._vnode)&&c(n.data)&&E(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);c(n=e.data.hook)&&c(n=n.remove)?n(e,t):t()}else o(e.elm)}function T(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=r.key;c(i)&&(t[i]?me("Duplicate keys detected: '".concat(i,"'. This may cause an update error."),r.context):t[i]=!0)}}function A(e,t,n,r){for(var i=n;i<r;i++){var a=t[i];if(c(a)&&zr(e,a))return i}}function k(e,t,n,i,o,s){if(e!==t){c(t.elm)&&c(i)&&(t=i[o]=Re(t));var h=t.elm=e.elm;if(l(e.isAsyncPlaceholder))c(t.asyncFactory.resolved)?P(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(l(t.isStatic)&&l(e.isStatic)&&t.key===e.key&&(l(t.isCloned)||l(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,p=t.data;c(p)&&c(f=p.hook)&&c(f=f.prepatch)&&f(e,t);var v=e.children,m=t.children;if(c(p)&&y(t)){for(f=0;f<r.update.length;++f)r.update[f](e,t);c(f=p.hook)&&c(f=f.update)&&f(e,t)}u(t.text)?c(v)&&c(m)?v!==m&&function(e,t,n,r,i){var o,s,l,h=0,f=0,p=t.length-1,v=t[0],m=t[p],g=n.length-1,y=n[0],x=n[g],b=!i;for(T(n);h<=p&&f<=g;)u(v)?v=t[++h]:u(m)?m=t[--p]:zr(v,y)?(k(v,y,r,n,f),v=t[++h],y=n[++f]):zr(m,x)?(k(m,x,r,n,g),m=t[--p],x=n[--g]):zr(v,x)?(k(v,x,r,n,g),b&&a.insertBefore(e,v.elm,a.nextSibling(m.elm)),v=t[++h],x=n[--g]):zr(m,y)?(k(m,y,r,n,f),b&&a.insertBefore(e,m.elm,v.elm),m=t[--p],y=n[++f]):(u(o)&&(o=Ur(t,h,p)),u(s=c(y.key)?o[y.key]:A(y,t,h,p))?d(y,r,e,v.elm,!1,n,f):zr(l=t[s],y)?(k(l,y,r,n,f),t[s]=void 0,b&&a.insertBefore(e,l.elm,v.elm)):d(y,r,e,v.elm,!1,n,f),y=n[++f]);h>p?w(e,u(n[g+1])?null:n[g+1].elm,n,f,g,r):f>g&&S(t,h,p)}(h,v,m,n,s):c(m)?(T(m),c(e.text)&&a.setTextContent(h,""),w(h,null,m,0,m.length-1,n)):c(v)?S(v,0,v.length-1):c(e.text)&&a.setTextContent(h,""):e.text!==t.text&&a.setTextContent(h,t.text),c(p)&&c(f=p.hook)&&c(f=f.postpatch)&&f(e,t)}}}function L(e,t,n){if(l(n)&&c(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var R=!1,C=_("attrs,class,staticClass,staticStyle,key");function P(e,t,n,r){var i,a=t.tag,o=t.data,u=t.children;if(r=r||o&&o.pre,t.elm=e,l(t.isComment)&&c(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(!function(e,t,n){return c(t.tag)?0===t.tag.indexOf("vue-component")||!s(t,n)&&t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}(e,t,r))return!1;if(c(o)&&(c(i=o.hook)&&c(i=i.init)&&i(t,!0),c(i=t.componentInstance)))return p(t,n),!0;if(c(a)){if(c(u))if(e.hasChildNodes())if(c(i=o)&&c(i=i.domProps)&&c(i=i.innerHTML)){if(i!==e.innerHTML)return"undefined"==typeof console||R||(R=!0,console.warn("Parent: ",e),console.warn("server innerHTML: ",i),console.warn("client innerHTML: ",e.innerHTML)),!1}else{for(var h=!0,f=e.firstChild,d=0;d<u.length;d++){if(!f||!P(f,u[d],n,r)){h=!1;break}f=f.nextSibling}if(!h||f)return"undefined"==typeof console||R||(R=!0,console.warn("Parent: ",e),console.warn("Mismatching childNodes vs. VNodes: ",e.childNodes,u)),!1}else g(t,u,n);if(c(o)){var v=!1;for(var m in o)if(!C(m)){v=!0,x(t,n);break}!v&&o.class&&It(o.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,i){if(!u(t)){var o,s=!1,h=[];if(u(e))s=!0,d(t,h);else{var f=c(e.nodeType);if(!f&&zr(e,t))k(e,t,h,null,null,i);else{if(f){if(1===e.nodeType&&e.hasAttribute(G)&&(e.removeAttribute(G),n=!0),l(n)){if(P(e,t,h))return L(t,h,!0),e;me("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}o=e,e=new Ae(a.tagName(o).toLowerCase(),{},[],void 0,o)}var p=e.elm,v=a.parentNode(p);if(d(t,h,p._leaveCb?null:v,a.nextSibling(p)),c(t.parent))for(var m=t.parent,g=y(t);m;){for(var x=0;x<r.destroy.length;++x)r.destroy[x](m);if(m.elm=t.elm,g){for(var b=0;b<r.create.length;++b)r.create[b](Dr,m);var _=m.data.hook.insert;if(_.merged)for(var w=1;w<_.fns.length;w++)_.fns[w]()}else Nr(m);m=m.parent}c(v)?S([e],0,0):c(e.tag)&&M(e)}}return L(t,h,s),t.elm}c(e)&&M(e)}}({nodeOps:Or,modules:[Zr,ai,Di,Ui,Zi,Q?{create:Ma,activate:Ma,remove:function(e,t){!0!==e.data.show?xa(e,t):t()}}:{}].concat(qr)});ie&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Pa(e,"input")}));var Ea={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Ut(n,"postpatch",(function(){Ea.componentUpdated(e,t,n)})):Ta(e,t,n.context),e._vOptions=[].map.call(e.options,La)):("textarea"===n.tag||Cr(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Ra),e.addEventListener("compositionend",Ca),e.addEventListener("change",Ca),ie&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ta(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,La);i.some((function(e,t){return!B(e,r[t])}))&&(e.multiple?t.value.some((function(e){return ka(e,i)})):t.value!==t.oldValue&&ka(t.value,i))&&Pa(e,"change")}}};function Ta(e,t,n){Aa(e,t,n),(re||ae)&&setTimeout((function(){Aa(e,t,n)}),0)}function Aa(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var a,o,s=0,u=e.options.length;s<u;s++)if(o=e.options[s],i)a=H(r,La(o))>-1,o.selected!==a&&(o.selected=a);else if(B(La(o),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}else me('<select multiple v-model="'.concat(t.expression,'"> ')+"expects an Array value for its binding, but got ".concat(Object.prototype.toString.call(r).slice(8,-1)),n)}function ka(e,t){return t.every((function(t){return!B(t,e)}))}function La(e){return"_value"in e?e._value:e.value}function Ra(e){e.target.composing=!0}function Ca(e){e.target.composing&&(e.target.composing=!1,Pa(e.target,"input"))}function Pa(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Oa(e){return!e.componentInstance||e.data&&e.data.transition?e:Oa(e.componentInstance._vnode)}var Ia={model:Ea,show:{bind:function(e,t,n){var r=t.value,i=(n=Oa(n)).data&&n.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,ya(n,(function(){e.style.display=a}))):e.style.display=r?a:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=Oa(n)).data&&n.data.transition?(n.data.show=!0,r?ya(n,(function(){e.style.display=e.__vOriginalDisplay})):xa(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}}},Na={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Da(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Da(En(t.children)):e}function Fa(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var a in i)t[L(a)]=i[a];return t}function za(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var Ua=function(e){return e.tag||$t(e)},Ba=function(e){return"show"===e.name},Ha={name:"transition",props:Na,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Ua)).length){n.length>1&&me("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var r=this.mode;r&&"in-out"!==r&&"out-in"!==r&&me("invalid <transition> mode: "+r,this.$parent);var i=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return i;var a=Da(i);if(!a)return i;if(this._leaving)return za(e,i);var o="__transition-".concat(this._uid,"-");a.key=null==a.key?a.isComment?o+"comment":o+a.tag:h(a.key)?0===String(a.key).indexOf(o)?a.key:o+a.key:a.key;var s=(a.data||(a.data={})).transition=Fa(this),u=this._vnode,c=Da(u);if(a.data.directives&&a.data.directives.some(Ba)&&(a.data.show=!0),c&&c.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(a,c)&&!$t(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var l=c.data.transition=N({},s);if("out-in"===r)return this._leaving=!0,Ut(l,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),za(e,i);if("in-out"===r){if($t(a))return u;var f,d=function(){f()};Ut(s,"afterEnter",d),Ut(s,"enterCancelled",d),Ut(l,"delayLeave",(function(e){f=e}))}}return i}}},ja=N({tag:String,moveClass:String},Na);delete ja.mode;var Ga={props:ja,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Pn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],o=Fa(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))a.push(u),n[u.key]=u,(u.data||(u.data={})).transition=o;else{var c=u.componentOptions,l=c?c.Ctor.options.name||c.tag||"":u.tag;me("<transition-group> children must be keyed: <".concat(l,">"))}}if(r){for(var h=[],f=[],d=0;d<r.length;d++){var p=r[d];p.data.transition=o,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?h.push(p):f.push(p)}this.kept=e(t,null,h),this.removed=f}return e(t,null,a)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Va),e.forEach(Wa),e.forEach(qa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;ha(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(oa,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(oa,e),n._moveCb=null,fa(n,t))})}})))},methods:{hasMove:function(e,t){if(!na)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Qi(n,e)})),Ki(n,t),n.style.display="none",this.$el.appendChild(n);var r=va(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function Va(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Wa(e){e.data.newPos=e.elm.getBoundingClientRect()}function qa(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),a.transitionDuration="0s"}}var $a={Transition:Ha,TransitionGroup:Ga};ar.config.mustUseProp=pr,ar.config.isReservedTag=kr,ar.config.isReservedAttr=fr,ar.config.getTagNamespace=Lr,ar.config.isUnknownElement=function(e){if(!Q)return!0;if(kr(e))return!1;if(e=e.toLowerCase(),null!=Rr[e])return Rr[e];var t=document.createElement(e);return e.indexOf("-")>-1?Rr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Rr[e]=/HTMLUnknownElement/.test(t.toString())},N(ar.options.directives,Ia),N(ar.options.components,$a),ar.prototype.__patch__=Q?Sa:F,ar.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ke,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?me("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):me("Failed to mount component: template or render function not defined.",e)),Dn(e,"beforeMount"),r=q.performance&&dt?function(){var t=e._name,r=e._uid,i="vue-perf-start:".concat(r),a="vue-perf-end:".concat(r);dt(i);var o=e._render();dt(a),pt("vue ".concat(t," render"),i,a),dt(i),e._update(o,n),dt(a),pt("vue ".concat(t," patch"),i,a)}:function(){e._update(e._render(),n)},new Yn(e,r,F,{before:function(){e._isMounted&&!e._isDestroyed&&Dn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Dn(e,"mounted")),e}(this,e=e&&Q?Pr(e):void 0,t)},Q&&setTimeout((function(){q.devtools&&(fe?fe.emit("init",ar):console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==q.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")}),0);var Xa=/\{\{((?:.|\r?\n)+?)\}\}/g,Ya=/[-.*+?^${}()|[\]\/\\]/g,Za=A((function(e){var t=e[0].replace(Ya,"\\$&"),n=e[1].replace(Ya,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));function Ja(e,t){var n=t?Za(t):Xa;if(n.test(e)){for(var r,i,a,o=[],s=[],u=n.lastIndex=0;r=n.exec(e);){(i=r.index)>u&&(s.push(a=e.slice(u,i)),o.push(JSON.stringify(a)));var c=si(r[1].trim());o.push("_s(".concat(c,")")),s.push({"@binding":c}),u=i+r[0].length}return u<e.length&&(s.push(a=e.slice(u)),o.push(JSON.stringify(a))),{expression:o.join("+"),tokens:s}}}var Ka,Qa={staticKeys:["staticClass"],transformNode:function(e,t){var n=t.warn||ci,r=xi(e,"class");r&&Ja(r,t.delimiters)&&n('class="'.concat(r,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.',e.rawAttrsMap.class),r&&(e.staticClass=JSON.stringify(r));var i=yi(e,"class",!1);i&&(e.classBinding=i)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(t+="class:".concat(e.classBinding,",")),t}},eo={staticKeys:["staticStyle"],transformNode:function(e,t){var n=t.warn||ci,r=xi(e,"style");r&&(Ja(r,t.delimiters)&&n('style="'.concat(r,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.',e.rawAttrsMap.style),e.staticStyle=JSON.stringify(Bi(r)));var i=yi(e,"style",!1);i&&(e.styleBinding=i)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(t+="style:(".concat(e.styleBinding,"),")),t}},to=_("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),no=_("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),ro=_("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),io=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ao=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,oo="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat($.source,"]*"),so="((?:".concat(oo,"\\:)?").concat(oo,")"),uo=new RegExp("^<".concat(so)),co=/^\s*(\/?)>/,lo=new RegExp("^<\\/".concat(so,"[^>]*>")),ho=/^<!DOCTYPE [^>]+>/i,fo=/^<!\--/,po=/^<!\[/,vo=_("script,style,textarea",!0),mo={},go={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},yo=/&(?:lt|gt|quot|amp|#39);/g,xo=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,bo=_("pre,textarea",!0),_o=function(e,t){return e&&bo(e)&&"\n"===t[0]};function wo(e,t){var n=t?xo:yo;return e.replace(n,(function(e){return go[e]}))}var Mo,So,Eo,To,Ao,ko,Lo,Ro,Co,Po=/^@|^v-on:/,Oo=/^v-|^@|^:|^#/,Io=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,No=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Do=/^\(|\)$/g,Fo=/^\[.*\]$/,zo=/:(.*)$/,Uo=/^:|^\.|^v-bind:/,Bo=/\.[^.\]]+(?=[^\]]*$)/g,Ho=/^v-slot(:|$)|^#/,jo=/[\r\n]/,Go=/[ \f\t\r\n]+/g,Vo=/[\s"'<>\/=]/,Wo=A((function(e){return(Ka=Ka||document.createElement("div")).innerHTML=e,Ka.textContent})),qo="_empty_";function $o(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:Qo(t),rawAttrsMap:{},parent:n,children:[]}}function Xo(e,t){var n;!function(e){var t=yi(e,"key");if(t){if("template"===e.tag&&Mo("<template> cannot be keyed. Place the key on real elements instead.",gi(e,"key")),e.for){var n=e.iterator2||e.iterator1,r=e.parent;n&&n===t&&r&&"transition-group"===r.tag&&Mo("Do not use v-for index as key on <transition-group> children, this is the same as not using keys.",gi(e,"key"),!0)}e.key=t}}(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=yi(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?((t=xi(e,"scope"))&&Mo('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',e.rawAttrsMap.scope,!0),e.slotScope=t||xi(e,"slot-scope")):(t=xi(e,"slot-scope"))&&(e.attrsMap["v-for"]&&Mo("Ambiguous combined usage of slot-scope and v-for on <".concat(e.tag,"> ")+"(v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",e.rawAttrsMap["slot-scope"],!0),e.slotScope=t);var n=yi(e,"slot");if(n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||fi(e,"slot",n,gi(e,"slot"))),"template"===e.tag){var r=bi(e,Ho);if(r){(e.slotTarget||e.slotScope)&&Mo("Unexpected mixed usage of different slot syntaxes.",e),e.parent&&!Co(e.parent)&&Mo("<template v-slot> can only appear at the root level inside the receiving component",e);var i=Jo(r),a=i.name,o=i.dynamic;e.slotTarget=a,e.slotTargetDynamic=o,e.slotScope=r.value||qo}}else{var s=bi(e,Ho);if(s){Co(e)||Mo("v-slot can only be used on components or <template>.",s),(e.slotScope||e.slotTarget)&&Mo("Unexpected mixed usage of different slot syntaxes.",e),e.scopedSlots&&Mo("To avoid scope ambiguity, the default slot should also use <template> syntax when there are other named slots.",s);var u=e.scopedSlots||(e.scopedSlots={}),c=Jo(s),l=c.name,h=c.dynamic,f=u[l]=$o("template",[],e);f.slotTarget=l,f.slotTargetDynamic=h,f.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=f,!0})),f.slotScope=s.value||qo,e.children=[],e.plain=!1}}}(e),"slot"===(n=e).tag&&(n.slotName=yi(n,"name"),n.key&&Mo("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.",gi(n,"key"))),function(e){var t;(t=yi(e,"is"))&&(e.component=t),null!=xi(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<Eo.length;r++)e=Eo[r](e,t)||e;return function(e){var t,n,r,i,a,o,s,u,c=e.attrsList;for(t=0,n=c.length;t<n;t++)if(r=i=c[t].name,a=c[t].value,Oo.test(r))if(e.hasBindings=!0,(o=Ko(r.replace(Oo,"")))&&(r=r.replace(Bo,"")),Uo.test(r))r=r.replace(Uo,""),a=si(a),(u=Fo.test(r))&&(r=r.slice(1,-1)),0===a.trim().length&&Mo('The value for a v-bind expression cannot be empty. Found in "v-bind:'.concat(r,'"')),o&&(o.prop&&!u&&"innerHtml"===(r=L(r))&&(r="innerHTML"),o.camel&&!u&&(r=L(r)),o.sync&&(s=Mi(a,"$event"),u?mi(e,'"update:"+('.concat(r,")"),s,null,!1,Mo,c[t],!0):(mi(e,"update:".concat(L(r)),s,null,!1,Mo,c[t]),P(r)!==L(r)&&mi(e,"update:".concat(P(r)),s,null,!1,Mo,c[t])))),o&&o.prop||!e.component&&Lo(e.tag,e.attrsMap.type,r)?hi(e,r,a,c[t],u):fi(e,r,a,c[t],u);else if(Po.test(r))r=r.replace(Po,""),(u=Fo.test(r))&&(r=r.slice(1,-1)),mi(e,r,a,o,!1,Mo,c[t],u);else{var l=(r=r.replace(Oo,"")).match(zo),h=l&&l[1];u=!1,h&&(r=r.slice(0,-(h.length+1)),Fo.test(h)&&(h=h.slice(1,-1),u=!0)),pi(e,r,i,a,h,u,o,c[t]),"model"===r&&ns(e,a)}else Ja(a,So)&&Mo("".concat(r,'="').concat(a,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.',c[t]),fi(e,r,JSON.stringify(a),c[t]),!e.component&&"muted"===r&&Lo(e.tag,e.attrsMap.type,r)&&hi(e,r,"true",c[t])}(e),e}function Yo(e){var t;if(t=xi(e,"v-for")){var n=function(e){var t=e.match(Io);if(t){var n={};n.for=t[2].trim();var r=t[1].trim().replace(Do,""),i=r.match(No);return i?(n.alias=r.replace(No,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}(t);n?N(e,n):Mo("Invalid v-for expression: ".concat(t),e.rawAttrsMap["v-for"])}}function Zo(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Jo(e){var t=e.name.replace(Ho,"");return t||("#"!==e.name[0]?t="default":Mo("v-slot shorthand syntax requires a slot name.",e)),Fo.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'.concat(t,'"'),dynamic:!1}}function Ko(e){var t=e.match(Bo);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function Qo(e){for(var t={},n=0,r=e.length;n<r;n++)!t[e[n].name]||re||ae||Mo("duplicate attribute: "+e[n].name,e[n]),t[e[n].name]=e[n].value;return t}var es=/^xmlns:NS\d+/,ts=/^NS\d+:/;function ns(e,t){for(var n=e;n;)n.for&&n.alias===t&&Mo("<".concat(e.tag,' v-model="').concat(t,'">: ')+"You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.",e.rawAttrsMap["v-model"]),n=n.parent}function rs(e){return $o(e.tag,e.attrsList.slice(),e.parent)}var is,as,os,ss=[Qa,eo,{preTransformNode:function(e,t){if("input"===e.tag){var n,r=e.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=yi(e,"type")),r.type||n||!r["v-bind"]||(n="(".concat(r["v-bind"],").type")),n){var i=xi(e,"v-if",!0),a=i?"&&(".concat(i,")"):"",o=null!=xi(e,"v-else",!0),s=xi(e,"v-else-if",!0),u=rs(e);Yo(u),di(u,"type","checkbox"),Xo(u,t),u.processed=!0,u.if="(".concat(n,")==='checkbox'")+a,Zo(u,{exp:u.if,block:u});var c=rs(e);xi(c,"v-for",!0),di(c,"type","radio"),Xo(c,t),Zo(u,{exp:"(".concat(n,")==='radio'")+a,block:c});var l=rs(e);return xi(l,"v-for",!0),di(l,":type",n),Xo(l,t),Zo(u,{exp:i,block:l}),o?u.else=!0:s&&(u.elseif=s),u}}}}],us={expectHTML:!0,modules:ss,directives:{model:function(e,t,n){ii=n;var r=t.value,i=t.modifiers,a=e.tag,o=e.attrsMap.type;if("input"===a&&"file"===o&&ii("<".concat(e.tag,' v-model="').concat(r,'" type="file">:\n')+"File inputs are read only. Use a v-on:change listener instead.",e.rawAttrsMap["v-model"]),e.component)return wi(e,r,i),!1;if("select"===a)!function(e,t,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(r?"_n(val)":"val","})"),a="var $$selectedVal = ".concat(i,";");mi(e,"change",a="".concat(a," ").concat(Mi(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),null,!0)}(e,r,i);else if("input"===a&&"checkbox"===o)!function(e,t,n){var r=n&&n.number,i=yi(e,"value")||"null",a=yi(e,"true-value")||"true",o=yi(e,"false-value")||"false";hi(e,"checked","Array.isArray(".concat(t,")")+"?_i(".concat(t,",").concat(i,")>-1")+("true"===a?":(".concat(t,")"):":_q(".concat(t,",").concat(a,")"))),mi(e,"change","var $$a=".concat(t,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(a,"):(").concat(o,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+i+")":i,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Mi(t,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Mi(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Mi(t,"$$c"),"}"),null,!0)}(e,r,i);else if("input"===a&&"radio"===o)!function(e,t,n){var r=n&&n.number,i=yi(e,"value")||"null";i=r?"_n(".concat(i,")"):i,hi(e,"checked","_q(".concat(t,",").concat(i,")")),mi(e,"change",Mi(t,i),null,!0)}(e,r,i);else if("input"===a||"textarea"===a)!function(e,t,n){var r=e.attrsMap.type,i=e.attrsMap["v-bind:value"]||e.attrsMap[":value"],a=e.attrsMap["v-bind:type"]||e.attrsMap[":type"];if(i&&!a){var o=e.attrsMap["v-bind:value"]?"v-bind:value":":value";ii("".concat(o,'="').concat(i,'" conflicts with v-model on the same element ')+"because the latter already expands to a value binding internally",e.rawAttrsMap[o])}var s=n||{},u=s.lazy,c=s.number,l=s.trim,h=!u&&"range"!==r,f=u?"change":"range"===r?"__r":"input",d="$event.target.value";l&&(d="$event.target.value.trim()"),c&&(d="_n(".concat(d,")"));var p=Mi(t,d);h&&(p="if($event.target.composing)return;".concat(p)),hi(e,"value","(".concat(t,")")),mi(e,f,p,null,!0),(l||c)&&mi(e,"blur","$forceUpdate()")}(e,r,i);else{if(!q.isReservedTag(a))return wi(e,r,i),!1;ii("<".concat(e.tag,' v-model="').concat(r,'">: ')+"v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",e.rawAttrsMap["v-model"])}return!0},text:function(e,t){t.value&&hi(e,"textContent","_s(".concat(t.value,")"),t)},html:function(e,t){t.value&&hi(e,"innerHTML","_s(".concat(t.value,")"),t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:to,mustUseProp:pr,canBeLeftOpenTag:no,isReservedTag:kr,getTagNamespace:Lr,staticKeys:(os=ss,os.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(","))},cs=A((function(e){return _("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function ls(e,t){e&&(is=cs(t.staticKeys||""),as=t.isReservedTag||z,hs(e),fs(e,!1))}function hs(e){if(e.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||w(e.tag)||!as(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(is))))}(e),1===e.type){if(!as(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];hs(r),r.static||(e.static=!1)}if(e.ifConditions)for(var i=1,a=e.ifConditions.length;i<a;i++){var o=e.ifConditions[i].block;hs(o),o.static||(e.static=!1)}}}function fs(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)fs(e.children[n],t||!!e.for);if(e.ifConditions)for(var i=1,a=e.ifConditions.length;i<a;i++)fs(e.ifConditions[i].block,t)}}var ds=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,ps=/\([^)]*?\);*$/,vs=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,ms={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},gs={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ys=function(e){return"if(".concat(e,")return null;")},xs={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ys("$event.target !== $event.currentTarget"),ctrl:ys("!$event.ctrlKey"),shift:ys("!$event.shiftKey"),alt:ys("!$event.altKey"),meta:ys("!$event.metaKey"),left:ys("'button' in $event && $event.button !== 0"),middle:ys("'button' in $event && $event.button !== 1"),right:ys("'button' in $event && $event.button !== 2")};function bs(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var a in e){var o=_s(e[a]);e[a]&&e[a].dynamic?i+="".concat(a,",").concat(o,","):r+='"'.concat(a,'":').concat(o,",")}return r="{".concat(r.slice(0,-1),"}"),i?n+"_d(".concat(r,",[").concat(i.slice(0,-1),"])"):n+r}function _s(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map((function(e){return _s(e)})).join(","),"]");var t=vs.test(e.value),n=ds.test(e.value),r=vs.test(e.value.replace(ps,""));if(e.modifiers){var i="",a="",o=[];for(var s in e.modifiers)xs[s]?(a+=xs[s],ms[s]&&o.push(s)):"exact"===s?function(){var t=e.modifiers;a+=ys(["ctrl","shift","alt","meta"].filter((function(e){return!t[e]})).map((function(e){return"$event.".concat(e,"Key")})).join("||"))}():o.push(s);o.length&&(i+=function(e){return"if(!$event.type.indexOf('key')&&"+"".concat(e.map(ws).join("&&"),")return null;")}(o)),a&&(i+=a);var u=t?"return ".concat(e.value,".apply(null, arguments)"):n?"return (".concat(e.value,").apply(null, arguments)"):r?"return ".concat(e.value):e.value;return"function($event){".concat(i).concat(u,"}")}return t||n?e.value:"function($event){".concat(r?"return ".concat(e.value):e.value,"}")}function ws(e){var t=parseInt(e,10);if(t)return"$event.keyCode!==".concat(t);var n=ms[e],r=gs[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}var Ms={on:function(e,t){t.modifiers&&me("v-on without argument does not support modifiers."),e.wrapListeners=function(e){return"_g(".concat(e,",").concat(t.value,")")}},bind:function(e,t){e.wrapData=function(n){return"_b(".concat(n,",'").concat(e.tag,"',").concat(t.value,",").concat(t.modifiers&&t.modifiers.prop?"true":"false").concat(t.modifiers&&t.modifiers.sync?",true":"",")")}},cloak:F},Ss=function e(t){r(this,e),this.options=t,this.warn=t.warn||ci,this.transforms=li(t.modules,"transformCode"),this.dataGenFns=li(t.modules,"genData"),this.directives=N(N({},Ms),t.directives);var n=t.isReservedTag||z;this.maybeComponent=function(e){return!!e.component||!n(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Es(e,t){var n=new Ss(t),r=e?"script"===e.tag?"null":Ts(e,n):'_c("div")';return{render:"with(this){return ".concat(r,"}"),staticRenderFns:n.staticRenderFns}}function Ts(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return As(e,t);if(e.once&&!e.onceProcessed)return ks(e,t);if(e.for&&!e.forProcessed)return Cs(e,t);if(e.if&&!e.ifProcessed)return Ls(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=Ns(e,t),i="_t(".concat(n).concat(r?",function(){return ".concat(r,"}"):""),a=e.attrs||e.dynamicAttrs?zs((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:L(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];return!a&&!o||r||(i+=",null"),a&&(i+=",".concat(a)),o&&(i+="".concat(a?"":",null",",").concat(o)),i+")"}(e,t);var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:Ns(t,n,!0);return"_c(".concat(e,",").concat(Ps(t,n)).concat(r?",".concat(r):"",")")}(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=Ps(e,t));var i=e.inlineTemplate?null:Ns(e,t,!0);n="_c('".concat(e.tag,"'").concat(r?",".concat(r):"").concat(i?",".concat(i):"",")")}for(var a=0;a<t.transforms.length;a++)n=t.transforms[a](e,n);return n}return Ns(e,t)||"void 0"}function As(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return ".concat(Ts(e,t),"}")),t.pre=n,"_m(".concat(t.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function ks(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Ls(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o(".concat(Ts(e,t),",").concat(t.onceId++,",").concat(n,")"):(t.warn("v-once can only be used inside v-for that is keyed. ",e.rawAttrsMap["v-once"]),Ts(e,t))}return As(e,t)}function Ls(e,t,n,r){return e.ifProcessed=!0,Rs(e.ifConditions.slice(),t,n,r)}function Rs(e,t,n,r){if(!e.length)return r||"_e()";var i=e.shift();return i.exp?"(".concat(i.exp,")?").concat(a(i.block),":").concat(Rs(e,t,n,r)):"".concat(a(i.block));function a(e){return n?n(e,t):e.once?ks(e,t):Ts(e,t)}}function Cs(e,t,n,r){var i=e.for,a=e.alias,o=e.iterator1?",".concat(e.iterator1):"",s=e.iterator2?",".concat(e.iterator2):"";return t.maybeComponent(e)&&"slot"!==e.tag&&"template"!==e.tag&&!e.key&&t.warn("<".concat(e.tag,' v-for="').concat(a," in ").concat(i,'">: component lists rendered with ')+"v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.",e.rawAttrsMap["v-for"],!0),e.forProcessed=!0,"".concat(r||"_l","((").concat(i,"),")+"function(".concat(a).concat(o).concat(s,"){")+"return ".concat((n||Ts)(e,t))+"})"}function Ps(e,t){var n="{",r=function(e,t){var n=e.directives;if(n){var r,i,a,o,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){a=n[r],o=!0;var c=t.directives[a.name];c&&(o=!!c(e,a,t.warn)),o&&(u=!0,s+='{name:"'.concat(a.name,'",rawName:"').concat(a.rawName,'"').concat(a.value?",value:(".concat(a.value,"),expression:").concat(JSON.stringify(a.value)):"").concat(a.arg?",arg:".concat(a.isDynamicArg?a.arg:'"'.concat(a.arg,'"')):"").concat(a.modifiers?",modifiers:".concat(JSON.stringify(a.modifiers)):"","},"))}return u?s.slice(0,-1)+"]":void 0}}(e,t);r&&(n+=r+","),e.key&&(n+="key:".concat(e.key,",")),e.ref&&(n+="ref:".concat(e.ref,",")),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'.concat(e.tag,'",'));for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:".concat(zs(e.attrs),",")),e.props&&(n+="domProps:".concat(zs(e.props),",")),e.events&&(n+="".concat(bs(e.events,!1),",")),e.nativeEvents&&(n+="".concat(bs(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(n+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(n+="".concat(function(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||Os(n)})),i=!!e.if;if(!r)for(var a=e.parent;a;){if(a.slotScope&&a.slotScope!==qo||a.for){r=!0;break}a.if&&(i=!0),a=a.parent}var o=Object.keys(t).map((function(e){return Is(t[e],n)})).join(",");return"scopedSlots:_u([".concat(o,"]").concat(r?",null,true":"").concat(!r&&i?",null,false,".concat(function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(o)):"",")")}(e,e.scopedSlots,t),",")),e.model&&(n+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var a=function(e,t){var n=e.children[0];if(1===e.children.length&&1===n.type||t.warn("Inline-template components must have exactly one child element.",{start:e.start}),n&&1===n.type){var r=Es(n,t.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map((function(e){return"function(){".concat(e,"}")})).join(","),"]}")}}(e,t);a&&(n+="".concat(a,","))}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b(".concat(n,',"').concat(e.tag,'",').concat(zs(e.dynamicAttrs),")")),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function Os(e){return 1===e.type&&("slot"===e.tag||e.children.some(Os))}function Is(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return Ls(e,t,Is,"null");if(e.for&&!e.forProcessed)return Cs(e,t,Is);var r=e.slotScope===qo?"":String(e.slotScope),i="function(".concat(r,"){")+"return ".concat("template"===e.tag?e.if&&n?"(".concat(e.if,")?").concat(Ns(e,t)||"undefined",":undefined"):Ns(e,t)||"undefined":Ts(e,t),"}"),a=r?"":",proxy:true";return"{key:".concat(e.slotTarget||'"default"',",fn:").concat(i).concat(a,"}")}function Ns(e,t,n,r,i){var a=e.children;if(a.length){var o=a[0];if(1===a.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var s=n?t.maybeComponent(o)?",1":",0":"";return"".concat((r||Ts)(o,t)).concat(s)}var u=n?function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(Ds(i)||i.ifConditions&&i.ifConditions.some((function(e){return Ds(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(a,t.maybeComponent):0,c=i||Fs;return"[".concat(a.map((function(e){return c(e,t)})).join(","),"]").concat(u?",".concat(u):"")}}function Ds(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Fs(e,t){return 1===e.type?Ts(e,t):3===e.type&&e.isComment?function(e){return"_e(".concat(JSON.stringify(e.text),")")}(e):"_v(".concat(2===(n=e).type?n.expression:Us(JSON.stringify(n.text)),")");var n}function zs(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],a=Us(i.value);i.dynamic?n+="".concat(i.name,",").concat(a,","):t+='"'.concat(i.name,'":').concat(a,",")}return t="{".concat(t.slice(0,-1),"}"),n?"_d(".concat(t,",[").concat(n.slice(0,-1),"])"):t}function Us(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Bs=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Hs=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),js=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function Gs(e,t){e&&Vs(e,t)}function Vs(e,t){if(1===e.type){for(var n in e.attrsMap)if(Oo.test(n)){var r=e.attrsMap[n];if(r){var i=e.rawAttrsMap[n];"v-for"===n?qs(e,'v-for="'.concat(r,'"'),t,i):"v-slot"===n||"#"===n[0]?Ys(r,"".concat(n,'="').concat(r,'"'),t,i):Po.test(n)?Ws(r,"".concat(n,'="').concat(r,'"'),t,i):Xs(r,"".concat(n,'="').concat(r,'"'),t,i)}}if(e.children)for(var a=0;a<e.children.length;a++)Vs(e.children[a],t)}else 2===e.type&&Xs(e.expression,e.text,t,e)}function Ws(e,t,n,r){var i=e.replace(js,""),a=i.match(Hs);a&&"$"!==i.charAt(a.index-1)&&n("avoid using JavaScript unary operator as property name: "+'"'.concat(a[0],'" in expression ').concat(t.trim()),r),Xs(e,t,n,r)}function qs(e,t,n,r){Xs(e.for||"",t,n,r),$s(e.alias,"v-for alias",t,n,r),$s(e.iterator1,"v-for iterator",t,n,r),$s(e.iterator2,"v-for iterator",t,n,r)}function $s(e,t,n,r,i){if("string"==typeof e)try{new Function("var ".concat(e,"=_"))}catch(a){r("invalid ".concat(t,' "').concat(e,'" in expression: ').concat(n.trim()),i)}}function Xs(e,t,n,r){try{new Function("return ".concat(e))}catch(a){var i=e.replace(js,"").match(Bs);n(i?"avoid using JavaScript keyword as property name: "+'"'.concat(i[0],'"\n  Raw expression: ').concat(t.trim()):"invalid expression: ".concat(a.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(t.trim(),"\n"),r)}}function Ys(e,t,n,r){try{new Function(e,"")}catch(i){n("invalid function parameter expression: ".concat(i.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(t.trim(),"\n"),r)}}function Zs(e,t){var n="";if(t>0)for(;1&t&&(n+=e),!((t>>>=1)<=0);)e+=e;return n}function Js(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),F}}function Ks(e){var t=Object.create(null);return function(n,r,i){var a=(r=N({},r)).warn||me;delete r.warn;try{new Function("return 1")}catch(e){e.toString().match(/unsafe-eval|CSP/)&&a("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var o=r.delimiters?String(r.delimiters)+n:n;if(t[o])return t[o];var s=e(n,r);s.errors&&s.errors.length&&(r.outputSourceRange?s.errors.forEach((function(e){a("Error compiling template:\n\n".concat(e.msg,"\n\n")+function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=e.split(/\r?\n/),i=0,a=[],o=0;o<r.length;o++)if((i+=r[o].length+1)>=t){for(var s=o-2;s<=o+2||n>i;s++)if(!(s<0||s>=r.length)){a.push("".concat(s+1).concat(Zs(" ",3-String(s+1).length),"|  ").concat(r[s]));var u=r[s].length;if(s===o){var c=t-(i-u)+1,l=n>i?u-c:n-t;a.push("   |  "+Zs(" ",c)+Zs("^",l))}else if(s>o){if(n>i){var h=Math.min(n-i,u);a.push("   |  "+Zs("^",h))}i+=u+1}}break}return a.join("\n")}(n,e.start,e.end),i)})):a("Error compiling template:\n\n".concat(n,"\n\n")+s.errors.map((function(e){return"- ".concat(e)})).join("\n")+"\n",i)),s.tips&&s.tips.length&&(r.outputSourceRange?s.tips.forEach((function(e){return ge(e.msg,i)})):s.tips.forEach((function(e){return ge(e,i)})));var u={},c=[];return u.render=Js(s.render,c),u.staticRenderFns=s.staticRenderFns.map((function(e){return Js(e,c)})),s.errors&&s.errors.length||!c.length||a("Failed to generate render function:\n\n"+c.map((function(e){var t=e.err,n=e.code;return"".concat(t.toString()," in\n\n").concat(n,"\n")})).join("\n"),i),t[o]=u}}var Qs,eu,tu=(Qs=function(e,t){var n=function(e,t){Mo=t.warn||ci,ko=t.isPreTag||z,Lo=t.mustUseProp||z,Ro=t.getTagNamespace||z;var n=t.isReservedTag||z;Co=function(e){return!(!(e.component||e.attrsMap[":is"]||e.attrsMap["v-bind:is"])&&(e.attrsMap.is?n(e.attrsMap.is):n(e.tag)))},Eo=li(t.modules,"transformNode"),To=li(t.modules,"preTransformNode"),Ao=li(t.modules,"postTransformNode"),So=t.delimiters;var r,i,a=[],o=!1!==t.preserveWhitespace,s=t.whitespace,u=!1,c=!1,l=!1;function h(e,t){l||(l=!0,Mo(e,t))}function f(e){if(d(e),u||e.processed||(e=Xo(e,t)),a.length||e===r||(r.if&&(e.elseif||e.else)?(p(e),Zo(r,{exp:e.elseif,block:e})):h("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.",{start:e.start})),i&&!e.forbidden)if(e.elseif||e.else)o=e,s=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];" "!==e[t].text&&Mo('text "'.concat(e[t].text.trim(),'" between v-if and v-else(-if) ')+"will be ignored.",e[t]),e.pop()}}(i.children),s&&s.if?Zo(s,{exp:o.elseif,block:o}):Mo("v-".concat(o.elseif?'else-if="'+o.elseif+'"':"else"," ")+"used on element <".concat(o.tag,"> without corresponding v-if."),o.rawAttrsMap[o.elseif?"v-else-if":"v-else"]);else{if(e.slotScope){var n=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=e}i.children.push(e),e.parent=i}var o,s;e.children=e.children.filter((function(e){return!e.slotScope})),d(e),e.pre&&(u=!1),ko(e.tag)&&(c=!1);for(var l=0;l<Ao.length;l++)Ao[l](e,t)}function d(e){if(!c)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}function p(e){"slot"!==e.tag&&"template"!==e.tag||h("Cannot use <".concat(e.tag,"> as component root element because it may ")+"contain multiple nodes.",{start:e.start}),e.attrsMap.hasOwnProperty("v-for")&&h("Cannot use v-for on stateful component root element because it renders multiple elements.",e.rawAttrsMap["v-for"])}return function(e,t){for(var n,r,i=[],a=t.expectHTML,o=t.isUnaryTag||z,s=t.canBeLeftOpenTag||z,u=0;e;){if(n=e,r&&vo(r))!function(){var n=0,i=r.toLowerCase(),a=mo[i]||(mo[i]=new RegExp("([\\s\\S]*?)(</"+i+"[^>]*>)","i")),o=e.replace(a,(function(e,r,a){return n=a.length,vo(i)||"noscript"===i||(r=r.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),_o(i,r)&&(r=r.slice(1)),t.chars&&t.chars(r),""}));u+=e.length-o.length,e=o,w(i,u-n,u)}();else{var c=e.indexOf("<");if(0===c){if(fo.test(e)){var l=e.indexOf("--\x3e");if(l>=0){t.shouldKeepComment&&t.comment(e.substring(4,l),u,u+l+3),x(l+3);continue}}if(po.test(e)){var h=e.indexOf("]>");if(h>=0){x(h+2);continue}}var f=e.match(ho);if(f){x(f[0].length);continue}var d=e.match(lo);if(d){var p=u;x(d[0].length),w(d[1],p,u);continue}var v=b();if(v){_(v),_o(v.tagName,e)&&x(1);continue}}var m=void 0,g=void 0,y=void 0;if(c>=0){for(g=e.slice(c);!(lo.test(g)||uo.test(g)||fo.test(g)||po.test(g)||(y=g.indexOf("<",1))<0);)c+=y,g=e.slice(c);m=e.substring(0,c)}c<0&&(m=e),m&&x(m.length),t.chars&&m&&t.chars(m,u-m.length,u)}if(e===n){t.chars&&t.chars(e),!i.length&&t.warn&&t.warn('Mal-formatted tag at end of template: "'.concat(e,'"'),{start:u+e.length});break}}function x(t){u+=t,e=e.substring(t)}function b(){var t=e.match(uo);if(t){var n,r,i={tagName:t[1],attrs:[],start:u};for(x(t[0].length);!(n=e.match(co))&&(r=e.match(ao)||e.match(io));)r.start=u,x(r[0].length),r.end=u,i.attrs.push(r);if(n)return i.unarySlash=n[1],x(n[0].length),i.end=u,i}}function _(e){var n=e.tagName,u=e.unarySlash;a&&("p"===r&&ro(n)&&w(r),s(n)&&r===n&&w(n));for(var c=o(n)||!!u,l=e.attrs.length,h=new Array(l),f=0;f<l;f++){var d=e.attrs[f],p=d[3]||d[4]||d[5]||"",v="a"===n&&"href"===d[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;h[f]={name:d[1],value:wo(p,v)},t.outputSourceRange&&(h[f].start=d.start+d[0].match(/^\s*/).length,h[f].end=d.end)}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:h,start:e.start,end:e.end}),r=n),t.start&&t.start(n,h,c,e.start,e.end)}function w(e,n,a){var o,s;if(null==n&&(n=u),null==a&&(a=u),e)for(s=e.toLowerCase(),o=i.length-1;o>=0&&i[o].lowerCasedTag!==s;o--);else o=0;if(o>=0){for(var c=i.length-1;c>=o;c--)(c>o||!e&&t.warn)&&t.warn("tag <".concat(i[c].tag,"> has no matching end tag."),{start:i[c].start,end:i[c].end}),t.end&&t.end(i[c].tag,n,a);i.length=o,r=o&&i[o-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,a):"p"===s&&(t.start&&t.start(e,[],!1,n,a),t.end&&t.end(e,n,a))}w()}(e,{warn:Mo,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,n,o,s,l){var h=i&&i.ns||Ro(e);re&&"svg"===h&&(n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];es.test(r.name)||(r.name=r.name.replace(ts,""),t.push(r))}return t}(n));var d,v=$o(e,n,i);h&&(v.ns=h),t.outputSourceRange&&(v.start=s,v.end=l,v.rawAttrsMap=v.attrsList.reduce((function(e,t){return e[t.name]=t,e}),{})),n.forEach((function(e){Vo.test(e.name)&&Mo("Invalid dynamic argument expression: attribute names cannot contain spaces, quotes, <, >, / or =.",{start:e.start+e.name.indexOf("["),end:e.start+e.name.length})})),"style"!==(d=v).tag&&("script"!==d.tag||d.attrsMap.type&&"text/javascript"!==d.attrsMap.type)||he()||(v.forbidden=!0,Mo("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as "+"<".concat(e,">")+", as they will not be parsed.",{start:v.start}));for(var m=0;m<To.length;m++)v=To[m](v,t)||v;u||(function(e){null!=xi(e,"v-pre")&&(e.pre=!0)}(v),v.pre&&(u=!0)),ko(v.tag)&&(c=!0),u?function(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}(v):v.processed||(Yo(v),function(e){var t=xi(e,"v-if");if(t)e.if=t,Zo(e,{exp:t,block:e});else{null!=xi(e,"v-else")&&(e.else=!0);var n=xi(e,"v-else-if");n&&(e.elseif=n)}}(v),function(e){null!=xi(e,"v-once")&&(e.once=!0)}(v)),r||p(r=v),o?f(v):(i=v,a.push(v))},end:function(e,n,r){var o=a[a.length-1];a.length-=1,i=a[a.length-1],t.outputSourceRange&&(o.end=r),f(o)},chars:function(n,r,a){if(i){if(!re||"textarea"!==i.tag||i.attrsMap.placeholder!==n){var l,f,d,p=i.children;(n=c||n.trim()?"script"===(l=i).tag||"style"===l.tag?n:Wo(n):p.length?s?"condense"===s&&jo.test(n)?"":" ":o?" ":"":"")&&(c||"condense"!==s||(n=n.replace(Go," ")),!u&&" "!==n&&(f=Ja(n,So))?d={type:2,expression:f.expression,tokens:f.tokens,text:n}:" "===n&&p.length&&" "===p[p.length-1].text||(d={type:3,text:n}),d&&(t.outputSourceRange&&(d.start=r,d.end=a),p.push(d)))}}else n===e?h("Component template requires a root element, rather than just text.",{start:r}):(n=n.trim())&&h('text "'.concat(n,'" outside root element will be ignored.'),{start:r})},comment:function(e,n,r){if(i){var a={type:3,text:e,isComment:!0};t.outputSourceRange&&(a.start=n,a.end=r),i.children.push(a)}}}),r}(e.trim(),t);!1!==t.optimize&&ls(n,t);var r=Es(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(e){function t(t,n){var r=Object.create(e),i=[],a=[],o=function(e,t,n){(n?a:i).push(e)};if(n){if(n.outputSourceRange){var s=t.match(/^\s*/)[0].length;o=function(e,t,n){var r={msg:e};t&&(null!=t.start&&(r.start=t.start+s),null!=t.end&&(r.end=t.end+s)),(n?a:i).push(r)}}for(var u in n.modules&&(r.modules=(e.modules||[]).concat(n.modules)),n.directives&&(r.directives=N(Object.create(e.directives||null),n.directives)),n)"modules"!==u&&"directives"!==u&&(r[u]=n[u])}r.warn=o;var c=Qs(t.trim(),r);return Gs(c.ast,o),c.errors=i,c.tips=a,c}return{compile:t,compileToFunctions:Ks(t)}}),nu=tu(us),ru=(nu.compile,nu.compileToFunctions);function iu(e){return(eu=eu||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',eu.innerHTML.indexOf("&#10;")>0}var au=!!Q&&iu(!1),ou=!!Q&&iu(!0),su=A((function(e){var t=Pr(e);return t&&t.innerHTML})),uu=ar.prototype.$mount;ar.prototype.$mount=function(e,t){if((e=e&&Pr(e))===document.body||e===document.documentElement)return me("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&((r=su(r))||me("Template element not found or is empty: ".concat(n.template),this));else{if(!r.nodeType)return me("invalid template option:"+r,this),this;r=r.innerHTML}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(r){q.performance&&dt&&dt("compile");var i=ru(r,{outputSourceRange:!0,shouldDecodeNewlines:au,shouldDecodeNewlinesForHref:ou,delimiters:n.delimiters,comments:n.comments},this),a=i.render,o=i.staticRenderFns;n.render=a,n.staticRenderFns=o,q.performance&&dt&&(dt("compile end"),pt("vue ".concat(this._name," compile"),"compile","compile end"))}}return uu.call(this,e,t)},ar.compile=ru;var cu=ar;function lu(e,t){for(var n in t)e[n]=t[n];return e}var hu=/[!'()*]/g,fu=function(e){return"%"+e.charCodeAt(0).toString(16)},du=/%2C/g,pu=function(e){return encodeURIComponent(e).replace(hu,fu).replace(du,",")};function vu(e){try{return decodeURIComponent(e)}catch(e){}return e}var mu=function(e){return null==e||"object"===o(e)?e:String(e)};function gu(e){var t={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=vu(n.shift()),i=n.length>0?vu(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function yu(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return pu(t);if(Array.isArray(n)){var r=[];return n.forEach((function(e){void 0!==e&&(null===e?r.push(pu(t)):r.push(pu(t)+"="+pu(e)))})),r.join("&")}return pu(t)+"="+pu(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var xu=/\/?$/;function bu(e,t,n,r){var i=r&&r.options.stringifyQuery,a=t.query||{};try{a=_u(a)}catch(e){}var o={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:a,params:t.params||{},fullPath:Su(t,i),matched:e?Mu(e):[]};return n&&(o.redirectedFrom=Su(n,i)),Object.freeze(o)}function _u(e){if(Array.isArray(e))return e.map(_u);if(e&&"object"===o(e)){var t={};for(var n in e)t[n]=_u(e[n]);return t}return e}var wu=bu(null,{path:"/"});function Mu(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}function Su(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;return void 0===i&&(i=""),(n||"/")+(t||yu)(r)+i}function Eu(e,t,n){return t===wu?e===t:!!t&&(e.path&&t.path?e.path.replace(xu,"")===t.path.replace(xu,"")&&(n||e.hash===t.hash&&Tu(e.query,t.query)):!(!e.name||!t.name)&&e.name===t.name&&(n||e.hash===t.hash&&Tu(e.query,t.query)&&Tu(e.params,t.params)))}function Tu(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every((function(n,i){var a=e[n];if(r[i]!==n)return!1;var s=t[n];return null==a||null==s?a===s:"object"===o(a)&&"object"===o(s)?Tu(a,s):String(a)===String(s)}))}function Au(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var r in n.instances){var i=n.instances[r],a=n.enteredCbs[r];if(i&&a){delete n.enteredCbs[r];for(var o=0;o<a.length;o++)i._isBeingDestroyed||a[o](i)}}}}var ku={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,i=t.parent,a=t.data;a.routerView=!0;for(var o=i.$createElement,s=n.name,u=i.$route,c=i._routerViewCache||(i._routerViewCache={}),l=0,h=!1;i&&i._routerRoot!==i;){var f=i.$vnode?i.$vnode.data:{};f.routerView&&l++,f.keepAlive&&i._directInactive&&i._inactive&&(h=!0),i=i.$parent}if(a.routerViewDepth=l,h){var d=c[s],p=d&&d.component;return p?(d.configProps&&Lu(p,a,d.route,d.configProps),o(p,a,r)):o()}var v=u.matched[l],m=v&&v.components[s];if(!v||!m)return c[s]=null,o();c[s]={component:m},a.registerRouteInstance=function(e,t){var n=v.instances[s];(t&&n!==e||!t&&n===e)&&(v.instances[s]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){v.instances[s]=t.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==v.instances[s]&&(v.instances[s]=e.componentInstance),Au(u)};var g=v.props&&v.props[s];return g&&(lu(c[s],{route:u,configProps:g}),Lu(m,a,u,g)),o(m,a,r)}};function Lu(e,t,n,r){var i=t.props=function(e,t){switch(o(t)){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0}}(n,r);if(i){i=t.props=lu({},i);var a=t.attrs=t.attrs||{};for(var s in i)e.props&&s in e.props||(a[s]=i[s],delete i[s])}}function Ru(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var a=e.replace(/^\//,"").split("/"),o=0;o<a.length;o++){var s=a[o];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function Cu(e){return e.replace(/\/\//g,"/")}var Pu=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Ou=function e(t,n,r){return Pu(n)||(r=n||r,n=[]),r=r||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Vu(e,t)}(t,n):Pu(t)?function(t,n,r){for(var i=[],a=0;a<t.length;a++)i.push(e(t[a],n,r).source);return Vu(new RegExp("(?:"+i.join("|")+")",Wu(r)),n)}(t,n,r):function(e,t,n){return qu(zu(e,n),t,n)}(t,n,r)},Iu=zu,Nu=Hu,Du=qu,Fu=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function zu(e,t){for(var n,r=[],i=0,a=0,o="",s=t&&t.delimiter||"/";null!=(n=Fu.exec(e));){var u=n[0],c=n[1],l=n.index;if(o+=e.slice(a,l),a=l+u.length,c)o+=c[1];else{var h=e[a],f=n[2],d=n[3],p=n[4],v=n[5],m=n[6],g=n[7];o&&(r.push(o),o="");var y=null!=f&&null!=h&&h!==f,x="+"===m||"*"===m,b="?"===m||"*"===m,_=n[2]||s,w=p||v;r.push({name:d||i++,prefix:f||"",delimiter:_,optional:b,repeat:x,partial:y,asterisk:!!g,pattern:w?Gu(w):g?".*":"[^"+ju(_)+"]+?"})}}return a<e.length&&(o+=e.substr(a)),o&&r.push(o),r}function Uu(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function Bu(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function Hu(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===o(e[r])&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",Wu(t)));return function(t,r){for(var i="",a=t||{},o=(r||{}).pretty?Uu:encodeURIComponent,s=0;s<e.length;s++){var u=e[s];if("string"!=typeof u){var c,l=a[u.name];if(null==l){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(Pu(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=o(l[h]),!n[s].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===h?u.prefix:u.delimiter)+c}}else{if(c=u.asterisk?Bu(l):o(l),!n[s].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');i+=u.prefix+c}}else i+=u}return i}}function ju(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Gu(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Vu(e,t){return e.keys=t,e}function Wu(e){return e&&e.sensitive?"":"i"}function qu(e,t,n){Pu(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,a="",o=0;o<e.length;o++){var s=e[o];if("string"==typeof s)a+=ju(s);else{var u=ju(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+u+c+")*"),a+=c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var l=ju(n.delimiter||"/"),h=a.slice(-l.length)===l;return r||(a=(h?a.slice(0,-l.length):a)+"(?:"+l+"(?=$))?"),a+=i?"$":r&&h?"":"(?="+l+"|$)",Vu(new RegExp("^"+a,Wu(n)),t)}Ou.parse=Iu,Ou.compile=function(e,t){return Hu(zu(e,t),t)},Ou.tokensToFunction=Nu,Ou.tokensToRegExp=Du;var $u=Object.create(null);function Xu(e,t,n){t=t||{};try{var r=$u[e]||($u[e]=Ou.compile(e));return"string"==typeof t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(e){return""}finally{delete t[0]}}function Yu(e,t,n,r){var i="string"==typeof e?{path:e}:e;if(i._normalized)return i;if(i.name){var a=(i=lu({},e)).params;return a&&"object"===o(a)&&(i.params=lu({},a)),i}if(!i.path&&i.params&&t){(i=lu({},i))._normalized=!0;var s=lu(lu({},t.params),i.params);if(t.name)i.name=t.name,i.params=s;else if(t.matched.length){var u=t.matched[t.matched.length-1].path;i.path=Xu(u,s,t.path)}return i}var c=function(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}(i.path||""),l=t&&t.path||"/",h=c.path?Ru(c.path,l,n||i.append):l,f=function(e,t,n){void 0===t&&(t={});var r,i=n||gu;try{r=i(e||"")}catch(e){r={}}for(var a in t){var o=t[a];r[a]=Array.isArray(o)?o.map(mu):mu(o)}return r}(c.query,i.query,r&&r.options.parseQuery),d=i.hash||c.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:h,query:f,hash:d}}var Zu,Ju=function(){},Ku={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),a=i.location,o=i.route,s=i.href,u={},c=n.options.linkActiveClass,l=n.options.linkExactActiveClass,h=null==c?"router-link-active":c,f=null==l?"router-link-exact-active":l,d=null==this.activeClass?h:this.activeClass,p=null==this.exactActiveClass?f:this.exactActiveClass,v=o.redirectedFrom?bu(null,Yu(o.redirectedFrom),null,n):o;u[p]=Eu(r,v,this.exactPath),u[d]=this.exact||this.exactPath?u[p]:function(e,t){return 0===e.path.replace(xu,"/").indexOf(t.path.replace(xu,"/"))&&(!t.hash||e.hash===t.hash)&&function(e,t){for(var n in t)if(!(n in e))return!1;return!0}(e.query,t.query)}(r,v);var m=u[p]?this.ariaCurrentValue:null,g=function(e){Qu(e)&&(t.replace?n.replace(a,Ju):n.push(a,Ju))},y={click:Qu};Array.isArray(this.event)?this.event.forEach((function(e){y[e]=g})):y[this.event]=g;var x={class:u},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:o,navigate:g,isActive:u[d],isExactActive:u[p]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?e():e("span",{},b)}if("a"===this.tag)x.on=y,x.attrs={href:s,"aria-current":m};else{var _=ec(this.$slots.default);if(_){_.isStatic=!1;var w=_.data=lu({},_.data);for(var M in w.on=w.on||{},w.on){var S=w.on[M];M in y&&(w.on[M]=Array.isArray(S)?S:[S])}for(var E in y)E in w.on?w.on[E].push(y[E]):w.on[E]=g;var T=_.data.attrs=lu({},_.data.attrs);T.href=s,T["aria-current"]=m}else x.on=y}return e(this.tag,x,this.$slots.default)}};function Qu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ec(e){if(e)for(var t,n=0;n<e.length;n++){if("a"===(t=e[n]).tag)return t;if(t.children&&(t=ec(t.children)))return t}}var tc="undefined"!=typeof window;function nc(e,t,n,r,i){var a=t||[],o=n||Object.create(null),s=r||Object.create(null);e.forEach((function(e){rc(a,o,s,e,i)}));for(var u=0,c=a.length;u<c;u++)"*"===a[u]&&(a.push(a.splice(u,1)[0]),c--,u--);return{pathList:a,pathMap:o,nameMap:s}}function rc(e,t,n,r,i,a){var o=r.path,s=r.name,u=r.pathToRegexpOptions||{},c=function(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:Cu(t.path+"/"+e)}(o,i,u.strict);"boolean"==typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var l={path:c,regex:ic(c,u),components:r.components||{default:r.component},alias:r.alias?"string"==typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:s,parent:i,matchAs:a,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=a?Cu(a+"/"+r.path):void 0;rc(e,t,n,r,l,i)})),t[l.path]||(e.push(l.path),t[l.path]=l),void 0!==r.alias)for(var h=Array.isArray(r.alias)?r.alias:[r.alias],f=0;f<h.length;++f){var d={path:h[f],children:r.children};rc(e,t,n,d,i,l.path||"/")}s&&(n[s]||(n[s]=l))}function ic(e,t){return Ou(e,[],t)}function ac(e,t){var n=nc(e),r=n.pathList,i=n.pathMap,a=n.nameMap;function s(e,n,s){var c=Yu(e,n,!1,t),l=c.name;if(l){var h=a[l];if(!h)return u(null,c);var f=h.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==o(c.params)&&(c.params={}),n&&"object"===o(n.params))for(var d in n.params)!(d in c.params)&&f.indexOf(d)>-1&&(c.params[d]=n.params[d]);return c.path=Xu(h.path,c.params),u(h,c,s)}if(c.path){c.params={};for(var p=0;p<r.length;p++){var v=r[p],m=i[v];if(oc(m.regex,c.path,c.params))return u(m,c,s)}}return u(null,c)}function u(e,n,r){return e&&e.redirect?function(e,n){var r=e.redirect,i="function"==typeof r?r(bu(e,n,null,t)):r;if("string"==typeof i&&(i={path:i}),!i||"object"!==o(i))return u(null,n);var c=i,l=c.name,h=c.path,f=n.query,d=n.hash,p=n.params;if(f=c.hasOwnProperty("query")?c.query:f,d=c.hasOwnProperty("hash")?c.hash:d,p=c.hasOwnProperty("params")?c.params:p,l)return a[l],s({_normalized:!0,name:l,query:f,hash:d,params:p},void 0,n);if(h){var v=function(e,t){return Ru(e,t.parent?t.parent.path:"/",!0)}(h,e);return s({_normalized:!0,path:Xu(v,p),query:f,hash:d},void 0,n)}return u(null,n)}(e,r||n):e&&e.matchAs?function(e,t,n){var r=s({_normalized:!0,path:Xu(n,t.params)});if(r){var i=r.matched,a=i[i.length-1];return t.params=r.params,u(a,t)}return u(null,t)}(0,n,e.matchAs):bu(e,n,r,t)}return{match:s,addRoute:function(e,t){var n="object"!==o(e)?a[e]:void 0;nc([t||e],r,i,a,n),n&&n.alias.length&&nc(n.alias.map((function(e){return{path:e,children:[t]}})),r,i,a,n)},getRoutes:function(){return r.map((function(e){return i[e]}))},addRoutes:function(e){nc(e,r,i,a)}}}function oc(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,a=r.length;i<a;++i){var o=e.keys[i-1];o&&(n[o.name||"pathMatch"]="string"==typeof r[i]?vu(r[i]):r[i])}return!0}var sc=tc&&window.performance&&window.performance.now?window.performance:Date;function uc(){return sc.now().toFixed(3)}var cc=uc();function lc(){return cc}function hc(e){return cc=e}var fc=Object.create(null);function dc(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=lu({},window.history.state);return n.key=lc(),window.history.replaceState(n,"",t),window.addEventListener("popstate",mc),function(){window.removeEventListener("popstate",mc)}}function pc(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var a=function(){var e=lc();if(e)return fc[e]}(),o=i.call(e,t,n,r?a:null);o&&("function"==typeof o.then?o.then((function(e){_c(e,a)})).catch((function(e){})):_c(o,a))}))}}function vc(){var e=lc();e&&(fc[e]={x:window.pageXOffset,y:window.pageYOffset})}function mc(e){vc(),e.state&&e.state.key&&hc(e.state.key)}function gc(e){return xc(e.x)||xc(e.y)}function yc(e){return{x:xc(e.x)?e.x:window.pageXOffset,y:xc(e.y)?e.y:window.pageYOffset}}function xc(e){return"number"==typeof e}var bc=/^#\d/;function _c(e,t){var n,r="object"===o(e);if(r&&"string"==typeof e.selector){var i=bc.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(i){var a=e.offset&&"object"===o(e.offset)?e.offset:{};t=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-n.left-t.x,y:r.top-n.top-t.y}}(i,a={x:xc((n=a).x)?n.x:0,y:xc(n.y)?n.y:0})}else gc(e)&&(t=yc(e))}else r&&gc(e)&&(t=yc(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var wc,Mc=tc&&(-1===(wc=window.navigator.userAgent).indexOf("Android 2.")&&-1===wc.indexOf("Android 4.0")||-1===wc.indexOf("Mobile Safari")||-1!==wc.indexOf("Chrome")||-1!==wc.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState;function Sc(e,t){vc();var n=window.history;try{if(t){var r=lu({},n.state);r.key=lc(),n.replaceState(r,"",e)}else n.pushState({key:hc(uc())},"",e)}catch(n){window.location[t?"replace":"assign"](e)}}function Ec(e){Sc(e,!0)}function Tc(e,t,n){!function r(i){i>=e.length?n():e[i]?t(e[i],(function(){r(i+1)})):r(i+1)}(0)}var Ac={redirected:2,aborted:4,cancelled:8,duplicated:16};function kc(e,t){return Lc(e,t,Ac.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Lc(e,t,n,r){var i=new Error(r);return i._isRouter=!0,i.from=e,i.to=t,i.type=n,i}var Rc=["params","query","hash"];function Cc(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Pc(e,t){return Cc(e)&&e._isRouter&&(null==t||e.type===t)}function Oc(e,t){return Ic(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Ic(e){return Array.prototype.concat.apply([],e)}var Nc="function"==typeof Symbol&&"symbol"===o(Symbol.toStringTag);function Dc(e){var t=!1;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var Fc=function(e,t){this.router=e,this.base=function(e){if(!e)if(tc){var t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}(t),this.current=wu,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function zc(e,t,n,r){var i=Oc(e,(function(e,r,i,a){var o=function(e,t){return"function"!=typeof e&&(e=Zu.extend(e)),e.options[t]}(e,t);if(o)return Array.isArray(o)?o.map((function(e){return n(e,r,i,a)})):n(o,r,i,a)}));return Ic(r?i.reverse():i)}function Uc(e,t){if(t)return function(){return e.apply(t,arguments)}}Fc.prototype.listen=function(e){this.cb=e},Fc.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},Fc.prototype.onError=function(e){this.errorCbs.push(e)},Fc.prototype.transitionTo=function(e,t,n){var r,i=this;try{r=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(t){t(e)})),e}var a=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),t&&t(r),i.ensureURL(),i.router.afterHooks.forEach((function(e){e&&e(r,a)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(r)})))}),(function(e){n&&n(e),e&&!i.ready&&(Pc(e,Ac.redirected)&&a===wu||(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(e)}))))}))},Fc.prototype.confirmTransition=function(e,t,n){var r=this,i=this.current;this.pending=e;var a,s,u=function(e){!Pc(e)&&Cc(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},c=e.matched.length-1,l=i.matched.length-1;if(Eu(e,i)&&c===l&&e.matched[c]===i.matched[l])return this.ensureURL(),u(((s=Lc(a=i,e,Ac.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",s));var h,f=function(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r&&e[n]===t[n];n++);return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}(this.current.matched,e.matched),d=f.updated,p=f.deactivated,v=f.activated,m=[].concat(function(e){return zc(e,"beforeRouteLeave",Uc,!0)}(p),this.router.beforeHooks,function(e){return zc(e,"beforeRouteUpdate",Uc)}(d),v.map((function(e){return e.beforeEnter})),(h=v,function(e,t,n){var r=!1,i=0,a=null;Oc(h,(function(e,t,o,s){if("function"==typeof e&&void 0===e.cid){r=!0,i++;var u,c=Dc((function(t){var r;((r=t).__esModule||Nc&&"Module"===r[Symbol.toStringTag])&&(t=t.default),e.resolved="function"==typeof t?t:Zu.extend(t),o.components[s]=t,--i<=0&&n()})),l=Dc((function(e){var t="Failed to resolve async component "+s+": "+e;a||(a=Cc(e)?e:new Error(t),n(a))}));try{u=e(c,l)}catch(e){l(e)}if(u)if("function"==typeof u.then)u.then(c,l);else{var h=u.component;h&&"function"==typeof h.then&&h.then(c,l)}}})),r||n()})),g=function(t,n){if(r.pending!==e)return u(kc(i,e));try{t(e,i,(function(t){!1===t?(r.ensureURL(!0),u(function(e,t){return Lc(e,t,Ac.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}(i,e))):Cc(t)?(r.ensureURL(!0),u(t)):"string"==typeof t||"object"===o(t)&&("string"==typeof t.path||"string"==typeof t.name)?(u(function(e,t){return Lc(e,t,Ac.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var t={};return Rc.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}(t)+'" via a navigation guard.')}(i,e)),"object"===o(t)&&t.replace?r.replace(t):r.push(t)):n(t)}))}catch(e){u(e)}};Tc(m,g,(function(){var n=function(e){return zc(e,"beforeRouteEnter",(function(e,t,n,r){return function(e,t,n){return function(r,i,a){return e(r,i,(function(e){"function"==typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),a(e)}))}}(e,n,r)}))}(v);Tc(n.concat(r.router.resolveHooks),g,(function(){if(r.pending!==e)return u(kc(i,e));r.pending=null,t(e),r.router.app&&r.router.app.$nextTick((function(){Au(e)}))}))}))},Fc.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},Fc.prototype.setupListeners=function(){},Fc.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=wu,this.pending=null};var Bc=function(e){function t(t,n){e.call(this,t,n),this._startLocation=Hc(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,r=Mc&&n;r&&this.listeners.push(dc());var i=function(){var n=e.current,i=Hc(e.base);e.current===wu&&i===e._startLocation||e.transitionTo(i,(function(e){r&&pc(t,e,n,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this.current;this.transitionTo(e,(function(e){Sc(Cu(r.base+e.fullPath)),pc(r.router,e,i,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this.current;this.transitionTo(e,(function(e){Ec(Cu(r.base+e.fullPath)),pc(r.router,e,i,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(Hc(this.base)!==this.current.fullPath){var t=Cu(this.base+this.current.fullPath);e?Sc(t):Ec(t)}},t.prototype.getCurrentLocation=function(){return Hc(this.base)},t}(Fc);function Hc(e){var t=window.location.pathname,n=t.toLowerCase(),r=e.toLowerCase();return!e||n!==r&&0!==n.indexOf(Cu(r+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var jc=function(e){function t(t,n,r){e.call(this,t,n),r&&function(e){var t=Hc(e);if(!/^\/#/.test(t))return window.location.replace(Cu(e+"/#"+t)),!0}(this.base)||Gc()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router.options.scrollBehavior,n=Mc&&t;n&&this.listeners.push(dc());var r=function(){var t=e.current;Gc()&&e.transitionTo(Vc(),(function(r){n&&pc(e.router,r,t,!0),Mc||$c(r.fullPath)}))},i=Mc?"popstate":"hashchange";window.addEventListener(i,r),this.listeners.push((function(){window.removeEventListener(i,r)}))}},t.prototype.push=function(e,t,n){var r=this,i=this.current;this.transitionTo(e,(function(e){qc(e.fullPath),pc(r.router,e,i,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this.current;this.transitionTo(e,(function(e){$c(e.fullPath),pc(r.router,e,i,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;Vc()!==t&&(e?qc(t):$c(t))},t.prototype.getCurrentLocation=function(){return Vc()},t}(Fc);function Gc(){var e=Vc();return"/"===e.charAt(0)||($c("/"+e),!1)}function Vc(){var e=window.location.href,t=e.indexOf("#");return t<0?"":e=e.slice(t+1)}function Wc(e){var t=window.location.href,n=t.indexOf("#");return(n>=0?t.slice(0,n):t)+"#"+e}function qc(e){Mc?Sc(Wc(e)):window.location.hash=e}function $c(e){Mc?Ec(Wc(e)):window.location.replace(Wc(e))}var Xc=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){var e=t.current;t.index=n,t.updateRoute(r),t.router.afterHooks.forEach((function(t){t&&t(r,e)}))}),(function(e){Pc(e,Ac.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(Fc),Yc=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=ac(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Mc&&!1!==e.fallback,this.fallback&&(t="hash"),tc||(t="abstract"),this.mode=t,t){case"history":this.history=new Bc(this,e.base);break;case"hash":this.history=new jc(this,e.base,this.fallback);break;case"abstract":this.history=new Xc(this,e.base)}},Zc={currentRoute:{configurable:!0}};function Jc(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}Yc.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},Zc.currentRoute.get=function(){return this.history&&this.history.current},Yc.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof Bc||n instanceof jc){var r=function(e){n.setupListeners(),function(e){var r=n.current,i=t.options.scrollBehavior;Mc&&i&&"fullPath"in e&&pc(t,e,r,!1)}(e)};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Yc.prototype.beforeEach=function(e){return Jc(this.beforeHooks,e)},Yc.prototype.beforeResolve=function(e){return Jc(this.resolveHooks,e)},Yc.prototype.afterEach=function(e){return Jc(this.afterHooks,e)},Yc.prototype.onReady=function(e,t){this.history.onReady(e,t)},Yc.prototype.onError=function(e){this.history.onError(e)},Yc.prototype.push=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!=typeof Promise)return new Promise((function(t,n){r.history.push(e,t,n)}));this.history.push(e,t,n)},Yc.prototype.replace=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!=typeof Promise)return new Promise((function(t,n){r.history.replace(e,t,n)}));this.history.replace(e,t,n)},Yc.prototype.go=function(e){this.history.go(e)},Yc.prototype.back=function(){this.go(-1)},Yc.prototype.forward=function(){this.go(1)},Yc.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Yc.prototype.resolve=function(e,t,n){var r=Yu(e,t=t||this.history.current,n,this),i=this.match(r,t),a=i.redirectedFrom||i.fullPath,o=function(e,t,n){var r="hash"===n?"#"+t:t;return e?Cu(e+"/"+r):r}(this.history.base,a,this.mode);return{location:r,route:i,href:o,normalizedTo:r,resolved:i}},Yc.prototype.getRoutes=function(){return this.matcher.getRoutes()},Yc.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==wu&&this.history.transitionTo(this.history.getCurrentLocation())},Yc.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==wu&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Yc.prototype,Zc),Yc.install=function e(t){if(!e.installed||Zu!==t){e.installed=!0,Zu=t;var n=function(e){return void 0!==e},r=function(e,t){var r=e.$options._parentVnode;n(r)&&n(r=r.data)&&n(r=r.registerRouteInstance)&&r(e,t)};t.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",ku),t.component("RouterLink",Ku);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}},Yc.version="3.5.2",Yc.isNavigationFailure=Pc,Yc.NavigationFailureType=Ac,Yc.START_LOCATION=wu,tc&&window.Vue&&window.Vue.use(Yc);var Kc=Yc,Qc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"cover"}},[e._m(0),e._v(" "),n("main",{staticClass:"text"},[n("h1",[e._v("Benvingut, Benvinguda")]),e._v(" "),n("p",[e._v("Ens agradaria convidar-te a participar en un joc de construcció que només podrem completar si hi participem tots i totes. Es tracta d’un puzle. Tu, com a membre de Vall d’Hebron, tens una peça. La resta de peces són en mans dels teus companys i companyes. Només si tots i totes hi posem la nostra peça aconseguirem descobrir la imatge que s’amaga en el puzle.")]),e._v(" "),n("h3",[e._v("Juguem?")]),e._v(" "),n("p",[e._v("La forma de participar-hi és molt senzilla. Quan cliquis al botó de jugar, t’apareixerà una imatge virtual aèria del campus de Vall d’Hebron. El reconeixeràs de seguida. Al costat veuràs les instruccions del joc i els comandaments o tecles que et permetran moure’t pel campus.")]),e._v(" "),e.pieceId?n("p",{staticClass:"enter-btn"},[n("router-link",{attrs:{to:{path:"/game",query:{pieceId:e.pieceId}}}},[n("button",{staticClass:"button black"},[e._v("Jugar")])])],1):e._e(),e._v(" "),n("img",{staticClass:"piece",attrs:{src:"/static/images/piece-blue.png"}})]),e._v(" "),e.showDisclaimer?n("div",{attrs:{id:"disclaimer"}},[n("div",{staticClass:"text"},[n("h1",{staticClass:"centered"},[e._v("Avís")]),e._v(" "),n("p",[e._v("Sembla que has accedit al joc des d'un dispositiu tàctil. En cas que sigui un mòbil o una tauleta, t'informem que el joc no està preparat per aquest tipus de dispositius i només ofereix funcionalitats limitades, com poder navegar pel mapa. Si vols participar del joc, et convidem a visitar de nou l'enllaç des d'un ordinador. Si només vols fer un vol pel mapa, pots continuar sense problemes.")]),e._v(" "),n("p",{staticClass:"centered"},[n("button",{staticClass:"button",on:{click:function(t){e.showDisclaimer=!1}}},[e._v("Acceptar")])])])]):e._e(),e._v(" "),n("footer")])};function el(e,t,n,r,i,a,o,s){var u,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(e,t){return u.call(t),l(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:e,options:c}}Qc._withStripped=!0;var tl=el({data:function(){return{showDisclaimer:!1}},computed:{isTouch:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},pieceId:function(){return this.$route.query.pieceId>0&&this.$route.query.pieceId<=9e3?this.$route.query.pieceId:null}},watch:{isTouch:{immediate:!0,handler:function(e,t){e&&(this.showDisclaimer=!0)}}}},Qc,[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("img",{staticClass:"logo-pla",attrs:{src:"/static/images/pla-estrategic--blue.svg"}}),e._v(" "),n("img",{staticClass:"logo-vh",attrs:{src:"/static/images/logo-vh--blue.png"}})])}],!1,null,null,null);tl.options.__file="src/views/Cover.vue";var nl=tl.exports,rl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[!e.gameLock&&!e.done||e.waiting?n("div",{staticClass:"game-cover"},[n("img",{staticClass:"logo-pla",attrs:{src:"/static/images/pla-estrategic--white.svg"}}),e._v(" "),n("img",{staticClass:"logo-vh",attrs:{src:"/static/images/logo-vh--white.png"}}),e._v(" "),!0===e.waiting?n("div",{staticClass:"game-cover__loader"},[e._v("Carregant...")]):e._e(),e._v(" "),!1===e.waiting?n("div",{staticClass:"game-cover__menu-wrapper"},[n("div",{staticClass:"game-cover__menu"},[e.isResume?[n("h3",{staticClass:"overview-message"},[e._v("Així ha quedat el puzle que hem fet entre tots i totes.")]),e._v(" "),n("ul",{staticClass:"centered menu-list"},[n("li",[n("button",{staticClass:"button",on:{click:e.goToGame}},[e._v("Vols jugar?")])])])]:[e.gameOver?e._e():n("div",{staticClass:"introduction"},[n("p",[e._v("El lloc indicat com a “sortida” és on apareixeràs amb la teva peça quan cliquis al botó de JUGAR.")]),e._v(" "),n("p",[e._v("La teva missió és portar la peça fins al puzle on hi ha la paraula “arribada” i, allà, buscar el lloc que li correspon. Per fer-ho, hauràs de seguir l’ombra vermella de la teva peça, que t’indicarà el camí. Quan l’ombra es torni verda, hauràs trobat el lloc. Clica la tecla “Enter” per col·locar la peça.")])]),e._v(" "),n("h2",{staticClass:"centered menu-title"},[e._v(e._s(e.menuTitle))]),e._v(" "),n("ul",{staticClass:"centered menu-list"},[e.gameOver||e.started?e._e():n("li",[n("button",{staticClass:"button",on:{click:function(t){e.gameLock=!0}}},[e._v(e._s(e.isTouch?"Explorar":"Jugar"))])]),e._v(" "),!e.gameOver&&e.started?n("li",[n("button",{staticClass:"button",on:{click:function(t){e.gameLock=!0}}},[e._v(e._s(e.isTouch?"Explorar":"Continuar"))])]):e._e(),e._v(" "),e.started&&!e.isTouch?n("li",[n("button",{staticClass:"button",on:{click:e.restart}},[e._v("Reiniciar")])]):e._e(),e._v(" "),n("li",[n("button",{staticClass:"button",on:{click:e.exit}},[e._v("Sortir")])]),e._v(" "),n("li",[n("button",{staticClass:"button broad",on:{click:function(t){e.showInstructions=!0}}},[e._v("Comandaments")])])])]],2),e._v(" "),e.showInstructions?n("div",{staticClass:"game-cover__instructions"},[n("h5",{staticClass:"instructions-title"},[e._v("AQUESTS SÓN ELS COMANDAMENTS QUE HAS D'UTILITZAR:"),n("i",{on:{click:function(t){e.showInstructions=!1}}})]),e._v(" "),e._m(0)]):e._e(),e._v(" "),e.isTouch||e.isResume?n("div",{ref:"gameVideo",staticClass:"game-cover__video"},[e.isResume?n("video",{ref:"resume",attrs:{id:"resume",autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}},[n("source",{attrs:{src:"/static/multimedia/resume.mp4"}}),e._v("\n          El teu navegador no pot reproduir videos amb HTML.\n        ")]):e._e()]):n("div",{ref:"coverMap",staticClass:"game-cover__map"},[n("canvas",{attrs:{id:"coverMap"}})])]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"game-overlay"},[e.gameLock&&e.isTouch?n("div",{staticClass:"is-touch-unlocker",on:{click:function(t){e.gameLock=!1}}}):e._e(),e._v(" "),e.isTouch?e._e():n("div",{staticClass:"controls-highlights",class:{hidden:!e.showControls}},["pointer"===e.controls?n("ul",{staticClass:"centered"},[e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4)]):n("ul",{staticClass:"centered"},[e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7)])]),e._v(" "),e.gameLock&&!e.isTouch?n("aside",{staticClass:"game-aside left"},[e._m(8)]):e._e()]),e._v(" "),e.done?n("div",{ref:"modal",staticClass:"done-modal"},[n("div",{staticClass:"form"},[n("div",{staticClass:"fieldset"},[n("p",[n("label",[e._v("Nom i cognoms")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"name",attrs:{type:"text"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),e._v(" "),n("p",[n("label",[e._v("A quina direcció/unitat/servei pertanys?")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userArea,expression:"userArea"}],staticClass:"area",attrs:{type:"text"},domProps:{value:e.userArea},on:{input:function(t){t.target.composing||(e.userArea=t.target.value)}}})]),e._v(" "),n("p",[n("label",[e._v("Mira el vídeo que hi ha en aquest enllaç.")]),e._v(" "),n("a",{on:{click:e.showVideo}},[n("button",{staticClass:"button",attrs:{id:"videoBtn"}},[e._v("VIDEO")])]),e._v(" "),n("label",[e._v("I digue'ns en quínes línies estratègiques creus que la teva aportació és més important.")])]),e._v(" "),n("p",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userOpinion,expression:"userOpinion"}],staticClass:"opinion",domProps:{value:e.userOpinion},on:{input:function(t){t.target.composing||(e.userOpinion=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"restart-btn button",on:{click:e.reload}},[e._v("Tornar a jugar")])])]),e._v(" "),n("div",{staticClass:"done-modal__image"},[n("div",{staticClass:"img-wrapper"},[n("img",{attrs:{src:e.doneImageSrc}})]),e._v(" "),n("button",{staticClass:"submit-btn button",class:{disabled:!(e.userName&&e.userArea&&e.userOpinion)},on:{click:e.sent}},[e._v("Enviar")]),e._v(" "),n("button",{staticClass:"restart-btn button",on:{click:e.reload}},[e._v("Tornar a jugar")])])]):e._e(),e._v(" "),n("canvas",{attrs:{id:"canvas"}})])};function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function al(e,t){if(e){if("string"==typeof e)return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?il(e,t):void 0}}function ol(e){return function(e){if(Array.isArray(e))return il(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||al(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ul(e){return ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ul(e)}function cl(e,t,n){return cl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ul(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},cl(e,t,n||e)}function ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fl(e,t){return fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fl(e,t)}function dl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fl(e,t)}function pl(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hl(e)}rl._withStripped=!0;var vl,ml=n(8456),gl=n.n(ml);function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ul(e);if(t){var i=ul(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pl(this,n)}}for(var _l=100,wl=301,Ml=302,Sl=306,El=1e3,Tl=1001,Al=1002,kl=1003,Ll=1004,Rl=1005,Cl=1006,Pl=1008,Ol=1009,Il=1012,Nl=1014,Dl=1015,Fl=1016,zl=1020,Ul=1022,Bl=1023,Hl=1026,jl=1027,Gl=2300,Vl=2301,Wl=2302,ql=2400,$l=2401,Xl=2402,Yl=2500,Zl=2501,Jl=3e3,Kl=3001,Ql=3007,eh=3002,th=7680,nh=35044,rh=35048,ih="300 es",ah=function(){function e(){r(this,e)}return a(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),oh=[],sh=0;sh<256;sh++)oh[sh]=(sh<16?"0":"")+sh.toString(16);var uh=1234567,ch=Math.PI/180,lh=180/Math.PI;function hh(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(oh[255&e]+oh[e>>8&255]+oh[e>>16&255]+oh[e>>24&255]+"-"+oh[255&t]+oh[t>>8&255]+"-"+oh[t>>16&15|64]+oh[t>>24&255]+"-"+oh[63&n|128]+oh[n>>8&255]+"-"+oh[n>>16&255]+oh[n>>24&255]+oh[255&r]+oh[r>>8&255]+oh[r>>16&255]+oh[r>>24&255]).toUpperCase()}function fh(e,t,n){return Math.max(t,Math.min(n,e))}function dh(e,t){return(e%t+t)%t}function ph(e,t,n){return(1-n)*e+n*t}function vh(e){return 0==(e&e-1)&&0!==e}function mh(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function gh(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var yh=Object.freeze({__proto__:null,DEG2RAD:ch,RAD2DEG:lh,generateUUID:hh,clamp:fh,euclideanModulo:dh,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ph,damp:function(e,t,n,r){return ph(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(dh(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(uh=e%2147483647),((uh=16807*uh%2147483647)-1)/2147483646},degToRad:function(e){return e*ch},radToDeg:function(e){return e*lh},isPowerOfTwo:vh,ceilPowerOfTwo:mh,floorPowerOfTwo:gh,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),c=a((t+r)/2),l=o((t+r)/2),h=a((t-r)/2),f=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*l,u*h,u*f,s*c);break;case"YZY":e.set(u*f,s*l,u*h,s*c);break;case"ZXZ":e.set(u*h,u*f,s*l,s*c);break;case"XZX":e.set(s*l,u*p,u*d,s*c);break;case"YXY":e.set(u*d,s*l,u*p,s*c);break;case"ZYZ":e.set(u*p,u*d,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),xh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.x=t,this.y=n}return a(e,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),e}();xh.prototype.isVector2=!0;var bh,_h=function(){function e(){r(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return a(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],x=r[7],b=r[2],_=r[5],w=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*_,i[6]=a*m+o*x+s*w,i[1]=u*p+c*g+l*b,i[4]=u*v+c*y+l*_,i[7]=u*m+c*x+l*w,i[2]=h*p+f*g+d*b,i[5]=h*v+f*y+d*_,i[8]=h*m+f*x+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*i*c+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=c*a-o*u,h=o*s-c*i,f=u*i-a*s,d=t*l+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*c,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();_h.prototype.isMatrix3=!0;var wh=function(){function e(){r(this,e)}return a(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===bh&&(bh=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),bh.width=e.width,bh.height=e.height;var n=bh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=bh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),Mh=0,Sh=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tl,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tl,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cl,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pl,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bl,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ol,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Jl;return r(this,n),e=t.call(this),Object.defineProperty(hl(e),"id",{value:Mh++}),e.uuid=hh(),e.name="",e.image=i,e.mipmaps=[],e.mapping=a,e.wrapS=o,e.wrapT=s,e.magFilter=u,e.minFilter=c,e.anisotropy=f,e.format=l,e.internalFormat=null,e.type=h,e.offset=new xh(0,0),e.repeat=new xh(1,1),e.center=new xh(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new _h,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=d,e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return a(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=hh()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Eh(r[a].image)):i.push(Eh(r[a]))}else i=Eh(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case El:e.x=e.x-Math.floor(e.x);break;case Tl:e.x=e.x<0?0:1;break;case Al:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case El:e.y=e.y-Math.floor(e.y);break;case Tl:e.y=e.y<0?0:1;break;case Al:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(ah);function Eh(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?wh.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Sh.DEFAULT_IMAGE=void 0,Sh.DEFAULT_MAPPING=300,Sh.prototype.isTexture=!0;var Th=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e),this.x=t,this.y=n,this.z=i,this.w=a}return a(e,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(c-h)<a&&Math.abs(l-p)<a&&Math.abs(d-v)<a){if(Math.abs(c+h)<o&&Math.abs(l+p)<o&&Math.abs(d+v)<o&&Math.abs(u+f+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,x=(m+1)/2,b=(c+h)/4,_=(l+p)/4,w=(d+v)/4;return g>y&&g>x?g<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(g)),i=_/n):y>x?y<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(y)),i=w/r):x<a?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(x)),r=w/i),this.set(n,r,i,t),this}var M=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p)+(h-c)*(h-c));return Math.abs(M)<.001&&(M=1),this.x=(v-d)/M,this.y=(l-p)/M,this.z=(h-c)/M,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),e}();Th.prototype.isVector4=!0;var Ah=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(this,n),(a=t.call(this)).width=e,a.height=i,a.depth=1,a.scissor=new Th(0,0,e,i),a.scissorTest=!1,a.viewport=new Th(0,0,e,i),a.texture=new Sh(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),a.texture.isRenderTargetTexture=!0,a.texture.image={width:e,height:i,depth:1},a.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,a.texture.minFilter=void 0!==o.minFilter?o.minFilter:Cl,a.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,a.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,a.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,a}return a(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(ah);Ah.prototype.isWebGLRenderTarget=!0;var kh=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;r(this,n);var s=(o=t.call(this,e,i)).texture;o.texture=[];for(var u=0;u<a;u++)o.texture[u]=s.clone();return o}return a(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Ah);kh.prototype.isWebGLMultipleRenderTargets=!0;var Lh=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e,i,a)).samples=4,o}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(Ah);Lh.prototype.isWebGLMultisampleRenderTarget=!0;var Rh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e),this._x=t,this._y=n,this._z=i,this._w=a}return a(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"YXZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"ZXY":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"ZYX":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"YZX":this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d;break;case"XZY":this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>l){var d=2*Math.sqrt(1+n-o-l);this._w=(c-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+c)/p}else{var v=2*Math.sqrt(1+l-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+c)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(fh(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+r*u-i*s,this._y=r*c+a*s+i*o-n*u,this._z=i*c+a*u+n*s-r*o,this._w=a*c-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-t)*l)/c,f=Math.sin(t*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(l!==p||s!==h||u!==f||c!==d){var v=1-o,m=s*h+u*f+c*d+l*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,m*g);v=Math.sin(v*b)/x,o=Math.sin(o*b)/x}var _=o*g;if(s=s*v+h*_,u=u*v+f*_,c=c*v+d*_,l=l*v+p*_,v===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+c*l+s*f-u*h,e[t+1]=s*d+c*h+u*l-o*f,e[t+2]=u*d+c*f+o*h-s*l,e[t+3]=c*d-o*l-s*h-u*f,e}}]),e}();Rh.prototype.isQuaternion=!0;var Ch=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,e),this.x=t,this.y=n,this.z=i}return a(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Oh.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Oh.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,c=s*n+o*t-i*r,l=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=u*s+h*-i+c*-o-l*-a,this.y=c*s+h*-a+l*-i-u*-o,this.z=l*s+h*-o+u*-a-c*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Ph.copy(this).projectOnVector(e),this.sub(Ph)}},{key:"reflect",value:function(e){return this.sub(Ph.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(fh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}();Ch.prototype.isVector3=!0;var Ph=new Ch,Oh=new Rh,Ih=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch(-1/0,-1/0,-1/0);r(this,e),this.min=t,this.max=n}return a(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Dh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Fh.copy(t.boundingBox),Fh.applyMatrix4(e.matrixWorld),this.union(Fh));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Dh),Dh.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Vh),Wh.subVectors(this.max,Vh),zh.subVectors(e.a,Vh),Uh.subVectors(e.b,Vh),Bh.subVectors(e.c,Vh),Hh.subVectors(Uh,zh),jh.subVectors(Bh,Uh),Gh.subVectors(zh,Bh);var t=[0,-Hh.z,Hh.y,0,-jh.z,jh.y,0,-Gh.z,Gh.y,Hh.z,0,-Hh.x,jh.z,0,-jh.x,Gh.z,0,-Gh.x,-Hh.y,Hh.x,0,-jh.y,jh.x,0,-Gh.y,Gh.x,0];return!!Xh(t,zh,Uh,Bh,Wh)&&!!Xh(t=[1,0,0,0,1,0,0,0,1],zh,Uh,Bh,Wh)&&(qh.crossVectors(Hh,jh),Xh(t=[qh.x,qh.y,qh.z],zh,Uh,Bh,Wh))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Dh.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Dh).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Nh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nh)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Ih.prototype.isBox3=!0;var Nh=[new Ch,new Ch,new Ch,new Ch,new Ch,new Ch,new Ch,new Ch],Dh=new Ch,Fh=new Ih,zh=new Ch,Uh=new Ch,Bh=new Ch,Hh=new Ch,jh=new Ch,Gh=new Ch,Vh=new Ch,Wh=new Ch,qh=new Ch,$h=new Ch;function Xh(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){$h.fromArray(e,a);var s=i.x*Math.abs($h.x)+i.y*Math.abs($h.y)+i.z*Math.abs($h.z),u=t.dot($h),c=n.dot($h),l=r.dot($h);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}var Yh=new Ih,Zh=new Ch,Jh=new Ch,Kh=new Ch,Qh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;r(this,e),this.center=t,this.radius=n}return a(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Yh.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Kh.subVectors(e,this.center);var t=Kh.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Kh.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return Jh.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Zh.copy(e.center).add(Jh)),this.expandByPoint(Zh.copy(e.center).sub(Jh)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ef=new Ch,tf=new Ch,nf=new Ch,rf=new Ch,af=new Ch,of=new Ch,sf=new Ch,uf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch(0,0,-1);r(this,e),this.origin=t,this.direction=n}return a(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ef)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ef.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ef.copy(this.direction).multiplyScalar(t).add(this.origin),ef.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){tf.copy(e).add(t).multiplyScalar(.5),nf.copy(t).sub(e).normalize(),rf.copy(this.origin).sub(tf);var i,a,o,s,u=.5*e.distanceTo(t),c=-this.direction.dot(nf),l=rf.dot(this.direction),h=-rf.dot(nf),f=rf.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(a=c*l-h,s=u*d,(i=c*h-l)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+c*(a*=p)+2*l)+a*(c*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-c*u+l)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(c*u+l)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=c>0?-u:u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(nf).multiplyScalar(a).add(tf),o}},{key:"intersectSphere",value:function(e,t){ef.subVectors(e.center,this.origin);var n=ef.dot(this.direction),r=ef.dot(ef)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),l>=0?(o=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(o=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ef)}},{key:"intersectTriangle",value:function(e,t,n,r,i){af.subVectors(t,e),of.subVectors(n,e),sf.crossVectors(af,of);var a,o=this.direction.dot(sf);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}rf.subVectors(this.origin,e);var s=a*this.direction.dot(of.crossVectors(rf,of));if(s<0)return null;var u=a*this.direction.dot(af.cross(rf));if(u<0)return null;if(s+u>o)return null;var c=-a*rf.dot(sf);return c<0?null:this.at(c/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),cf=function(){function e(){r(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return a(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/lf.setFromMatrixColumn(e,0).length(),i=1/lf.setFromMatrixColumn(e,1).length(),a=1/lf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=a*c,f=a*l,d=o*c,p=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*l,t[5]=a*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var x=s*c,b=s*l,_=u*c,w=u*l;t[0]=x-w*o,t[4]=-a*l,t[8]=_+b*o,t[1]=b+_*o,t[5]=a*c,t[9]=w-x*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var M=a*c,S=a*l,E=o*c,T=o*l;t[0]=s*c,t[4]=E*u-S,t[8]=M*u+T,t[1]=s*l,t[5]=T*u+M,t[9]=S*u-E,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var A=a*s,k=a*u,L=o*s,R=o*u;t[0]=s*c,t[4]=R-A*l,t[8]=L*l+k,t[1]=l,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=k*l+L,t[10]=A-R*l}else if("XZY"===e.order){var C=a*s,P=a*u,O=o*s,I=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=C*l+I,t[5]=a*c,t[9]=P*l-O,t[2]=O*l-P,t[6]=o*c,t[10]=I*l+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ff,e,df)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return mf.subVectors(e,t),0===mf.lengthSq()&&(mf.z=1),mf.normalize(),pf.crossVectors(n,mf),0===pf.lengthSq()&&(1===Math.abs(n.z)?mf.x+=1e-4:mf.z+=1e-4,mf.normalize(),pf.crossVectors(n,mf)),pf.normalize(),vf.crossVectors(mf,pf),r[0]=pf.x,r[4]=vf.x,r[8]=mf.x,r[1]=pf.y,r[5]=vf.y,r[9]=mf.y,r[2]=pf.z,r[6]=vf.z,r[10]=mf.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],x=n[11],b=n[15],_=r[0],w=r[4],M=r[8],S=r[12],E=r[1],T=r[5],A=r[9],k=r[13],L=r[2],R=r[6],C=r[10],P=r[14],O=r[3],I=r[7],N=r[11],D=r[15];return i[0]=a*_+o*E+s*L+u*O,i[4]=a*w+o*T+s*R+u*I,i[8]=a*M+o*A+s*C+u*N,i[12]=a*S+o*k+s*P+u*D,i[1]=c*_+l*E+h*L+f*O,i[5]=c*w+l*T+h*R+f*I,i[9]=c*M+l*A+h*C+f*N,i[13]=c*S+l*k+h*P+f*D,i[2]=d*_+p*E+v*L+m*O,i[6]=d*w+p*T+v*R+m*I,i[10]=d*M+p*A+v*C+m*N,i[14]=d*S+p*k+v*P+m*D,i[3]=g*_+y*E+x*L+b*O,i[7]=g*w+y*T+x*R+b*I,i[11]=g*M+y*A+x*C+b*N,i[15]=g*S+y*k+x*P+b*D,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*s*l-r*u*l-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*c-i*s*c)+e[11]*(+t*u*l-t*o*f-i*a*l+n*a*f+i*o*c-n*u*c)+e[15]*(-r*o*c-t*s*l+t*o*h+r*a*l-n*a*h+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=l*v*u-p*h*u+p*s*f-o*v*f-l*s*m+o*h*m,y=d*h*u-c*v*u-d*s*f+a*v*f+c*s*m-a*h*m,x=c*p*u-d*l*u+d*o*f-a*p*f-c*o*m+a*l*m,b=d*l*s-c*p*s-d*o*h+a*p*h+c*o*v-a*l*v,_=t*g+n*y+r*x+i*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/_;return e[0]=g*w,e[1]=(p*h*i-l*v*i-p*r*f+n*v*f+l*r*m-n*h*m)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,e[3]=(l*s*i-o*h*i-l*r*u+n*h*u+o*r*f-n*s*f)*w,e[4]=y*w,e[5]=(c*v*i-d*h*i+d*r*f-t*v*f-c*r*m+t*h*m)*w,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*w,e[7]=(a*h*i-c*s*i+c*r*u-t*h*u-a*r*f+t*s*f)*w,e[8]=x*w,e[9]=(d*l*i-c*p*i-d*n*f+t*p*f+c*n*m-t*l*m)*w,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*w,e[11]=(c*o*i-a*l*i-c*n*u+t*l*u+a*n*f-t*o*f)*w,e[12]=b*w,e[13]=(c*p*r-d*l*r+d*n*h-t*p*h-c*n*v+t*l*v)*w,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*l*r-c*o*r+c*n*s-t*l*s-a*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,c=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*a,0,u*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,p=a*c,v=a*l,m=o*l,g=s*u,y=s*c,x=s*l,b=n.x,_=n.y,w=n.z;return r[0]=(1-(p+m))*b,r[1]=(f+x)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(f-x)*_,r[5]=(1-(h+m))*_,r[6]=(v+g)*_,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=lf.set(r[0],r[1],r[2]).length(),a=lf.set(r[4],r[5],r[6]).length(),o=lf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],hf.copy(this);var s=1/i,u=1/a,c=1/o;return hf.elements[0]*=s,hf.elements[1]*=s,hf.elements[2]*=s,hf.elements[4]*=u,hf.elements[5]*=u,hf.elements[6]*=u,hf.elements[8]*=c,hf.elements[9]*=c,hf.elements[10]*=c,t.setFromRotationMatrix(hf),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),c=1/(a-i),l=(t+e)*s,h=(n+r)*u,f=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();cf.prototype.isMatrix4=!0;var lf=new Ch,hf=new cf,ff=new Ch(0,0,0),df=new Ch(1,1,1),pf=new Ch,vf=new Ch,mf=new Ch,gf=new cf,yf=new Rh,xf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;r(this,e),this._x=t,this._y=n,this._z=i,this._order=a}return a(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(fh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-fh(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(fh(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-fh(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(fh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-fh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return gf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gf,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return yf.setFromEuler(this),this.setFromQuaternion(yf,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new Ch(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();xf.prototype.isEuler=!0,xf.DefaultOrder="XYZ",xf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var bf=function(){function e(){r(this,e),this.mask=1}return a(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}}]),e}(),_f=0,wf=new Ch,Mf=new Rh,Sf=new cf,Ef=new Ch,Tf=new Ch,Af=new Ch,kf=new Rh,Lf=new Ch(1,0,0),Rf=new Ch(0,1,0),Cf=new Ch(0,0,1),Pf={type:"added"},Of={type:"removed"},If=function(e){dl(n,e);var t=bl(n);function n(){var e;r(this,n),e=t.call(this),Object.defineProperty(hl(e),"id",{value:_f++}),e.uuid=hh(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new Ch,a=new xf,o=new Rh,s=new Ch(1,1,1);return a._onChange((function(){o.setFromEuler(a,!1)})),o._onChange((function(){a.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(hl(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new cf},normalMatrix:{value:new _h}}),e.matrix=new cf,e.matrixWorld=new cf,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new bf,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return a(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Mf.setFromAxisAngle(e,t),this.quaternion.multiply(Mf),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Mf.setFromAxisAngle(e,t),this.quaternion.premultiply(Mf),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Lf,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Rf,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Cf,e)}},{key:"translateOnAxis",value:function(e,t){return wf.copy(e).applyQuaternion(this.quaternion),this.position.add(wf.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Lf,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Rf,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Cf,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Sf.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Ef.copy(e):Ef.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Tf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sf.lookAt(Tf,Ef,this.up):Sf.lookAt(Ef,Tf,this.up),this.quaternion.setFromRotationMatrix(Sf),r&&(Sf.extractRotation(r.matrixWorld),Mf.setFromRotationMatrix(Sf),this.quaternion.premultiply(Mf.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Pf)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Of)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Of)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Sf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Sf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sf),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,e,Af),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,kf,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var c=o[s];i(e.shapes,c)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],h=0,f=this.material.length;h<f;h++)l.push(i(e.materials,this.material[h]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=M(e.geometries),g=M(e.materials),y=M(e.textures),x=M(e.images),b=M(e.shapes),_=M(e.skeletons),w=M(e.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),x.length>0&&(n.images=x),b.length>0&&(n.shapes=b),_.length>0&&(n.skeletons=_),w.length>0&&(n.animations=w)}return n.object=r,n;function M(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(ah);If.DefaultUp=new Ch(0,1,0),If.DefaultMatrixAutoUpdate=!0,If.prototype.isObject3D=!0;var Nf=new Ch,Df=new Ch,Ff=new Ch,zf=new Ch,Uf=new Ch,Bf=new Ch,Hf=new Ch,jf=new Ch,Gf=new Ch,Vf=new Ch,Wf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ch;r(this,e),this.a=t,this.b=n,this.c=i}return a(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Nf.subVectors(this.c,this.b),Df.subVectors(this.a,this.b),.5*Nf.cross(Df).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Uf.subVectors(a,i),Bf.subVectors(o,i),jf.subVectors(e,i);var s=Uf.dot(jf),u=Bf.dot(jf);if(s<=0&&u<=0)return t.copy(i);Gf.subVectors(e,a);var c=Uf.dot(Gf),l=Bf.dot(Gf);if(c>=0&&l<=c)return t.copy(a);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(Uf,n);Vf.subVectors(e,o);var f=Uf.dot(Vf),d=Bf.dot(Vf);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Bf,r);var v=c*d-f*l;if(v<=0&&l-c>=0&&f-d>=0)return Hf.subVectors(o,a),r=(l-c)/(l-c+(f-d)),t.copy(a).addScaledVector(Hf,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(Uf,n).addScaledVector(Bf,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Nf.subVectors(e,t),r.cross(Nf);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Nf.subVectors(r,t),Df.subVectors(n,t),Ff.subVectors(e,t);var a=Nf.dot(Nf),o=Nf.dot(Df),s=Nf.dot(Ff),u=Df.dot(Df),c=Df.dot(Ff),l=a*u-o*o;if(0===l)return i.set(-2,-1,-1);var h=1/l,f=(u*s-o*c)*h,d=(a*c-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,zf),zf.x>=0&&zf.y>=0&&zf.x+zf.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,zf),s.set(0,0),s.addScaledVector(i,zf.x),s.addScaledVector(a,zf.y),s.addScaledVector(o,zf.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Nf.subVectors(n,t),Df.subVectors(e,t),Nf.cross(Df).dot(r)<0}}]),e}(),qf=0,$f=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),e=t.call(this),Object.defineProperty(hl(e),"id",{value:qf++}),e.uuid=hh(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=_l,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=th,e.stencilZFail=th,e.stencilZPass=th,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaTest=0,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e}return a(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(ah);$f.prototype.isMaterial=!0;var Xf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yf={h:0,s:0,l:0},Zf={h:0,s:0,l:0};function Jf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Kf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Qf(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var ed=function(){function e(t,n,i){return r(this,e),void 0===n&&void 0===i?this.set(t):this.setRGB(t,n,i)}return a(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=dh(e,1),t=fh(t,0,1),n=fh(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Jf(i,r,e+1/3),this.g=Jf(i,r,e),this.b=Jf(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=Xf[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Kf(e.r),this.g=Kf(e.g),this.b=Kf(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Qf(e.r),this.g=Qf(e.g),this.b=Qf(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var c=o-s;switch(n=u<=.5?c/(o+s):c/(2-o-s),o){case r:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-r)/c+2;break;case a:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Yf),Yf.h+=e,Yf.s+=t,Yf.l+=n,this.setHSL(Yf.h,Yf.s,Yf.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Yf),e.getHSL(Zf);var n=ph(Yf.h,Zf.h,t),r=ph(Yf.s,Zf.s,t),i=ph(Yf.l,Zf.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();ed.NAMES=Xf,ed.prototype.isColor=!0,ed.prototype.r=1,ed.prototype.g=1,ed.prototype.b=1;var td=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshBasicMaterial",i.color=new ed(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}($f);td.prototype.isMeshBasicMaterial=!0;var nd=new Ch,rd=new xh,id=function(){function e(t,n,i){if(r(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=nh,this.updateRange={offset:0,count:-1},this.version=0}return a(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ed),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new xh),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Ch),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Th),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)rd.fromBufferAttribute(this,t),rd.applyMatrix3(e),this.setXY(t,rd.x,rd.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)nd.fromBufferAttribute(this,r),nd.applyMatrix3(e),this.setXYZ(r,nd.x,nd.y,nd.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)nd.x=this.getX(t),nd.y=this.getY(t),nd.z=this.getZ(t),nd.applyMatrix4(e),this.setXYZ(t,nd.x,nd.y,nd.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)nd.x=this.getX(t),nd.y=this.getY(t),nd.z=this.getZ(t),nd.applyNormalMatrix(e),this.setXYZ(t,nd.x,nd.y,nd.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)nd.x=this.getX(t),nd.y=this.getY(t),nd.z=this.getZ(t),nd.transformDirection(e),this.setXYZ(t,nd.x,nd.y,nd.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==nh&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();id.prototype.isBufferAttribute=!0;var ad=function(e){dl(n,e);var t=bl(n);function n(e,i,a){return r(this,n),t.call(this,new Uint16Array(e),i,a)}return n}(id),od=function(e){dl(n,e);var t=bl(n);function n(e,i,a){return r(this,n),t.call(this,new Uint32Array(e),i,a)}return n}(id);(function(e){dl(n,e);var t=bl(n);function n(e,i,a){return r(this,n),t.call(this,new Uint16Array(e),i,a)}return n})(id).prototype.isFloat16BufferAttribute=!0;var sd=function(e){dl(n,e);var t=bl(n);function n(e,i,a){return r(this,n),t.call(this,new Float32Array(e),i,a)}return n}(id);function ud(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var cd=0,ld=new cf,hd=new If,fd=new Ch,dd=new Ih,pd=new Ih,vd=new Ch,md=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),e=t.call(this),Object.defineProperty(hl(e),"id",{value:cd++}),e.uuid=hh(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return a(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(ud(e)>65535?od:ad)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new _h).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return ld.makeRotationFromQuaternion(e),this.applyMatrix4(ld),this}},{key:"rotateX",value:function(e){return ld.makeRotationX(e),this.applyMatrix4(ld),this}},{key:"rotateY",value:function(e){return ld.makeRotationY(e),this.applyMatrix4(ld),this}},{key:"rotateZ",value:function(e){return ld.makeRotationZ(e),this.applyMatrix4(ld),this}},{key:"translate",value:function(e,t,n){return ld.makeTranslation(e,t,n),this.applyMatrix4(ld),this}},{key:"scale",value:function(e,t,n){return ld.makeScale(e,t,n),this.applyMatrix4(ld),this}},{key:"lookAt",value:function(e){return hd.lookAt(e),hd.updateMatrix(),this.applyMatrix4(hd.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fd).negate(),this.translate(fd.x,fd.y,fd.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new sd(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ih);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ch(-1/0,-1/0,-1/0),new Ch(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];dd.setFromBufferAttribute(i),this.morphTargetsRelative?(vd.addVectors(this.boundingBox.min,dd.min),this.boundingBox.expandByPoint(vd),vd.addVectors(this.boundingBox.max,dd.max),this.boundingBox.expandByPoint(vd)):(this.boundingBox.expandByPoint(dd.min),this.boundingBox.expandByPoint(dd.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Qh);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ch,1/0);if(e){var n=this.boundingSphere.center;if(dd.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];pd.setFromBufferAttribute(a),this.morphTargetsRelative?(vd.addVectors(dd.min,pd.min),dd.expandByPoint(vd),vd.addVectors(dd.max,pd.max),dd.expandByPoint(vd)):(dd.expandByPoint(pd.min),dd.expandByPoint(pd.max))}dd.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)vd.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(vd));if(t)for(var c=0,l=t.length;c<l;c++)for(var h=t[c],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)vd.fromBufferAttribute(h,d),f&&(fd.fromBufferAttribute(e,d),vd.add(fd)),o=Math.max(o,n.distanceToSquared(vd));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new id(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],c=[],l=0;l<o;l++)u[l]=new Ch,c[l]=new Ch;var h=new Ch,f=new Ch,d=new Ch,p=new xh,v=new xh,m=new xh,g=new Ch,y=new Ch,x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(var b=0,_=x.length;b<_;++b)for(var w=x[b],M=w.start,S=M,E=M+w.count;S<E;S+=3)D(n[S+0],n[S+1],n[S+2]);for(var T=new Ch,A=new Ch,k=new Ch,L=new Ch,R=0,C=x.length;R<C;++R)for(var P=x[R],O=P.start,I=O,N=O+P.count;I<N;I+=3)F(n[I+0]),F(n[I+1]),F(n[I+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function D(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}function F(e){k.fromArray(i,3*e),L.copy(k);var t=u[e];T.copy(t),T.sub(k.multiplyScalar(k.dot(t))).normalize(),A.crossVectors(L,t);var n=A.dot(c[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new id(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Ch,o=new Ch,s=new Ch,u=new Ch,c=new Ch,l=new Ch,h=new Ch,f=new Ch;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),u.add(h),c.add(h),l.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,l.x,l.y,l.z)}else for(var y=0,x=t.count;y<x;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)vd.fromBufferAttribute(e,t),vd.normalize(),e.setXYZ(t,vd.x,vd.y,vd.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,c=t.length;u<c;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var l=0;l<r;l++)a[s++]=n[o++]}return new id(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],h=0,f=l.length;h<f;h++){var d=e(l[h],r);c.push(d)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var c in this.morphAttributes){for(var l=this.morphAttributes[c],h=[],f=0,d=l.length;f<d;f++){var p=l[f];h.push(p.toJSON(e.data))}h.length>0&&(s[c]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,h=c.length;l<h;l++)u.push(c[l].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var v=f[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(ah);md.prototype.isBufferGeometry=!0;var gd=new cf,yd=new uf,xd=new Qh,bd=new Ch,_d=new Ch,wd=new Ch,Md=new Ch,Sd=new Ch,Ed=new Ch,Td=new Ch,Ad=new Ch,kd=new Ch,Ld=new xh,Rd=new xh,Cd=new xh,Pd=new Ch,Od=new Ch,Id=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new md,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new td;return r(this,n),(e=t.call(this)).type="Mesh",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),xd.copy(r.boundingSphere),xd.applyMatrix4(a),!1!==e.ray.intersectsSphere(xd)&&(gd.copy(a).invert(),yd.copy(e.ray).applyMatrix4(gd),null===r.boundingBox||!1!==yd.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,l=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),x=Math.min(m.start+m.count,d.start+d.count);y<x;y+=3){var b=o.getX(y),_=o.getX(y+1),w=o.getX(y+2);(n=Nd(this,g,e,yd,s,u,c,l,h,b,_,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var M=Math.max(0,d.start),S=Math.min(o.count,d.start+d.count);M<S;M+=3){var E=o.getX(M),T=o.getX(M+1),A=o.getX(M+2);(n=Nd(this,i,e,yd,s,u,c,l,h,E,T,A))&&(n.faceIndex=Math.floor(M/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var k=0,L=f.length;k<L;k++)for(var R=f[k],C=i[R.materialIndex],P=Math.max(R.start,d.start),O=Math.min(R.start+R.count,d.start+d.count);P<O;P+=3)(n=Nd(this,C,e,yd,s,u,c,l,h,P,P+1,P+2))&&(n.faceIndex=Math.floor(P/3),n.face.materialIndex=R.materialIndex,t.push(n));else for(var I=Math.max(0,d.start),N=Math.min(s.count,d.start+d.count);I<N;I+=3)(n=Nd(this,i,e,yd,s,u,c,l,h,I,I+1,I+2))&&(n.faceIndex=Math.floor(I/3),t.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(If);function Nd(e,t,n,r,i,a,o,s,u,c,l,h){bd.fromBufferAttribute(i,c),_d.fromBufferAttribute(i,l),wd.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(a&&f){Td.set(0,0,0),Ad.set(0,0,0),kd.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=f[d],m=a[d];0!==v&&(Md.fromBufferAttribute(m,c),Sd.fromBufferAttribute(m,l),Ed.fromBufferAttribute(m,h),o?(Td.addScaledVector(Md,v),Ad.addScaledVector(Sd,v),kd.addScaledVector(Ed,v)):(Td.addScaledVector(Md.sub(bd),v),Ad.addScaledVector(Sd.sub(_d),v),kd.addScaledVector(Ed.sub(wd),v)))}bd.add(Td),_d.add(Ad),wd.add(kd)}e.isSkinnedMesh&&(e.boneTransform(c,bd),e.boneTransform(l,_d),e.boneTransform(h,wd));var g=function(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==t.side,s)))return null;Od.copy(s),Od.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Od);return u<n.near||u>n.far?null:{distance:u,point:Od.clone(),object:e}}(e,t,n,r,bd,_d,wd,Pd);if(g){s&&(Ld.fromBufferAttribute(s,c),Rd.fromBufferAttribute(s,l),Cd.fromBufferAttribute(s,h),g.uv=Wf.getUV(Pd,bd,_d,wd,Ld,Rd,Cd,new xh)),u&&(Ld.fromBufferAttribute(u,c),Rd.fromBufferAttribute(u,l),Cd.fromBufferAttribute(u,h),g.uv2=Wf.getUV(Pd,bd,_d,wd,Ld,Rd,Cd,new xh));var y={a:c,b:l,c:h,normal:new Ch,materialIndex:0};Wf.getNormal(bd,_d,wd,y.normal),g.face=y}return g}Id.prototype.isMesh=!0;var Dd=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;r(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:a,depth:o,widthSegments:s,heightSegments:u,depthSegments:c};var l=hl(e);s=Math.floor(s),u=Math.floor(u),c=Math.floor(c);var h=[],f=[],d=[],p=[],v=0,m=0;function g(e,t,n,r,i,a,o,s,u,c,g){for(var y=a/u,x=o/c,b=a/2,_=o/2,w=s/2,M=u+1,S=c+1,E=0,T=0,A=new Ch,k=0;k<S;k++)for(var L=k*x-_,R=0;R<M;R++){var C=R*y-b;A[e]=C*r,A[t]=L*i,A[n]=w,f.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=s>0?1:-1,d.push(A.x,A.y,A.z),p.push(R/u),p.push(1-k/c),E+=1}for(var P=0;P<c;P++)for(var O=0;O<u;O++){var I=v+O+M*P,N=v+O+M*(P+1),D=v+(O+1)+M*(P+1),F=v+(O+1)+M*P;h.push(I,N,F),h.push(N,D,F),T+=6}l.addGroup(m,T,g),m+=T,v+=E}return g("z","y","x",-1,-1,o,a,i,c,u,0),g("z","y","x",1,-1,o,a,-i,c,u,1),g("x","z","y",1,1,i,o,a,s,c,2),g("x","z","y",1,-1,i,o,-a,s,c,3),g("x","y","z",1,-1,i,a,o,s,u,4),g("x","y","z",-1,-1,i,a,-o,s,u,5),e.setIndex(h),e.setAttribute("position",new sd(f,3)),e.setAttribute("normal",new sd(d,3)),e.setAttribute("uv",new sd(p,2)),e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(md);function Fd(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function zd(e){for(var t={},n=0;n<e.length;n++){var r=Fd(e[n]);for(var i in r)t[i]=r[i]}return t}var Ud={clone:Fd,merge:zd},Bd=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="ShaderMaterial",i.defines={},i.uniforms={},i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),i.setValues(e)),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fd(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}($f);Bd.prototype.isShaderMaterial=!0;var Hd=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new cf,e.projectionMatrix=new cf,e.projectionMatrixInverse=new cf,e}return a(n,[{key:"copy",value:function(e,t){return cl(ul(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){cl(ul(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){cl(ul(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(If);Hd.prototype.isCamera=!0;var jd=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return r(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=o,e.far=s,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return a(n,[{key:"copy",value:function(e,t){return cl(ul(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*lh*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*ch*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*lh*Math.atan(Math.tan(.5*ch*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*ch*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Hd);jd.prototype.isPerspectiveCamera=!0;var Gd=90,Vd=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;if(r(this,n),(o=t.call(this)).type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),pl(o);o.renderTarget=a;var s=new jd(Gd,1,e,i);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new Ch(1,0,0)),o.add(s);var u=new jd(Gd,1,e,i);u.layers=o.layers,u.up.set(0,-1,0),u.lookAt(new Ch(-1,0,0)),o.add(u);var c=new jd(Gd,1,e,i);c.layers=o.layers,c.up.set(0,0,1),c.lookAt(new Ch(0,1,0)),o.add(c);var l=new jd(Gd,1,e,i);l.layers=o.layers,l.up.set(0,0,-1),l.lookAt(new Ch(0,-1,0)),o.add(l);var h=new jd(Gd,1,e,i);h.layers=o.layers,h.up.set(0,-1,0),h.lookAt(new Ch(0,0,1)),o.add(h);var f=new jd(Gd,1,e,i);return f.layers=o.layers,f.up.set(0,-1,0),f.lookAt(new Ch(0,0,-1)),o.add(f),o}return a(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||al(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=l}}]),n}(If),Wd=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u,c,l,h,f){var d;return r(this,n),e=void 0!==e?e:[],i=void 0!==i?i:wl,c=void 0!==c?c:Ul,(d=t.call(this,e,i,a,o,s,u,c,l,h,f)).flipY=!1,d}return a(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Sh);Wd.prototype.isCubeTexture=!0;var qd=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;return r(this,n),Number.isInteger(i)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),i=a),o=t.call(this,e,e,i),i=i||{},o.texture=new Wd(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),o.texture.isRenderTargetTexture=!0,o.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,o.texture.minFilter=void 0!==i.minFilter?i.minFilter:Cl,o.texture._needsFlipEnvMap=!1,o}return a(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=Bl,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new Dd(5,5,5),r=new Bd({name:"CubemapFromEquirect",uniforms:Fd({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});r.uniforms.tEquirect.value=t;var i=new Id(n,r),a=t.minFilter;return t.minFilter===Pl&&(t.minFilter=Cl),new Vd(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Ah);qd.prototype.isWebGLCubeRenderTarget=!0;var $d=new Ch,Xd=new Ch,Yd=new _h,Zd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.normal=t,this.constant=n}return a(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=$d.subVectors(n,t).cross(Xd.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta($d),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Yd.getNormalMatrix(e),r=this.coplanarPoint($d).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Zd.prototype.isPlane=!0;var Jd=new Qh,Kd=new Ch,Qd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zd,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zd,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Zd,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Zd,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Zd;r(this,e),this.planes=[t,n,i,a,o,s]}return a(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,l-s,p-h,y-v).normalize(),t[1].setComponents(o+r,l+s,p+h,y+v).normalize(),t[2].setComponents(o+i,l+u,p+f,y+m).normalize(),t[3].setComponents(o-i,l-u,p-f,y-m).normalize(),t[4].setComponents(o-a,l-c,p-d,y-g).normalize(),t[5].setComponents(o+a,l+c,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Jd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Jd)}},{key:"intersectsSprite",value:function(e){return Jd.center.set(0,0,0),Jd.radius=.7071067811865476,Jd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jd)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Kd.x=r.normal.x>0?e.max.x:e.min.x,Kd.y=r.normal.y>0?e.max.y:e.min.y,Kd.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Kd)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function ep(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function tp(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var np=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:a,widthSegments:o,heightSegments:s};for(var u=i/2,c=a/2,l=Math.floor(o),h=Math.floor(s),f=l+1,d=h+1,p=i/l,v=a/h,m=[],g=[],y=[],x=[],b=0;b<d;b++)for(var _=b*v-c,w=0;w<f;w++){var M=w*p-u;g.push(M,-_,0),y.push(0,0,1),x.push(w/l),x.push(1-b/h)}for(var S=0;S<h;S++)for(var E=0;E<l;E++){var T=E+f*S,A=E+f*(S+1),k=E+1+f*(S+1),L=E+1+f*S;m.push(T,A,L),m.push(A,k,L)}return e.setIndex(m),e.setAttribute("position",new sd(g,3)),e.setAttribute("normal",new sd(y,3)),e.setAttribute("uv",new sd(x,2)),e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(md),rp={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( f90 - f0 ) * fresnel + f0;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\t#ifdef SPECULAR\n\t\tvec3 specularIntensityFactor = vec3( specularIntensity );\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );\n\t#else\n\t\tvec3 specularIntensityFactor = vec3( 1.0 );\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularColorF90 = vec3( 1.0 );\n\t#endif\n\tmaterial.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularColorF90 = vec3( 1.0 );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\tvec3 specularColorF90;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t\t#ifdef USE_TANGENT\n\t\t\tvTangent = normalize( transformedTangent );\n\t\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t\t#endif\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ip={common:{diffuse:{value:new ed(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _h},uv2Transform:{value:new _h},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xh(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ed(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ed(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new _h}},sprite:{diffuse:{value:new ed(16777215)},opacity:{value:1},center:{value:new xh(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new _h}}},ap={basic:{uniforms:zd([ip.common,ip.specularmap,ip.envmap,ip.aomap,ip.lightmap,ip.fog]),vertexShader:rp.meshbasic_vert,fragmentShader:rp.meshbasic_frag},lambert:{uniforms:zd([ip.common,ip.specularmap,ip.envmap,ip.aomap,ip.lightmap,ip.emissivemap,ip.fog,ip.lights,{emissive:{value:new ed(0)}}]),vertexShader:rp.meshlambert_vert,fragmentShader:rp.meshlambert_frag},phong:{uniforms:zd([ip.common,ip.specularmap,ip.envmap,ip.aomap,ip.lightmap,ip.emissivemap,ip.bumpmap,ip.normalmap,ip.displacementmap,ip.fog,ip.lights,{emissive:{value:new ed(0)},specular:{value:new ed(1118481)},shininess:{value:30}}]),vertexShader:rp.meshphong_vert,fragmentShader:rp.meshphong_frag},standard:{uniforms:zd([ip.common,ip.envmap,ip.aomap,ip.lightmap,ip.emissivemap,ip.bumpmap,ip.normalmap,ip.displacementmap,ip.roughnessmap,ip.metalnessmap,ip.fog,ip.lights,{emissive:{value:new ed(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rp.meshphysical_vert,fragmentShader:rp.meshphysical_frag},toon:{uniforms:zd([ip.common,ip.aomap,ip.lightmap,ip.emissivemap,ip.bumpmap,ip.normalmap,ip.displacementmap,ip.gradientmap,ip.fog,ip.lights,{emissive:{value:new ed(0)}}]),vertexShader:rp.meshtoon_vert,fragmentShader:rp.meshtoon_frag},matcap:{uniforms:zd([ip.common,ip.bumpmap,ip.normalmap,ip.displacementmap,ip.fog,{matcap:{value:null}}]),vertexShader:rp.meshmatcap_vert,fragmentShader:rp.meshmatcap_frag},points:{uniforms:zd([ip.points,ip.fog]),vertexShader:rp.points_vert,fragmentShader:rp.points_frag},dashed:{uniforms:zd([ip.common,ip.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rp.linedashed_vert,fragmentShader:rp.linedashed_frag},depth:{uniforms:zd([ip.common,ip.displacementmap]),vertexShader:rp.depth_vert,fragmentShader:rp.depth_frag},normal:{uniforms:zd([ip.common,ip.bumpmap,ip.normalmap,ip.displacementmap,{opacity:{value:1}}]),vertexShader:rp.normal_vert,fragmentShader:rp.normal_frag},sprite:{uniforms:zd([ip.sprite,ip.fog]),vertexShader:rp.sprite_vert,fragmentShader:rp.sprite_frag},background:{uniforms:{uvTransform:{value:new _h},t2D:{value:null}},vertexShader:rp.background_vert,fragmentShader:rp.background_frag},cube:{uniforms:zd([ip.envmap,{opacity:{value:1}}]),vertexShader:rp.cube_vert,fragmentShader:rp.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rp.equirect_vert,fragmentShader:rp.equirect_frag},distanceRGBA:{uniforms:zd([ip.common,ip.displacementmap,{referencePosition:{value:new Ch},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rp.distanceRGBA_vert,fragmentShader:rp.distanceRGBA_frag},shadow:{uniforms:zd([ip.lights,ip.fog,{color:{value:new ed(0)},opacity:{value:1}}]),vertexShader:rp.shadow_vert,fragmentShader:rp.shadow_frag}};function op(e,t,n,r,i){var a,o,s=new ed(0),u=0,c=null,l=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),f(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(s,u=e)},render:function(n,i){var d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?f(s,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Sl)?(void 0===o&&((o=new Id(new Dd(1,1,1),new Bd({name:"BackgroundCubeMaterial",uniforms:Fd(ap.cube.uniforms),vertexShader:ap.cube.vertexShader,fragmentShader:ap.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&l===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new Id(new np(2,2),new Bd({name:"BackgroundMaterial",uniforms:Fd(ap.background.uniforms),vertexShader:ap.background.vertexShader,fragmentShader:ap.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&l===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function sp(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),c=u;function l(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=c.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var t=c.newAttributes,n=c.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){x(),c!==u&&l((c=u).object)}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,x){var b=!1;if(o){var _=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var c=u[n.id];void 0===c&&(c={},u[n.id]=c);var l=c[o];return void 0===l&&(l=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=l),l}(y,h,u);c!==_&&l((c=_).object),b=function(e,t){var n=c.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,x),b&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,x)}else{var w=!0===u.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===w||(c.geometry=y.id,c.program=h.id,c.wireframe=w,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==x&&n.update(x,34963),b&&(function(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){d();var u=s.attributes,c=o.getAttributes(),l=a.defaultAttributeValues;for(var h in c){var f=c[h];if(f>=0){var y=u[h];if(void 0!==y){var x=y.normalized,b=y.itemSize,_=n.get(y);if(void 0===_)continue;var w=_.buffer,M=_.type,S=_.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,T=E.stride,A=y.offset;E&&E.isInstancedInterleavedBuffer?(v(f,E.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)):p(f),e.bindBuffer(34962,w),g(f,b,M,x,T*S,A*S)}else y.isInstancedBufferAttribute?(v(f,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(f),e.bindBuffer(34962,w),g(f,b,M,x,0,0)}else if("instanceMatrix"===h){var k=n.get(i.instanceMatrix);if(void 0===k)continue;var L=k.buffer,R=k.type;v(f+0,1),v(f+1,1),v(f+2,1),v(f+3,1),e.bindBuffer(34962,L),e.vertexAttribPointer(f+0,4,R,!1,64,0),e.vertexAttribPointer(f+1,4,R,!1,64,16),e.vertexAttribPointer(f+2,4,R,!1,64,32),e.vertexAttribPointer(f+3,4,R,!1,64,48)}else if("instanceColor"===h){var C=n.get(i.instanceColor);if(void 0===C)continue;var P=C.buffer,O=C.type;v(f,1),e.bindBuffer(34962,P),e.vertexAttribPointer(f,3,O,!1,12,0)}else if(void 0!==l){var I=l[h];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(f,I);break;case 3:e.vertexAttrib3fv(f,I);break;case 4:e.vertexAttrib4fv(f,I);break;default:e.vertexAttrib1fv(f,I)}}}}m()}}(i,u,h,y),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function up(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,c;if(a)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,r,o,s),n.update(o,i,s)}}}function cp(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,x=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?e.getParameter(36183):0}}function lp(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Zd,s=new _h,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,i){var a=null!==e?e.length:0,c=null;if(0!==a){if(c=u.value,!0!==i||null===c){var l=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(c,d),c[d+3]=o.constant}u.value=c,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=l(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||a&&!d)a?l(null):c();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=l(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function hp(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=wl:304===t&&(e.mapping=Ml),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(303===a||304===a){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new qd(o.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}ap.physical={uniforms:zd([ap.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new xh(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ed(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new xh},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new ed(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new ed(1,1,1)},specularTintMap:{value:null}}]),vertexShader:rp.meshphysical_vert,fragmentShader:rp.meshphysical_frag};var fp=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return r(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=a,e.top=o,e.bottom=s,e.near=u,e.far=c,e.updateProjectionMatrix(),e}return a(n,[{key:"copy",value:function(e,t){return cl(ul(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Hd);fp.prototype.isOrthographicCamera=!0;var dp=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).type="RawShaderMaterial",i}return n}(Bd);dp.prototype.isRawShaderMaterial=!0;var pp=Math.pow(2,8),vp=[.125,.215,.35,.446,.526,.582],mp=5+vp.length,gp=(ll(vl={},Jl,0),ll(vl,Kl,1),ll(vl,eh,2),ll(vl,3004,3),ll(vl,3005,4),ll(vl,3006,5),ll(vl,Ql,6),vl),yp=new td({side:1,depthWrite:!1,depthTest:!1}),xp=new Id(new Dd,yp),bp=new fp,_p=Op(),wp=_p._lodPlanes,Mp=_p._sizeLods,Sp=_p._sigmas,Ep=new ed,Tp=null,Ap=(1+Math.sqrt(5))/2,kp=1/Ap,Lp=[new Ch(1,1,1),new Ch(-1,1,1),new Ch(1,1,-1),new Ch(-1,1,-1),new Ch(0,Ap,kp),new Ch(0,Ap,-kp),new Ch(kp,0,Ap),new Ch(-kp,0,Ap),new Ch(Ap,kp,0),new Ch(-Ap,kp,0)];function Rp(e){var t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-n)),(n+128)/255}var Cp=function(){function e(t){var n,i;r(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=(20,n=new Float32Array(20),i=new Ch(0,1,0),new dp({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:gp[3e3]},outputEncoding:{value:gp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return a(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Tp=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Fp(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Dp(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<wp.length;e++)wp[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Tp),e.scissorTest=!1,Np(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){Tp=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:kl,minFilter:kl,generateMipmaps:!1,type:Ol,format:1023,encoding:Pp(e)?e.encoding:eh,depthBuffer:!1},n=Ip(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Ip(t),n}},{key:"_compileMaterial",value:function(e){var t=new Id(wp[0],e);this._renderer.compile(t,bp)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new jd(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,c=s.outputEncoding,l=s.toneMapping;s.getClearColor(Ep),s.toneMapping=0,s.outputEncoding=Jl,s.autoClear=!1;var h=!1,f=e.background;if(f){if(f.isColor){yp.color.copy(f).convertSRGBToLinear(),e.background=null;var d=Rp(yp.color);yp.opacity=d,h=!0}}else{yp.color.copy(Ep).convertSRGBToLinear();var p=Rp(yp.color);yp.opacity=p,h=!0}for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),Np(r,m*pp,v>2?pp:0,pp,pp),s.setRenderTarget(r),h&&s.render(xp,i),s.render(e,i)}s.toneMapping=l,s.outputEncoding=c,s.autoClear=u}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Fp()):null==this._equirectShader&&(this._equirectShader=Dp());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Id(wp[0],r),a=r.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=gp[e.encoding],a.outputEncoding.value=gp[t.texture.encoding],Np(t,0,0,3*pp,2*pp),n.setRenderTarget(t),n.render(i,bp)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<mp;r++){var i=Math.sqrt(Sp[r]*Sp[r]-Sp[r-1]*Sp[r-1]),a=Lp[(r-1)%Lp.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new Id(wp[r],u),l=u.uniforms,h=Mp[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):20;p>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(20));for(var v=[],m=0,g=0;g<20;++g){var y=g/d,x=Math.exp(-y*y/2);v.push(x),0==g?m+=x:g<p&&(m+=2*x)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=v,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=f,l.mipInt.value=8-n,l.inputEncoding.value=gp[e.texture.encoding],l.outputEncoding.value=gp[e.texture.encoding];var _=Mp[r];Np(t,3*Math.max(0,pp-2*_),(0===r?0:2*pp)+2*_*(r>4?r-8+4:0),3*_,2*_),s.setRenderTarget(t),s.render(c,bp)}}]),e}();function Pp(e){return void 0!==e&&e.type===Ol&&(e.encoding===Jl||e.encoding===Kl||e.encoding===Ql)}function Op(){for(var e=[],t=[],n=[],r=8,i=0;i<mp;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>4?o=vp[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(g,18*p),f.set(l,12*p);var y=[p,p,p,p,p,p];d.set(y,6*p)}var x=new md;x.setAttribute("position",new id(h,3)),x.setAttribute("uv",new id(f,2)),x.setAttribute("faceIndex",new id(d,1)),e.push(x),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Ip(e){var t=new Ah(3*pp,3*pp,e);return t.texture.mapping=Sl,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Np(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Dp(){var e=new xh(1,1);return new dp({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:gp[3e3]},outputEncoding:{value:gp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Fp(){return new dp({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:gp[3e3]},outputEncoding:{value:gp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function zp(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(i.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping,o=303===a||304===a,s=a===wl||a===Ml;if(o||s){if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(u)){var c=e.getRenderTarget();null===n&&(n=new Cp(e));var l=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,l),e.setRenderTarget(c),i.addEventListener("dispose",r),l.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Up(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Bp(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var c=a.get(s);c&&(t.remove(c),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],h=s[u+1],f=s[u+2];n.push(l,h,h,f,f,l)}}else{var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var x=new(ud(n)>65535?od:ad)(n,1);x.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,x)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Hp(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,c){if(0!==c){var l,h;if(s)l=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](i,u,a,r*o,c),n.update(u,i,c)}}}function jp(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Gp(e,t){return e[0]-t[0]}function Vp(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Wp(e){for(var t={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,a,o,s){var u=i.morphTargetInfluences,c=void 0===u?0:u.length,l=t[a.id];if(void 0===l||l.length!==c){l=[];for(var h=0;h<c;h++)l[h]=[h,0];t[a.id]=l}for(var f=0;f<c;f++){var d=l[f];d[0]=f,d[1]=u[f]}l.sort(Vp);for(var p=0;p<8;p++)p<c&&l[p][1]?(r[p][0]=l[p][0],r[p][1]=l[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(Gp);for(var v=a.morphAttributes.position,m=a.morphAttributes.normal,g=0,y=0;y<8;y++){var x=r[y],b=x[0],_=x[1];b!==Number.MAX_SAFE_INTEGER&&_?(v&&a.getAttribute("morphTarget"+y)!==v[b]&&a.setAttribute("morphTarget"+y,v[b]),m&&a.getAttribute("morphNormal"+y)!==m[b]&&a.setAttribute("morphNormal"+y,m[b]),n[y]=_,g+=_):(v&&!0===a.hasAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),m&&!0===a.hasAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var w=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",w),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function qp(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==o&&(t.update(u),i.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}var $p=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return r(this,n),(e=t.call(this,null)).image={data:i,width:a,height:o,depth:s},e.magFilter=kl,e.minFilter=kl,e.wrapR=Tl,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sh);$p.prototype.isDataTexture2DArray=!0;var Xp=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return r(this,n),(e=t.call(this,null)).image={data:i,width:a,height:o,depth:s},e.magFilter=kl,e.minFilter=kl,e.wrapR=Tl,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sh);Xp.prototype.isDataTexture3D=!0;var Yp=new Sh,Zp=new $p,Jp=new Xp,Kp=new Wd,Qp=[],ev=[],tv=new Float32Array(16),nv=new Float32Array(9),rv=new Float32Array(4);function iv(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Qp[i];if(void 0===a&&(a=new Float32Array(i),Qp[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function av(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ov(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function sv(e,t){var n=ev[t];void 0===n&&(n=new Int32Array(t),ev[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function uv(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function cv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(av(n,t))return;e.uniform2fv(this.addr,t),ov(n,t)}}function lv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(av(n,t))return;e.uniform3fv(this.addr,t),ov(n,t)}}function hv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(av(n,t))return;e.uniform4fv(this.addr,t),ov(n,t)}}function fv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ov(n,t)}else{if(av(n,r))return;rv.set(r),e.uniformMatrix2fv(this.addr,!1,rv),ov(n,r)}}function dv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ov(n,t)}else{if(av(n,r))return;nv.set(r),e.uniformMatrix3fv(this.addr,!1,nv),ov(n,r)}}function pv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ov(n,t)}else{if(av(n,r))return;tv.set(r),e.uniformMatrix4fv(this.addr,!1,tv),ov(n,r)}}function vv(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function mv(e,t){var n=this.cache;av(n,t)||(e.uniform2iv(this.addr,t),ov(n,t))}function gv(e,t){var n=this.cache;av(n,t)||(e.uniform3iv(this.addr,t),ov(n,t))}function yv(e,t){var n=this.cache;av(n,t)||(e.uniform4iv(this.addr,t),ov(n,t))}function xv(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function bv(e,t){var n=this.cache;av(n,t)||(e.uniform2uiv(this.addr,t),ov(n,t))}function _v(e,t){var n=this.cache;av(n,t)||(e.uniform3uiv(this.addr,t),ov(n,t))}function wv(e,t){var n=this.cache;av(n,t)||(e.uniform4uiv(this.addr,t),ov(n,t))}function Mv(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Yp,i)}function Sv(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Jp,i)}function Ev(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Kp,i)}function Tv(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Zp,i)}function Av(e,t){e.uniform1fv(this.addr,t)}function kv(e,t){var n=iv(t,this.size,2);e.uniform2fv(this.addr,n)}function Lv(e,t){var n=iv(t,this.size,3);e.uniform3fv(this.addr,n)}function Rv(e,t){var n=iv(t,this.size,4);e.uniform4fv(this.addr,n)}function Cv(e,t){var n=iv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Pv(e,t){var n=iv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ov(e,t){var n=iv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Iv(e,t){e.uniform1iv(this.addr,t)}function Nv(e,t){e.uniform2iv(this.addr,t)}function Dv(e,t){e.uniform3iv(this.addr,t)}function Fv(e,t){e.uniform4iv(this.addr,t)}function zv(e,t){e.uniform1uiv(this.addr,t)}function Uv(e,t){e.uniform2uiv(this.addr,t)}function Bv(e,t){e.uniform3uiv(this.addr,t)}function Hv(e,t){e.uniform4uiv(this.addr,t)}function jv(e,t,n){var r=t.length,i=sv(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||Yp,i[a])}function Gv(e,t,n){var r=t.length,i=sv(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||Kp,i[a])}function Vv(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return uv;case 35664:return cv;case 35665:return lv;case 35666:return hv;case 35674:return fv;case 35675:return dv;case 35676:return pv;case 5124:case 35670:return vv;case 35667:case 35671:return mv;case 35668:case 35672:return gv;case 35669:case 35673:return yv;case 5125:return xv;case 36294:return bv;case 36295:return _v;case 36296:return wv;case 35678:case 36198:case 36298:case 36306:case 35682:return Mv;case 35679:case 36299:case 36307:return Sv;case 35680:case 36300:case 36308:case 36293:return Ev;case 36289:case 36303:case 36311:case 36292:return Tv}}(t.type)}function Wv(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Av;case 35664:return kv;case 35665:return Lv;case 35666:return Rv;case 35674:return Cv;case 35675:return Pv;case 35676:return Ov;case 5124:case 35670:return Iv;case 35667:case 35671:return Nv;case 35668:case 35672:return Dv;case 35669:case 35673:return Fv;case 5125:return zv;case 36294:return Uv;case 36295:return Bv;case 36296:return Hv;case 35678:case 36198:case 36298:case 36306:case 35682:return jv;case 35680:case 36300:case 36308:case 36293:return Gv}}(t.type)}function qv(e){this.id=e,this.seq=[],this.map={}}Wv.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ov(t,e)},qv.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var $v=/(\w+)(\])?(\[|\.)?/g;function Xv(e,t){e.seq.push(t),e.map[t.id]=t}function Yv(e,t,n){var r=e.name,i=r.length;for($v.lastIndex=0;;){var a=$v.exec(r),o=$v.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s|=0),void 0===c||"["===c&&o+2===i){Xv(n,void 0===c?new Vv(s,e,t):new Wv(s,e,t));break}var l=n.map[s];void 0===l&&Xv(n,l=new qv(s)),n=l}}function Zv(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Yv(i,e.getUniformLocation(t,i.name),this)}}function Jv(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Zv.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Zv.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Zv.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Zv.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Kv=0;function Qv(e){switch(e){case Jl:return["Linear","( value )"];case Kl:return["sRGB","( value )"];case eh:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case Ql:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function em(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function tm(e,t){var n=Qv(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function nm(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function rm(e){return""!==e}function im(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function am(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var om=/^[ \t]*#include +<([\w\d./]+)>/gm;function sm(e){return e.replace(om,um)}function um(e,t){var n=rp[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return sm(n)}var cm=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hm(e){return e.replace(lm,dm).replace(cm,fm)}function fm(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dm(0,t,n,r)}function dm(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function pm(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function vm(e,t,n,r){var i,a,o,s,u=e.getContext(),c=n.defines,l=n.vertexShader,h=n.fragmentShader,f=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case wl:case Ml:t="ENVMAP_TYPE_CUBE";break;case Sl:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Ml:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rm).join("\n")}(n),y=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),x=u.createProgram(),b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[y].filter(rm).join("\n")).length>0&&(i+="\n"),(a=[g,y].filter(rm).join("\n")).length>0&&(a+="\n")):(i=[pm(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rm).join("\n"),a=[g,pm(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?rp.tonemapping_pars_fragment:"",0!==n.toneMapping?nm("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",rp.encodings_pars_fragment,n.map?tm("mapTexelToLinear",n.mapEncoding):"",n.matcap?tm("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?tm("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?tm("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?tm("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?tm("lightMapTexelToLinear",n.lightMapEncoding):"",("linearToOutputTexel",o=n.outputEncoding,s=Qv(o),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(rm).join("\n")),l=am(l=im(l=sm(l),n),n),h=am(h=im(h=sm(h),n),n),l=hm(l),h=hm(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===ih?"":"out highp vec4 pc_fragColor;",n.glslVersion===ih?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,w,M=b+a+h,S=Jv(u,35633,b+i+l),E=Jv(u,35632,M);if(u.attachShader(x,S),u.attachShader(x,E),void 0!==n.index0AttributeName?u.bindAttribLocation(x,0,n.index0AttributeName):!0===n.morphTargets&&u.bindAttribLocation(x,0,"position"),u.linkProgram(x),e.debug.checkShaderErrors){var T=u.getProgramInfoLog(x).trim(),A=u.getShaderInfoLog(S).trim(),k=u.getShaderInfoLog(E).trim(),L=!0,R=!0;if(!1===u.getProgramParameter(x,35714)){L=!1;var C=em(u,S,"vertex"),P=em(u,E,"fragment");console.error("THREE.WebGLProgram: shader error: ",u.getError(),"35715",u.getProgramParameter(x,35715),"gl.getProgramInfoLog",T,C,P)}else""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==A&&""!==k||(R=!1);R&&(this.diagnostics={runnable:L,programLog:T,vertexShader:{log:A,prefix:i},fragmentShader:{log:k,prefix:a}})}return u.deleteShader(S),u.deleteShader(E),this.getUniforms=function(){return void 0===_&&(_=new Zv(u,x)),_},this.getAttributes=function(){return void 0===w&&(w=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(u,x)),w},this.destroy=function(){r.releaseStatesOfProgram(this),u.deleteProgram(x),this.program=void 0},this.name=n.shaderName,this.id=Kv++,this.cacheKey=t,this.usedTimes=1,this.program=x,this.vertexShader=S,this.fragmentShader=E,this}function mm(e,t,n,r,i,a,o){var s=[],u=i.isWebGL2,c=i.logarithmicDepthBuffer,l=i.floatVertexTextures,h=i.maxVertexUniforms,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Jl,t}return{getParameters:function(a,s,v,g,y){var x,b,_=g.fog,w=a.isMeshStandardMaterial?g.environment:null,M=(a.isMeshStandardMaterial?n:t).get(a.envMap||w),S=p[a.type],E=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(l)return 1024;var n=h,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(y):0;if(null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."),S){var T=ap[S];x=T.vertexShader,b=T.fragmentShader}else x=a.vertexShader,b=a.fragmentShader;var A=e.getRenderTarget();return{isWebGL2:u,shaderID:S,shaderName:a.type,vertexShader:x,fragmentShader:b,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null!==A?m(A.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!M,envMapMode:M&&M.mapping,envMapEncoding:m(M),envMapCubeUV:!!M&&(M.mapping===Sl||307===M.mapping),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,clearcoatMap:!!a.clearcoatMap,clearcoatRoughnessMap:!!a.clearcoatRoughnessMap,clearcoatNormalMap:!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularTintMap:!!a.specularTintMap,specularTintMapEncoding:m(a.specularTintMap),alphaMap:!!a.alphaMap,gradientMap:!!a.gradientMap,sheen:!!a.sheen,transmission:!!a.transmission,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularTintMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularTintMap||!a.displacementMap),fog:!!_,useFog:a.fog,fogExp2:_&&_.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===y.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:l,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=ap[n];t=Ud.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=s.length;i<o;i++){var u=s[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new vm(e,n,t,a),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function gm(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function ym(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function xm(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function bm(e){var t=[],n=0,r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,u,c){var l=t[n],h=e.get(a);return void 0===l?(l={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:c},t[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=a,l.program=h.program||o,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=u,l.group=c),n++,l}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,u,c){var l=s(e,t,n,o,u,c);n.transmission>0?i.push(l):!0===n.transparent?a.push(l):r.push(l)},unshift:function(e,t,n,o,u,c){var l=s(e,t,n,o,u,c);n.transmission>0?i.unshift(l):!0===n.transparent?a.unshift(l):r.unshift(l)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||ym),i.length>1&&i.sort(t||xm),a.length>1&&a.sort(t||xm)}}}function _m(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new bm(e),t.set(n,[i])):r>=t.get(n).length?(i=new bm(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function wm(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ch,color:new ed};break;case"SpotLight":n={position:new Ch,direction:new Ch,color:new ed,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ch,color:new ed,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ch,skyColor:new ed,groundColor:new ed};break;case"RectAreaLight":n={color:new ed,position:new Ch,halfWidth:new Ch,halfHeight:new Ch}}return e[t.id]=n,n}}}var Mm=0;function Sm(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Em(e,t){for(var n,r=new wm,i=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xh};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xh,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)a.probe.push(new Ch);var s=new Ch,u=new cf,c=new cf;return{setup:function(n){for(var o=0,s=0,u=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var l=0,h=0,f=0,d=0,p=0,v=0,m=0,g=0;n.sort(Sm);for(var y=0,x=n.length;y<x;y++){var b=n[y],_=b.color,w=b.intensity,M=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)o+=_.r*w,s+=_.g*w,u+=_.b*w;else if(b.isLightProbe)for(var E=0;E<9;E++)a.probe[E].addScaledVector(b.sh.coefficients[E],w);else if(b.isDirectionalLight){var T=r.get(b);if(T.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){var A=b.shadow,k=i.get(b);k.shadowBias=A.bias,k.shadowNormalBias=A.normalBias,k.shadowRadius=A.radius,k.shadowMapSize=A.mapSize,a.directionalShadow[l]=k,a.directionalShadowMap[l]=S,a.directionalShadowMatrix[l]=b.shadow.matrix,v++}a.directional[l]=T,l++}else if(b.isSpotLight){var L=r.get(b);if(L.position.setFromMatrixPosition(b.matrixWorld),L.color.copy(_).multiplyScalar(w),L.distance=M,L.coneCos=Math.cos(b.angle),L.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),L.decay=b.decay,b.castShadow){var R=b.shadow,C=i.get(b);C.shadowBias=R.bias,C.shadowNormalBias=R.normalBias,C.shadowRadius=R.radius,C.shadowMapSize=R.mapSize,a.spotShadow[f]=C,a.spotShadowMap[f]=S,a.spotShadowMatrix[f]=b.shadow.matrix,g++}a.spot[f]=L,f++}else if(b.isRectAreaLight){var P=r.get(b);P.color.copy(_).multiplyScalar(w),P.halfWidth.set(.5*b.width,0,0),P.halfHeight.set(0,.5*b.height,0),a.rectArea[d]=P,d++}else if(b.isPointLight){var O=r.get(b);if(O.color.copy(b.color).multiplyScalar(b.intensity),O.distance=b.distance,O.decay=b.decay,b.castShadow){var I=b.shadow,N=i.get(b);N.shadowBias=I.bias,N.shadowNormalBias=I.normalBias,N.shadowRadius=I.radius,N.shadowMapSize=I.mapSize,N.shadowCameraNear=I.camera.near,N.shadowCameraFar=I.camera.far,a.pointShadow[h]=N,a.pointShadowMap[h]=S,a.pointShadowMatrix[h]=b.shadow.matrix,m++}a.point[h]=O,h++}else if(b.isHemisphereLight){var D=r.get(b);D.skyColor.copy(b.color).multiplyScalar(w),D.groundColor.copy(b.groundColor).multiplyScalar(w),a.hemi[p]=D,p++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=ip.LTC_FLOAT_1,a.rectAreaLTC2=ip.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=ip.LTC_HALF_1,a.rectAreaLTC2=ip.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=o,a.ambient[1]=s,a.ambient[2]=u;var F=a.hash;F.directionalLength===l&&F.pointLength===h&&F.spotLength===f&&F.rectAreaLength===d&&F.hemiLength===p&&F.numDirectionalShadows===v&&F.numPointShadows===m&&F.numSpotShadows===g||(a.directional.length=l,a.spot.length=f,a.rectArea.length=d,a.point.length=h,a.hemi.length=p,a.directionalShadow.length=v,a.directionalShadowMap.length=v,a.pointShadow.length=m,a.pointShadowMap.length=m,a.spotShadow.length=g,a.spotShadowMap.length=g,a.directionalShadowMatrix.length=v,a.pointShadowMatrix.length=m,a.spotShadowMatrix.length=g,F.directionalLength=l,F.pointLength=h,F.spotLength=f,F.rectAreaLength=d,F.hemiLength=p,F.numDirectionalShadows=v,F.numPointShadows=m,F.numSpotShadows=g,a.version=Mm++)},setupView:function(e,t){for(var n=0,r=0,i=0,o=0,l=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=a.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=a.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),i++}else if(p.isRectAreaLight){var g=a.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),c.identity(),u.copy(p.matrixWorld),u.premultiply(h),c.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(c),g.halfHeight.applyMatrix4(c),o++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var x=a.hemi[l];x.direction.setFromMatrixPosition(p.matrixWorld),x.direction.transformDirection(h),x.direction.normalize(),l++}}},state:a}}function Tm(e,t){var n=new Em(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Am(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Tm(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new Tm(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var km=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshDepthMaterial",i.depthPacking=3200,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}($f);km.prototype.isMeshDepthMaterial=!0;var Lm=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshDistanceMaterial",i.referencePosition=new Ch,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.fog=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}($f);function Rm(e,t,n){var r=new Qd,i=new xh,a=new xh,o=new Th,s=new km({depthPacking:3201}),u=new Lm,c={},l=n.maxTextureSize,h={0:1,1:0,2:2},f=new Bd({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new xh},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new md;p.setAttribute("position",new id(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Id(p,f),m=this;function g(n,r){var i=t.update(v);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,a,o,l){var f=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(f=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var p=f.uuid,v=r.uuid,m=c[p];void 0===m&&(m={},c[p]=m);var g=m[v];void 0===g&&(g=f.clone(),m[v]=g),f=g}return f.visible=r.visible,f.wireframe=r.wireframe,f.side=3===l?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],f.clipShadows=r.clipShadows,f.clippingPlanes=r.clippingPlanes,f.clipIntersection=r.clipIntersection,f.wireframeLinewidth=r.wireframeLinewidth,f.linewidth=r.linewidth,!0===i.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=a,f.farDistance=o),f}function x(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,h=0,f=l.length;h<f;h++){var d=l[h],p=c[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(c.visible){var m=y(n,0,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,b=0,_=g.length;b<_;b++)x(g[b],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),a.copy(y.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(a.x=Math.floor(l/b.x),i.x=a.x*b.x,y.mapSize.x=a.x),i.y>l&&(a.y=Math.floor(l/b.y),i.y=a.y*b.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var _={minFilter:Cl,magFilter:Cl,format:Bl};y.map=new Ah(i.x,i.y,_),y.map.texture.name=v.name+".shadowMap",y.mapPass=new Ah(i.x,i.y,_),y.camera.updateProjectionMatrix()}if(null===y.map){var w={minFilter:kl,magFilter:kl,format:Bl};y.map=new Ah(i.x,i.y,w),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),S=0;S<M;S++){var E=y.getViewport(S);o.set(a.x*E.x,a.y*E.y,a.x*E.z,a.y*E.w),f.viewport(o),y.updateMatrices(v,S),r=y.getFrustum(),x(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function Cm(e,t,n){var r,i,a=n.isWebGL2,o=new function(){var t=!1,n=new Th,r=null,i=new Th(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?U(2929):B(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?U(2960):B(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null}}},c={},l=null,h={},f=null,d=!1,p=null,v=null,m=null,g=null,y=null,x=null,b=null,_=!1,w=null,M=null,S=null,E=null,T=null,A=e.getParameter(35661),k=!1,L=0,R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(R)[1]),k=L>=1):-1!==R.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),k=L>=2);var C=null,P={},O=e.getParameter(3088),I=e.getParameter(2978),N=(new Th).fromArray(O),D=(new Th).fromArray(I);function F(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var z={};function U(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function B(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[3553]=F(3553,3553,1),z[34067]=F(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),U(2929),s.setFunc(3),W(!1),q(1),U(2884),V(0);var H=(ll(r={},_l,32774),ll(r,101,32778),ll(r,102,32779),r);if(a)H[103]=32775,H[104]=32776;else{var j=t.get("EXT_blend_minmax");null!==j&&(H[103]=j.MIN_EXT,H[104]=j.MAX_EXT)}var G=(ll(i={},200,0),ll(i,201,1),ll(i,202,768),ll(i,204,770),ll(i,210,776),ll(i,208,774),ll(i,206,772),ll(i,203,769),ll(i,205,771),ll(i,209,775),ll(i,207,773),i);function V(t,n,r,i,a,o,s,u){if(0!==t){if(!1===d&&(U(3042),d=!0),5===t)a=a||n,o=o||r,s=s||i,n===v&&a===y||(e.blendEquationSeparate(H[n],H[a]),v=n,y=a),r===m&&i===g&&o===x&&s===b||(e.blendFuncSeparate(G[r],G[i],G[o],G[s]),m=r,g=i,x=o,b=s),p=t,_=null;else if(t!==p||u!==_){if(v===_l&&y===_l||(e.blendEquation(32774),v=_l,y=_l),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,x=null,b=null,p=t,_=u}}else!0===d&&(B(3042),d=!1)}function W(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function q(t){0!==t?(U(2884),t!==M&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):B(2884),M=t}function $(t,n,r){t?(U(32823),E===n&&T===r||(e.polygonOffset(n,r),E=n,T=r)):B(32823)}function X(t){void 0===t&&(t=33984+A-1),C!==t&&(e.activeTexture(t),C=t)}return{buffers:{color:o,depth:s,stencil:u},enable:U,disable:B,bindFramebuffer:function(t,n){return null===n&&null!==l&&(n=l),h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(36160,t),l=t)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?B(2884):U(2884);var n=1===e.side;t&&(n=!n),W(n),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):B(32926)},setFlipSided:W,setCullFace:q,setLineWidth:function(t){t!==S&&(k&&e.lineWidth(t),S=t)},setPolygonOffset:$,setScissorTest:function(e){e?U(3089):B(3089)},activeTexture:X,bindTexture:function(t,n){null===C&&X();var r=P[C];void 0===r&&(r={type:void 0,texture:void 0},P[C]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||z[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=P[C];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},C=null,P={},l=null,h={},f=null,d=!1,p=null,v=null,m=null,g=null,y=null,x=null,b=null,_=!1,w=null,M=null,S=null,E=null,T=null,N.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function Pm(e,t,n,r,i,a,o){var s,u,c,l=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=new WeakMap,m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function g(e,t){return m?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?gh:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===c&&(c=g(o,s));var u=n?g(o,s):c;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return vh(e.width)&&vh(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==kl&&e.minFilter!==Cl}function _(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.generateMipmap(t);var s=r.get(n);s.__maxMipLevel=Math.log2(Math.max(i,a,o))}function w(n,r,i){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function M(e){return e===kl||e===Ll||e===Rl?9728:9729}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&v.delete(n),o.memory.textures--}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(t){if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var l=r.get(n[u]);l.__webglTexture&&(e.deleteTexture(l.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}}(n)}var T=0;function A(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void O(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function k(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6===r.image.length){P(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],c=0;c<6;c++)u[c]=o||s?s?r.image[c].image:r.image[c]:y(r.image[c],!1,!0,f);var h,d=u[0],p=x(d)||l,v=a.convert(r.format),m=a.convert(r.type),g=w(r.internalFormat,v,m);if(C(34067,r,p),o){for(var M=0;M<6;M++){h=u[M].mipmaps;for(var S=0;S<h.length;S++){var E=h[S];r.format!==Bl&&r.format!==Ul?null!==v?n.compressedTexImage2D(34069+M,S,g,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+M,S,g,E.width,E.height,0,v,m,E.data)}}t.__maxMipLevel=h.length-1}else{h=r.mipmaps;for(var T=0;T<6;T++)if(s){n.texImage2D(34069+T,0,g,u[T].width,u[T].height,0,v,m,u[T].data);for(var A=0;A<h.length;A++){var k=h[A].image[T].image;n.texImage2D(34069+T,A+1,g,k.width,k.height,0,v,m,k.data)}}else{n.texImage2D(34069+T,0,g,v,m,u[T]);for(var L=0;L<h.length;L++){var R=h[L];n.texImage2D(34069+T,L+1,g,v,m,R.image[T])}}t.__maxMipLevel=h.length}b(r,p)&&_(34067,r,d.width,d.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}var L=(ll(s={},El,10497),ll(s,Tl,33071),ll(s,Al,33648),s),R=(ll(u={},kl,9728),ll(u,Ll,9984),ll(u,Rl,9986),ll(u,Cl,9729),ll(u,1007,9985),ll(u,Pl,9987),u);function C(n,a,o){if(o?(e.texParameteri(n,10242,L[a.wrapS]),e.texParameteri(n,10243,L[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,L[a.wrapR]),e.texParameteri(n,10240,R[a.magFilter]),e.texParameteri(n,10241,R[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Tl&&a.wrapT===Tl||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==kl&&a.minFilter!==Cl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===Dl&&!1===t.has("OES_texture_float_linear"))return;if(!1===l&&a.type===Fl&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function P(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),o.memory.textures++)}function O(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),P(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!l&&(e.wrapS!==Tl||e.wrapT!==Tl||e.minFilter!==kl&&e.minFilter!==Cl)}(r)&&!1===x(r.image),c=y(r.image,u,!1,d),h=x(c)||l,f=a.convert(r.format),p=a.convert(r.type),v=w(r.internalFormat,f,p);C(o,r,h);var m=r.mipmaps;if(r.isDepthTexture)v=6402,l?v=r.type===Dl?36012:r.type===Nl?33190:r.type===zl?35056:33189:r.type===Dl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Hl&&6402===v&&r.type!==Il&&r.type!==Nl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Il,p=a.convert(r.type)),r.format===jl&&6402===v&&(v=34041,r.type!==zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=zl,p=a.convert(r.type))),n.texImage2D(3553,0,v,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(m.length>0&&h){for(var g=0,M=m.length;g<M;g++)s=m[g],n.texImage2D(3553,g,v,s.width,s.height,0,f,p,s.data);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,c.width,c.height,0,f,p,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var S=0,E=m.length;S<E;S++)s=m[S],r.format!==Bl&&r.format!==Ul?null!==f?n.compressedTexImage2D(3553,S,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,v,s.width,s.height,0,f,p,s.data);t.__maxMipLevel=m.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,c.width,c.height,c.depth,0,f,p,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,c.width,c.height,c.depth,0,f,p,c.data),t.__maxMipLevel=0;else if(m.length>0&&h){for(var T=0,A=m.length;T<A;T++)s=m[T],n.texImage2D(3553,T,v,f,p,s);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,f,p,c),t.__maxMipLevel=0;b(r,h)&&_(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function I(t,i,o,s,u){var c=a.convert(o.format),l=a.convert(o.type),h=w(o.internalFormat,c,l);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,c,l,null):n.texImage2D(u,0,h,i.width,i.height,0,c,l,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Dl?i=36012:o.type===Nl&&(i=33190));var s=D(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=D(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var c=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,l=a.convert(c.format),h=a.convert(c.type),f=w(c.internalFormat,l,h);if(r){var d=D(n);e.renderbufferStorageMultisample(36161,d,f,n.width,n.height)}else e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(e){return l&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}var F=!1,z=!1;this.allocateTextureUnit=function(){var e=T;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=A,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=k,this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),c=r.get(s);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,v=x(t)||l;if(!l||s.format!==Ul||s.type!==Dl&&s.type!==Fl||(s.format=Bl,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(var m=0;m<6;m++)u.__webglFramebuffer[m]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var g=t.texture,y=0,M=g.length;y<M;y++){var S=r.get(g[y]);void 0===S.__webglTexture&&(S.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(l){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var T=a.convert(s.format),k=a.convert(s.type),L=w(s.internalFormat,T,k),R=D(t);e.renderbufferStorageMultisample(36161,R,L,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),N(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),C(34067,s,v);for(var P=0;P<6;P++)I(u.__webglFramebuffer[P],t,s,36064,34069+P);b(s,v)&&_(34067,s,t.width,t.height),n.bindTexture(34067,null)}else if(f){for(var O=t.texture,F=0,z=O.length;F<z;F++){var U=O[F],B=r.get(U);n.bindTexture(3553,B.__webglTexture),C(3553,U,v),I(u.__webglFramebuffer,t,U,36064+F,3553),b(U,v)&&_(3553,U,t.width,t.height)}n.bindTexture(3553,null)}else{var H=3553;p&&(l?H=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(H,c.__webglTexture),C(H,s,v),I(u.__webglFramebuffer,t,s,36064,H),b(s,v)&&_(H,s,t.width,t.height,t.depth),n.bindTexture(H,null)}t.depthBuffer&&function(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Hl)e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==jl)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),N(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){for(var t=x(e)||l,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(b(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(u,c),_(u,s,e.width,e.height),n.bindTexture(u,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(l){var i=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),A(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),k(e,t)}}function Om(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Ol)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===Il)return 5123;if(1013===e)return 5124;if(e===Nl)return 5125;if(e===Dl)return 5126;if(e===Fl)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(e===Ul)return 6407;if(e===Bl)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===Hl)return 6402;if(e===jl)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===zl?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}Lm.prototype.isMeshDistanceMaterial=!0;var Im=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r(this,n),(e=t.call(this)).cameras=i,e}return n}(jd);Im.prototype.isArrayCamera=!0;var Nm=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="Group",e}return n}(If);Nm.prototype.isGroup=!0;var Dm={type:"move"},Fm=function(){function e(){r(this,e),this._targetRay=null,this._grip=null,this._hand=null}return a(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Nm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Nm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ch,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ch),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Nm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ch,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ch),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Dm)),u&&e.hand){a=!0;var c,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e.hand.values());try{for(l.s();!(c=l.n()).done;){var h=c.value,f=t.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var d=new Nm;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[h.jointName]=d,u.add(d)}var p=u.joints[h.jointName];null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(e){l.e(e)}finally{l.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}}]),e}(),zm=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;r(this,n);var o=hl(a=t.call(this)),s=e.state,u=null,c=1,l=null,h="local-floor",f=null,d=null,p=null,v=null,m=null,g=[],y=new Map,x=new jd;x.layers.enable(1),x.viewport=new Th;var b=new jd;b.layers.enable(2),b.viewport=new Th;var _=[x,b],w=new Im;w.layers.enable(1),w.layers.enable(2);var M=null,S=null;function E(e){var t=y.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function T(){y.forEach((function(e,t){e.disconnect(t)})),y.clear(),M=null,S=null,s.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),P.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function A(e){for(var t=u.inputSources,n=0;n<g.length;n++)y.set(t[n],g[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=y.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),y.delete(i))}for(var o=0;o<e.added.length;o++){var s=e.added[o],c=y.get(s);c&&c.dispatchEvent({type:"connected",data:s})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=g[e];return void 0===t&&(t=new Fm,g[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=g[e];return void 0===t&&(t=new Fm,g[e]=t),t.getGripSpace()},a.getHand=function(e){var t=g[e];return void 0===t&&(t=new Fm,g[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){c=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){h=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return l},a.getSession=function(){return u},a.setSession=function(){var e,t=(e=gl().mark((function e(t){var n,r,a,s,f;return gl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(u=t)){e.next=22;break}if(u.addEventListener("select",E),u.addEventListener("selectstart",E),u.addEventListener("selectend",E),u.addEventListener("squeeze",E),u.addEventListener("squeezestart",E),u.addEventListener("squeezeend",E),u.addEventListener("end",T),u.addEventListener("inputsourceschange",A),!0===(n=i.getContextAttributes()).xrCompatible){e.next=14;break}return e.next=14,i.makeXRCompatible();case 14:return void 0===u.renderState.layers?(r={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:c},m=new XRWebGLLayer(u,i,r),u.updateRenderState({baseLayer:m})):(a=0,n.antialias?(s={antialias:!0,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:c},m=new XRWebGLLayer(u,i,s),u.updateRenderState({layers:[m]})):(n.depth&&(a=n.stencil?34041:6402),f={colorFormat:n.alpha?6408:6407,depthFormat:a,scaleFactor:c},d=new XRWebGLBinding(u,i),v=d.createProjectionLayer(f),p=i.createFramebuffer(),u.updateRenderState({layers:[v]}))),e.next=17,u.requestReferenceSpace(h);case 17:l=e.sent,P.setContext(u),P.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 22:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){sl(a,r,i,o,s,"next",e)}function s(e){sl(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();var k=new Ch,L=new Ch;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==u){w.near=b.near=x.near=e.near,w.far=b.far=x.far=e.far,M===w.near&&S===w.far||(u.updateRenderState({depthNear:w.near,depthFar:w.far}),M=w.near,S=w.far);var t=e.parent,n=w.cameras;R(w,t);for(var r=0;r<n.length;r++)R(n[r],t);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),e.position.copy(w.position),e.quaternion.copy(w.quaternion),e.scale.copy(w.scale),e.matrix.copy(w.matrix),e.matrixWorld.copy(w.matrixWorld);for(var i=e.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);var r=k.distanceTo(L),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*l,d=o*h,p=r/(-l+h),v=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=f-v,x=d+(r-v),b=u*s/g*m,_=c*s/g*m;e.projectionMatrix.makePerspective(y,x,b,_,m,g)}(w,x,b):w.projectionMatrix.copy(x.projectionMatrix)}},a.getCamera=function(){return w},a.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},a.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var C=null,P=new ep;return P.setAnimationLoop((function(e,t){if(null!==(f=t.getViewerPose(l))){var n=f.views;null!==m&&s.bindXRFramebuffer(m.framebuffer);var r=!1;n.length!==w.cameras.length&&(w.cameras.length=0,r=!0);for(var a=0;a<n.length;a++){var o=n[a],c=null;if(null!==m)c=m.getViewport(o);else{var h=d.getViewSubImage(v,o);s.bindXRFramebuffer(p),void 0!==h.depthStencilTexture&&i.framebufferTexture2D(36160,36096,3553,h.depthStencilTexture,0),i.framebufferTexture2D(36160,36064,3553,h.colorTexture,0),c=h.viewport}var y=_[a];y.matrix.fromArray(o.transform.matrix),y.projectionMatrix.fromArray(o.projectionMatrix),y.viewport.set(c.x,c.y,c.width,c.height),0===a&&w.matrix.copy(y.matrix),!0===r&&w.cameras.push(y)}}for(var x=u.inputSources,b=0;b<g.length;b++){var M=g[b],S=x[b];M.update(S,t,l)}C&&C(e,t)})),a.setAnimationLoop=function(e){C=e},a.dispose=function(){},a}return n}(ah);function Um(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,i,a=e.get(n).envMap;if(a){t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var o=e.get(a).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap&&(r=n.specularTintMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Bm(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function Hm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:Bm(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Jl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,x=null,b=-1,_=null,w=new Th,M=new Th,S=null,E=t.width,T=t.height,A=1,k=null,L=null,R=new Th(0,0,E,T),C=new Th(0,0,E,T),P=!1,O=[],I=new Qd,N=!1,D=!1,F=null,z=new cf,U=new Ch,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===x?A:1}var j,G,V,W,q,$,X,Y,Z,J,K,Q,ee,te,ne,re,ie,ae,oe,se,ue,ce,le,he=n;function fe(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{var de={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===he){var pe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&pe.shift(),null===(he=fe(pe,de)))throw fe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ve(){j=new Up(he),G=new cp(he,j,e),j.init(G),ce=new Om(he,j,G),V=new Cm(he,j,G),O[0]=1029,W=new jp(he),q=new gm,$=new Pm(he,j,V,q,G,ce,W),X=new hp(v),Y=new zp(v),Z=new tp(he,G),le=new sp(he,j,Z,G),J=new Bp(he,Z,W,le),K=new qp(he,J,Z,W),oe=new Wp(he),re=new lp(q),Q=new mm(v,X,Y,j,G,le,re),ee=new Um(q),te=new _m(q),ne=new Am(j,G),ae=new op(v,X,V,K,s),ie=new Rm(v,K,G),se=new up(he,j,W,G),ue=new Hp(he,j,W,G),W.programs=Q.programs,v.capabilities=G,v.extensions=j,v.properties=q,v.renderLists=te,v.shadowMap=ie,v.state=V,v.info=W}ve();var me=new zm(v,he);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;ve(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),be(t)}function be(e){_e(e),q.remove(e)}function _e(e){var t=q.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))}function we(e,t){e.render((function(e){v.renderBufferImmediate(e,t)}))}this.xr=me,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=j.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=j.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(E,T,!1))},this.getSize=function(e){return e.set(E,T)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,T=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*A,T*A).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,T=n,A=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),V.viewport(w.copy(R).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(C)},this.setScissor=function(e,t,n,r){e.isVector4?C.set(e.x,e.y,e.z,e.w):C.set(e,t,n,r),V.scissor(M.copy(C).multiplyScalar(A).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(e){V.setScissorTest(P=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),q.dispose(),X.dispose(),Y.dispose(),K.dispose(),le.dispose(),me.dispose(),me.removeEventListener("sessionstart",Ee),me.removeEventListener("sessionend",Te),F&&(F.dispose(),F=null),Ae.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();var n=q.get(e);e.hasPositions&&!n.position&&(n.position=he.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=he.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=he.createBuffer()),e.hasColors&&!n.color&&(n.color=he.createBuffer());var r=t.getAttributes();e.hasPositions&&(he.bindBuffer(34962,n.position),he.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),he.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(he.bindBuffer(34962,n.normal),he.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),he.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(he.bindBuffer(34962,n.uv),he.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),he.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(he.bindBuffer(34962,n.color),he.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),he.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),he.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ie(e,t,r,i);V.setMaterial(r,o);var u=n.index,c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var l,h=1;!0===r.wireframe&&(u=J.getWireframeAttribute(n),h=2),void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(i,n,r,s),le.setup(i,r,s,n,u);var f=se;null!==u&&(l=Z.get(u),(f=ue).setIndex(l));var d=null!==u?u.count:c.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),x=Math.min(d,p+v,m+g)-1,b=Math.max(0,x-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*H()),f.setMode(1)):f.setMode(4);else if(i.isLine){var _=r.linewidth;void 0===_&&(_=1),V.setLineWidth(_*H()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,b,w)}else f.render(y,b)}},this.compile=function(e,t){(f=ne.get(e)).init(),p.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Pe(n[r],e,t);else Pe(n,e,t)})),p.pop(),f=null};var Me=null;function Se(e){Me&&Me(e)}function Ee(){Ae.stop()}function Te(){Ae.start()}var Ae=new ep;function ke(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var i=K.update(e),a=e.material;a.visible&&h.push(e,i,a,n,U.z,null)}}else if(e.isImmediateRenderObject)r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var o=K.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,c=0,l=u.length;c<l;c++){var d=u[c],p=s[d.materialIndex];p&&p.visible&&h.push(e,o,p,n,U.z,d)}else s.visible&&h.push(e,o,s,n,U.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)ke(v[m],t,n,r)}}function Le(e,t,n,r){if(null===F){var i=!0===o&&!0===G.isWebGL2;F=new(i?Lh:Ah)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(Fl)?Fl:Ol,minFilter:Pl,magFilter:kl,wrapS:Tl,wrapT:Tl})}var a=v.getRenderTarget();v.setRenderTarget(F),v.clear();var s=v.toneMapping;v.toneMapping=0,Re(e,n,r),v.toneMapping=s,$.updateMultisampleRenderTarget(F),$.updateRenderTargetMipmap(F),v.setRenderTarget(a),Re(t,n,r)}function Re(e,t,n){var r=!0===t.isScene?t.overrideMaterial:null;if(n.isArrayCamera)for(var i=n.cameras,a=0,o=i.length;a<o;a++){var s=i[a];V.viewport(w.copy(s.viewport)),f.setupLightsView(s);for(var u=0,c=e.length;u<c;u++){var l=e[u],h=l.object,d=l.geometry,p=null===r?l.material:r,v=l.group;h.layers.test(s.layers)&&Ce(h,t,s,d,p,v)}}else for(var m=0,g=e.length;m<g;m++){var y=e[m];Ce(y.object,t,n,y.geometry,null===r?y.material:r,y.group)}}function Ce(e,t,n,r,i,a){if(e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=Ie(n,t,i,e);V.setMaterial(i),le.reset(),we(e,o)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=2):v.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(v,t,n,r,i,a)}function Pe(e,t,n){!0!==t.isScene&&(t=B);var r=q.get(e),i=f.state.lights,a=f.state.shadowsArray,o=i.state.version,s=Q.getParameters(e,i.state,a,t,n),u=Q.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",xe),c=new Map,r.programs=c);var l=c.get(u);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===o)return Oe(e,s),l}else s.uniforms=Q.getUniforms(e),e.onBuild(s,v),e.onBeforeCompile(s,v),l=Q.acquireProgram(s,u),c.set(u,l),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Oe(e,s),r.needsLights=De(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=l.getUniforms(),p=Zv.seqWithValue(d.seq,h);return r.currentProgram=l,r.uniformsList=p,l}function Oe(e,t){var n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ie(e,t,n,r){!0!==t.isScene&&(t=B),$.resetTextureUnits();var i=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===x?v.outputEncoding:x.texture.encoding,s=(n.isMeshStandardMaterial?Y:X).get(n.envMap||a),u=!0===n.vertexColors&&!!r.geometry&&!!r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,c=!!r.geometry&&!!r.geometry.attributes.tangent,l=!!r.geometry&&!!r.geometry.morphAttributes.position,h=!!r.geometry&&!!r.geometry.morphAttributes.normal,d=q.get(n),p=f.state.lights;if(!0===N&&(!0===D||e!==_)){var m=e===_&&n.id===b;re.setState(n,e,m)}var g=!1;n.version===d.__version?d.needsLights&&d.lightsStateVersion!==p.state.version||d.outputEncoding!==o||r.isInstancedMesh&&!1===d.instancing?g=!0:r.isInstancedMesh||!0!==d.instancing?r.isSkinnedMesh&&!1===d.skinning?g=!0:r.isSkinnedMesh||!0!==d.skinning?d.envMap!==s||n.fog&&d.fog!==i?g=!0:void 0===d.numClippingPlanes||d.numClippingPlanes===re.numPlanes&&d.numIntersection===re.numIntersection?(d.vertexAlphas!==u||d.vertexTangents!==c||d.morphTargets!==l||d.morphNormals!==h)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,d.__version=n.version);var y=d.currentProgram;!0===g&&(y=Pe(n,t,r));var w=!1,M=!1,S=!1,E=y.getUniforms(),k=d.uniforms;if(V.useProgram(y.program)&&(w=!0,M=!0,S=!0),n.id!==b&&(b=n.id,M=!0),w||_!==e){if(E.setValue(he,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&E.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,M=!0,S=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var L=E.map.cameraPosition;void 0!==L&&L.setValue(he,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&E.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&E.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){E.setOptional(he,r,"bindMatrix"),E.setOptional(he,r,"bindMatrixInverse");var R=r.skeleton;R&&(G.floatVertexTextures?(null===R.boneTexture&&R.computeBoneTexture(),E.setValue(he,"boneTexture",R.boneTexture,$),E.setValue(he,"boneTextureSize",R.boneTextureSize)):E.setOptional(he,R,"boneMatrices"))}return(M||d.receiveShadow!==r.receiveShadow)&&(d.receiveShadow=r.receiveShadow,E.setValue(he,"receiveShadow",r.receiveShadow)),M&&(E.setValue(he,"toneMappingExposure",v.toneMappingExposure),d.needsLights&&Ne(k,S),i&&n.fog&&ee.refreshFogUniforms(k,i),ee.refreshMaterialUniforms(k,n,A,T,F),Zv.upload(he,d.uniformsList,k,$)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Zv.upload(he,d.uniformsList,k,$),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(he,"center",r.center),E.setValue(he,"modelViewMatrix",r.modelViewMatrix),E.setValue(he,"normalMatrix",r.normalMatrix),E.setValue(he,"modelMatrix",r.matrixWorld),y}function Ne(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function De(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ae.setAnimationLoop(Se),"undefined"!=typeof window&&Ae.setContext(window),this.setAnimationLoop=function(e){Me=e,me.setAnimationLoop(e),null===e?Ae.stop():Ae.start()},me.addEventListener("sessionstart",Ee),me.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,x),(f=ne.get(e,p.length)).init(),p.push(f),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(z),D=this.localClippingEnabled,N=re.init(this.clippingPlanes,D,t),(h=te.get(e,d.length)).init(),d.push(h),ke(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(k,L),!0===N&&re.beginShadows();var n=f.state.shadowsArray;ie.render(n,e,t),f.setupLights(),f.setupLightsView(t),!0===N&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(h,e);var r=h.opaque,i=h.transmissive,a=h.transparent;r.length>0&&Re(r,e,t),i.length>0&&Le(r,i,e,t),a.length>0&&Re(a,e,t),null!==x&&($.updateMultisampleRenderTarget(x),$.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(v,e,t),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),le.resetDefaultState(),b=-1,_=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,g=t,y=n,e&&void 0===q.get(e).__webglFramebuffer&&$.setupRenderTarget(e);var r=null,i=!1,a=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(a=!0);var s=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:s,w.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else w.copy(R).multiplyScalar(A).floor(),M.copy(C).multiplyScalar(A).floor(),S=P;var u=V.bindFramebuffer(36160,r);if(u&&G.drawBuffers){var c=!1;if(e)if(e.isWebGLMultipleRenderTargets){var l=e.texture;if(O.length!==l.length||36064!==O[0]){for(var h=0,f=l.length;h<f;h++)O[h]=36064+h;O.length=l.length,c=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,c=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,c=!0);c&&(G.isWebGL2?he.drawBuffers(O):j.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(V.viewport(w),V.scissor(M),V.setScissorTest(S),i){var d=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,d.__webglTexture,n)}else if(a){var p=q.get(e.texture),v=t||0;he.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,v)}},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){V.bindFramebuffer(36160,s);try{var u=e.texture,c=u.format,l=u.type;if(c!==Bl&&ce.convert(c)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=l===Fl&&(j.has("EXT_color_buffer_half_float")||G.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(l===Ol||ce.convert(l)===he.getParameter(35738)||l===Dl&&(G.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(c),ce.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==x?q.get(x).__webglFramebuffer:null;V.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=ce.convert(t.format);G.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),$.setTexture2D(t,0),he.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);$.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,c=ce.convert(r.format),l=ce.convert(r.type);if(r.isDataTexture3D)$.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(r,0),a=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var h=he.getParameter(3314),f=he.getParameter(32878),d=he.getParameter(3316),p=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,g.data)):he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,l,g),he.pixelStorei(3314,h),he.pixelStorei(32878,f),he.pixelStorei(3316,d),he.pixelStorei(3315,p),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(a),V.unbindTexture()}},this.initTexture=function(e){$.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){g=0,y=0,x=null,V.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var jm=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(Hm);jm.prototype.isWebGL1Renderer=!0;var Gm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;r(this,e),this.name="",this.color=new ed(t),this.density=n}return a(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();Gm.prototype.isFogExp2=!0;var Vm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;r(this,e),this.name="",this.color=new ed(t),this.near=n,this.far=i}return a(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();Vm.prototype.isFog=!0;var Wm=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:hl(e)})),e}return a(n,[{key:"copy",value:function(e,t){return cl(ul(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(If);Wm.prototype.isScene=!0;var qm=function(){function e(t,n){r(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=nh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=hh()}return a(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=hh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=hh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();qm.prototype.isInterleavedBuffer=!0;var $m=new Ch,Xm=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===a}return a(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)$m.x=this.getX(t),$m.y=this.getY(t),$m.z=this.getZ(t),$m.applyMatrix4(e),this.setXYZ(t,$m.x,$m.y,$m.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)$m.x=this.getX(t),$m.y=this.getY(t),$m.z=this.getZ(t),$m.applyNormalMatrix(e),this.setXYZ(t,$m.x,$m.y,$m.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)$m.x=this.getX(t),$m.y=this.getY(t),$m.z=this.getZ(t),$m.transformDirection(e),this.setXYZ(t,$m.x,$m.y,$m.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new id(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Xm.prototype.isInterleavedBufferAttribute=!0;var Ym,Zm=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="SpriteMaterial",i.color=new ed(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}($f);Zm.prototype.isSpriteMaterial=!0;var Jm=new Ch,Km=new Ch,Qm=new Ch,eg=new xh,tg=new xh,ng=new cf,rg=new Ch,ig=new Ch,ag=new Ch,og=new xh,sg=new xh,ug=new xh,cg=function(e){dl(n,e);var t=bl(n);function n(e){var i;if(r(this,n),(i=t.call(this)).type="Sprite",void 0===Ym){Ym=new md;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new qm(a,5);Ym.setIndex([0,1,2,0,2,3]),Ym.setAttribute("position",new Xm(o,3,0,!1)),Ym.setAttribute("uv",new Xm(o,2,3,!1))}return i.geometry=Ym,i.material=void 0!==e?e:new Zm,i.center=new xh(.5,.5),i}return a(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Km.setFromMatrixScale(this.matrixWorld),ng.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Qm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Km.multiplyScalar(-Qm.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;lg(rg.set(-.5,-.5,0),Qm,a,Km,n,r),lg(ig.set(.5,-.5,0),Qm,a,Km,n,r),lg(ag.set(.5,.5,0),Qm,a,Km,n,r),og.set(0,0),sg.set(1,0),ug.set(1,1);var o=e.ray.intersectTriangle(rg,ig,ag,!1,Jm);if(null!==o||(lg(ig.set(-.5,.5,0),Qm,a,Km,n,r),sg.set(0,1),null!==(o=e.ray.intersectTriangle(rg,ag,ig,!1,Jm)))){var s=e.ray.origin.distanceTo(Jm);s<e.near||s>e.far||t.push({distance:s,point:Jm.clone(),uv:Wf.getUV(Jm,rg,ig,ag,og,sg,ug,new xh),face:null,object:this})}}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(If);function lg(e,t,n,r,i,a){eg.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(tg.x=a*eg.x-i*eg.y,tg.y=i*eg.x+a*eg.y):tg.copy(eg),e.copy(t),e.x+=tg.x,e.y+=tg.y,e.applyMatrix4(ng)}cg.prototype.isSprite=!0;var hg=new Ch,fg=new Th,dg=new Th,pg=new Ch,vg=new cf,mg=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new cf,a.bindMatrixInverse=new cf,a}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Th,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){cl(ul(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;fg.fromBufferAttribute(r.attributes.skinIndex,e),dg.fromBufferAttribute(r.attributes.skinWeight,e),hg.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=dg.getComponent(i);if(0!==a){var o=fg.getComponent(i);vg.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(pg.copy(hg).applyMatrix4(vg),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Id);mg.prototype.isSkinnedMesh=!0;var gg=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="Bone",e}return n}(If);gg.prototype.isBone=!0;var yg=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:kl,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:kl,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return r(this,n),(e=t.call(this,null,c,l,h,f,d,s,u,p,v)).image={data:i,width:a,height:o},e.magFilter=f,e.minFilter=d,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sh);yg.prototype.isDataTexture=!0;var xg=new cf,bg=new cf,_g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r(this,e),this.uuid=hh(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return a(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new cf)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new cf;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:bg;xg.multiplyMatrices(o,t[i]),xg.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=mh(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new yg(t,e,e,Bl,Dl);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new gg),this.bones.push(a),this.boneInverses.push((new cf).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),wg=new cf,Mg=new cf,Sg=[],Eg=new Id,Tg=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e,i)).instanceMatrix=new id(new Float32Array(16*a),16),o.instanceColor=null,o.count=a,o.frustumCulled=!1,o}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Eg.geometry=this.geometry,Eg.material=this.material,void 0!==Eg.material)for(var i=0;i<r;i++){this.getMatrixAt(i,wg),Mg.multiplyMatrices(n,wg),Eg.matrixWorld=Mg,Eg.raycast(e,Sg);for(var a=0,o=Sg.length;a<o;a++){var s=Sg[a];s.instanceId=i,s.object=this,t.push(s)}Sg.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new id(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Id);Tg.prototype.isInstancedMesh=!0;var Ag=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="LineBasicMaterial",i.color=new ed(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}($f);Ag.prototype.isLineBasicMaterial=!0;var kg=new Ch,Lg=new Ch,Rg=new cf,Cg=new uf,Pg=new Qh,Og=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new md,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ag;return r(this,n),(e=t.call(this)).type="Line",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)kg.fromBufferAttribute(t,r-1),Lg.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=kg.distanceTo(Lg);e.setAttribute("lineDistance",new sd(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pg.copy(n.boundingSphere),Pg.applyMatrix4(r),Pg.radius+=i,!1!==e.ray.intersectsSphere(Pg)){Rg.copy(r).invert(),Cg.copy(e.ray).applyMatrix4(Rg);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Ch,c=new Ch,l=new Ch,h=new Ch,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),c.fromBufferAttribute(p,y),!(Cg.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count)-1;b<_;b+=f)if(u.fromBufferAttribute(p,b),c.fromBufferAttribute(p,b+1),!(Cg.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(If);Og.prototype.isLine=!0;var Ig=new Ch,Ng=new Ch,Dg=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="LineSegments",a}return a(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Ig.fromBufferAttribute(t,r),Ng.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Ig.distanceTo(Ng);e.setAttribute("lineDistance",new sd(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(Og);Dg.prototype.isLineSegments=!0;var Fg=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="LineLoop",a}return n}(Og);Fg.prototype.isLineLoop=!0;var zg=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="PointsMaterial",i.color=new ed(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}($f);zg.prototype.isPointsMaterial=!0;var Ug=new cf,Bg=new uf,Hg=new Qh,jg=new Ch,Gg=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new md,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zg;return r(this,n),(e=t.call(this)).type="Points",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hg.copy(n.boundingSphere),Hg.applyMatrix4(r),Hg.radius+=i,!1!==e.ray.intersectsSphere(Hg)){Ug.copy(r).invert(),Bg.copy(e.ray).applyMatrix4(Ug);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,c=n.attributes.position;if(null!==u)for(var l=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);l<h;l++){var f=u.getX(l);jg.fromBufferAttribute(c,f),Vg(jg,f,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);d<p;d++)jg.fromBufferAttribute(c,d),Vg(jg,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(If);function Vg(e,t,n,r,i,a,o){var s=Bg.distanceSqToPoint(e);if(s<n){var u=new Ch;Bg.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}Gg.prototype.isPoints=!0,function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u,c,l,h){var f;r(this,n),(f=t.call(this,e,i,a,o,s,u,c,l,h)).format=void 0!==c?c:Ul,f.minFilter=void 0!==u?u:Cl,f.magFilter=void 0!==s?s:Cl,f.generateMipmaps=!1;var d=hl(f);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){d.needsUpdate=!0,e.requestVideoFrameCallback(t)})),f}return a(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Sh).prototype.isVideoTexture=!0,function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u,c,l,h,f,d,p){var v;return r(this,n),(v=t.call(this,null,u,c,l,h,f,o,s,d,p)).image={width:i,height:a},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return n}(Sh).prototype.isCompressedTexture=!0,function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u,c,l,h){var f;return r(this,n),(f=t.call(this,e,i,a,o,s,u,c,l,h)).needsUpdate=!0,f}return n}(Sh).prototype.isCanvasTexture=!0,function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u,c,l,h,f){var d;if(r(this,n),(f=void 0!==f?f:Hl)!==Hl&&f!==jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&f===Hl&&(a=Il),void 0===a&&f===jl&&(a=zl),(d=t.call(this,null,o,s,u,c,l,f,a,h)).image={width:e,height:i},d.magFilter=void 0!==c?c:kl,d.minFilter=void 0!==l?l:kl,d.flipY=!1,d.generateMipmaps=!1,d}return n}(Sh).prototype.isDepthTexture=!0;var Wg=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;r(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:a,height:o,radialSegments:s,heightSegments:u,openEnded:c,thetaStart:l,thetaLength:h};var f=hl(e);s=Math.floor(s),u=Math.floor(u);var d=[],p=[],v=[],m=[],g=0,y=[],x=o/2,b=0;function _(){for(var e=new Ch,t=new Ch,n=0,r=(a-i)/o,c=0;c<=u;c++){for(var _=[],w=c/u,M=w*(a-i)+i,S=0;S<=s;S++){var E=S/s,T=E*h+l,A=Math.sin(T),k=Math.cos(T);t.x=M*A,t.y=-w*o+x,t.z=M*k,p.push(t.x,t.y,t.z),e.set(A,r,k).normalize(),v.push(e.x,e.y,e.z),m.push(E,1-w),_.push(g++)}y.push(_)}for(var L=0;L<s;L++)for(var R=0;R<u;R++){var C=y[R][L],P=y[R+1][L],O=y[R+1][L+1],I=y[R][L+1];d.push(C,P,I),d.push(P,O,I),n+=6}f.addGroup(b,n,0),b+=n}function w(e){for(var t=g,n=new xh,r=new Ch,o=0,u=!0===e?i:a,c=!0===e?1:-1,y=1;y<=s;y++)p.push(0,x*c,0),v.push(0,c,0),m.push(.5,.5),g++;for(var _=g,w=0;w<=s;w++){var M=w/s*h+l,S=Math.cos(M),E=Math.sin(M);r.x=u*E,r.y=x*c,r.z=u*S,p.push(r.x,r.y,r.z),v.push(0,c,0),n.x=.5*S+.5,n.y=.5*E*c+.5,m.push(n.x,n.y),g++}for(var T=0;T<s;T++){var A=t+T,k=_+T;!0===e?d.push(k,k+1,A):d.push(k+1,k,A),o+=3}f.addGroup(b,o,!0===e?1:2),b+=o}return _(),!1===c&&(i>0&&w(!0),a>0&&w(!1)),e.setIndex(d),e.setAttribute("position",new sd(p,3)),e.setAttribute("normal",new sd(v,3)),e.setAttribute("uv",new sd(m,2)),e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(md),qg=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return r(this,n),(e=t.call(this,0,i,a,o,s,u,c,l)).type="ConeGeometry",e.parameters={radius:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:l},e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Wg),$g=new Ch,Xg=new Ch,Yg=new Ch,Zg=new Wf,Jg=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;if(r(this,n),(a=t.call(this)).type="EdgesGeometry",a.parameters={thresholdAngle:i},i=void 0!==i?i:1,!0===e.isGeometry)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),pl(a);for(var o=Math.cos(ch*i),s=e.getIndex(),u=e.getAttribute("position"),c=s?s.count:u.count,l=[0,0,0],h=["a","b","c"],f=new Array(3),d={},p=[],v=0;v<c;v+=3){s?(l[0]=s.getX(v),l[1]=s.getX(v+1),l[2]=s.getX(v+2)):(l[0]=v,l[1]=v+1,l[2]=v+2);var m=Zg.a,g=Zg.b,y=Zg.c;if(m.fromBufferAttribute(u,l[0]),g.fromBufferAttribute(u,l[1]),y.fromBufferAttribute(u,l[2]),Zg.getNormal(Yg),f[0]="".concat(m.x,",").concat(m.y,",").concat(m.z),f[1]="".concat(g.x,",").concat(g.y,",").concat(g.z),f[2]="".concat(y.x,",").concat(y.y,",").concat(y.z),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var x=0;x<3;x++){var b=(x+1)%3,_=f[x],w=f[b],M=Zg[h[x]],S=Zg[h[b]],E="".concat(_,"_").concat(w),T="".concat(w,"_").concat(_);T in d&&d[T]?(Yg.dot(d[T].normal)<=o&&(p.push(M.x,M.y,M.z),p.push(S.x,S.y,S.z)),d[T]=null):E in d||(d[E]={index0:l[x],index1:l[b],normal:Yg.clone()})}}for(var A in d)if(d[A]){var k=d[A],L=k.index0,R=k.index1;$g.fromBufferAttribute(u,L),Xg.fromBufferAttribute(u,R),p.push($g.x,$g.y,$g.z),p.push(Xg.x,Xg.y,Xg.z)}return a.setAttribute("position",new sd(p,3)),a}return n}(md),Kg=function(){function e(){r(this,e),this.type="Curve",this.arcLengthDivisions=200}return a(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new xh:new Ch);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Ch,r=[],i=[],a=[],o=new Ch,s=new cf,u=0;u<=e;u++){var c=u/e;r[u]=this.getTangentAt(c,new Ch),r[u].normalize()}i[0]=new Ch,a[0]=new Ch;var l=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=l&&(l=h,n.set(1,0,0)),f<=l&&(l=f,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(fh(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(fh(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Qg=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return r(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=i,e.aY=a,e.xRadius=o,e.yRadius=s,e.aStartAngle=u,e.aEndAngle=c,e.aClockwise=l,e.aRotation=h,e}return a(n,[{key:"getPoint",value:function(e,t){for(var n=t||new xh,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*c-f*l+this.aX,u=h*l+f*c+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Kg);Qg.prototype.isEllipseCurve=!0;var ey=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o,s,u){var c;return r(this,n),(c=t.call(this,e,i,a,a,o,s,u)).type="ArcCurve",c}return n}(Qg);function ty(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,c*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}ey.prototype.isArcCurve=!0;var ny=new Ch,ry=new ty,iy=new ty,ay=new ty,oy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return r(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=i,e.closed=a,e.curveType=o,e.tension=s,e}return a(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),c=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===c&&u===o-1&&(u=o-2,c=1),this.closed||u>0?t=a[(u-1)%o]:(ny.subVectors(a[0],a[1]).add(a[0]),t=ny);var l=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(ny.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=ny),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(l),f),p=Math.pow(l.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),ry.initNonuniformCatmullRom(t.x,l.x,h.x,n.x,d,p,v),iy.initNonuniformCatmullRom(t.y,l.y,h.y,n.y,d,p,v),ay.initNonuniformCatmullRom(t.z,l.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(ry.initCatmullRom(t.x,l.x,h.x,n.x,this.tension),iy.initCatmullRom(t.y,l.y,h.y,n.y,this.tension),ay.initCatmullRom(t.z,l.z,h.z,n.z,this.tension));return i.set(ry.calc(c),iy.calc(c),ay.calc(c)),i}},{key:"copy",value:function(e){cl(ul(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){cl(ul(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Ch).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Kg);function sy(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function uy(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function cy(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}oy.prototype.isCatmullRomCurve3=!0;var ly=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xh,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xh,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new xh;return r(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=i,e.v1=a,e.v2=o,e.v3=s,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(cy(e,r.x,i.x,a.x,o.x),cy(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Kg);ly.prototype.isCubicBezierCurve=!0;var hy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ch,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ch;return r(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=i,e.v1=a,e.v2=o,e.v3=s,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(cy(e,r.x,i.x,a.x,o.x),cy(e,r.y,i.y,a.y,o.y),cy(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Kg);hy.prototype.isCubicBezierCurve3=!0;var fy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xh,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh;return r(this,n),(e=t.call(this)).type="LineCurve",e.v1=i,e.v2=a,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new xh;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kg);fy.prototype.isLineCurve=!0;var dy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;return r(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=i,e.v2=a,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kg),py=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xh,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xh;return r(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=i,e.v1=a,e.v2=o,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(uy(e,r.x,i.x,a.x),uy(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kg);py.prototype.isQuadraticBezierCurve=!0;var vy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ch;return r(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=i,e.v1=a,e.v2=o,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(uy(e,r.x,i.x,a.x),uy(e,r.y,i.y,a.y),uy(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kg);vy.prototype.isQuadraticBezierCurve3=!0;var my=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r(this,n),(e=t.call(this)).type="SplineCurve",e.points=i,e}return a(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],l=r[a>r.length-3?r.length-1:a+2];return n.set(sy(o,s.x,u.x,c.x,l.x),sy(o,s.y,u.y,c.y,l.y)),n}},{key:"copy",value:function(e){cl(ul(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){cl(ul(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new xh).fromArray(i))}return this}}]),n}(Kg);my.prototype.isSplineCurve=!0;var gy=Object.freeze({__proto__:null,ArcCurve:ey,CatmullRomCurve3:oy,CubicBezierCurve:ly,CubicBezierCurve3:hy,EllipseCurve:Qg,LineCurve:fy,LineCurve3:dy,QuadraticBezierCurve:py,QuadraticBezierCurve3:vy,SplineCurve:my});function yy(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=By(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=By(a,e[a],e[a+1],o);return o&&Iy(o,o.next)&&(Hy(o),o=o.next),o}function xy(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Iy(r,r.next)&&0!==Oy(r.prev,r,r.next))r=r.next;else{if(Hy(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function by(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Ly(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?wy(e,r,i,a):_y(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Hy(e),e=u.next,c=u.next;else if((e=u)===c){o?1===o?by(e=My(xy(e),t,n),t,n,r,i,a,2):2===o&&Sy(e,t,n,r,i,a):by(xy(e),t,n,r,i,a,1);break}}}function _y(e){var t=e.prev,n=e,r=e.next;if(Oy(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Cy(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Oy(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function wy(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Oy(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=Ly(s,u,t,n,r),f=Ly(c,l,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&Cy(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Oy(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&Cy(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Oy(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Cy(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Oy(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&Cy(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Oy(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function My(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Iy(i,a)&&Ny(i,r,r.next,a)&&zy(i,a)&&zy(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Hy(r),Hy(r.next),r=e=a),r=r.next}while(r!==e);return xy(r)}function Sy(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Py(o,s)){var u=Uy(o,s);return o=xy(o,o.next),u=xy(u,u.next),by(o,t,n,r,i,a),void by(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Ey(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=yy(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Ry(o));for(s.sort(Ty),i=0;i<s.length;i++)Ay(s[i],n),n=xy(n,n.next);return n}function Ty(e,t){return e.x-t.x}function Ay(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,c=n,l=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Cy(a<h?i:o,a,l,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),zy(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&ky(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(e,t),t){var n=Uy(t,e);xy(t,t.next),xy(n,n.next)}}function ky(e,t){return Oy(e.prev,e,t.prev)<0&&Oy(t.next,e,e.next)<0}function Ly(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ry(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Cy(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Py(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ny(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(zy(e,t)&&zy(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Oy(e.prev,e,t.prev)||Oy(e,t.prev,t))||Iy(e,t)&&Oy(e.prev,e,e.next)>0&&Oy(t.prev,t,t.next)>0)}function Oy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Iy(e,t){return e.x===t.x&&e.y===t.y}function Ny(e,t,n,r){var i=Fy(Oy(e,t,n)),a=Fy(Oy(e,t,r)),o=Fy(Oy(n,r,e)),s=Fy(Oy(n,r,t));return i!==a&&o!==s||!(0!==i||!Dy(e,n,t))||!(0!==a||!Dy(e,r,t))||!(0!==o||!Dy(n,e,r))||!(0!==s||!Dy(n,t,r))}function Dy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Fy(e){return e>0?1:e<0?-1:0}function zy(e,t){return Oy(e.prev,e,e.next)<0?Oy(e,t,e.next)>=0&&Oy(e,e.prev,t)>=0:Oy(e,t,e.prev)<0||Oy(e,e.next,t)<0}function Uy(e,t){var n=new jy(e.i,e.x,e.y),r=new jy(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function By(e,t,n,r){var i=new jy(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jy(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Gy=function(){function e(){r(this,e)}return a(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];Vy(e),Wy(n,e);var a=e.length;t.forEach(Vy);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Wy(n,t[o]);for(var s=function(e,t){var n,r,i,a,o,s,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=t&&t.length,h=l?t[0]*c:e.length,f=yy(e,0,h,c,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=Ey(e,t,f,c)),e.length>80*c){n=i=e[0],r=a=e[1];for(var p=c;p<h;p+=c)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return by(f,d,c,n,r,u),d}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function Vy(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Wy(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var qy=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;r(this,n),(a=t.call(this)).type="ExtrudeGeometry",a.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];for(var o=hl(a),s=[],u=[],c=0,l=e.length;c<l;c++)h(e[c]);function h(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,a=void 0!==i.depth?i.depth:100,c=void 0===i.bevelEnabled||i.bevelEnabled,l=void 0!==i.bevelThickness?i.bevelThickness:6,h=void 0!==i.bevelSize?i.bevelSize:l-2,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:$y;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),a=i.amount);var m,g,y,x,b,_=!1;p&&(m=p.getSpacedPoints(r),_=!0,c=!1,g=p.computeFrenetFrames(r,!1),y=new Ch,x=new Ch,b=new Ch),c||(d=0,l=0,h=0,f=0);var w=e.extractPoints(n),M=w.shape,S=w.holes;if(!Gy.isClockWise(M)){M=M.reverse();for(var E=0,T=S.length;E<T;E++){var A=S[E];Gy.isClockWise(A)&&(S[E]=A.reverse())}}for(var k=Gy.triangulateShape(M,S),L=M,R=0,C=S.length;R<C;R++){var P=S[R];M=M.concat(P)}function O(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var I=M.length,N=k.length;function D(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=o*o+s*s,h=o*c-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(l),d=Math.sqrt(u*u+c*c),p=t.x-s/f,v=t.y+o/f,m=((n.x-c/d-p)*c-(n.y+u/d-v)*u)/(o*c-s*u),g=(r=p+o*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new xh(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(l)):(r=o,i=s,a=Math.sqrt(l/2))}return new xh(r/a,i/a)}for(var F=[],z=0,U=L.length,B=U-1,H=z+1;z<U;z++,B++,H++)B===U&&(B=0),H===U&&(H=0),F[z]=D(L[z],L[B],L[H]);for(var j,G=[],V=F.concat(),W=0,q=S.length;W<q;W++){var $=S[W];j=[];for(var X=0,Y=$.length,Z=Y-1,J=X+1;X<Y;X++,Z++,J++)Z===Y&&(Z=0),J===Y&&(J=0),j[X]=D($[X],$[Z],$[J]);G.push(j),V=V.concat(j)}for(var K=0;K<d;K++){for(var Q=K/d,ee=l*Math.cos(Q*Math.PI/2),te=h*Math.sin(Q*Math.PI/2)+f,ne=0,re=L.length;ne<re;ne++){var ie=O(L[ne],F[ne],te);Ce(ie.x,ie.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];j=G[ae];for(var ue=0,ce=se.length;ue<ce;ue++){var le=O(se[ue],j[ue],te);Ce(le.x,le.y,-ee)}}}for(var he=h+f,fe=0;fe<I;fe++){var de=c?O(M[fe],V[fe],he):M[fe];_?(x.copy(g.normals[0]).multiplyScalar(de.x),y.copy(g.binormals[0]).multiplyScalar(de.y),b.copy(m[0]).add(x).add(y),Ce(b.x,b.y,b.z)):Ce(de.x,de.y,0)}for(var pe=1;pe<=r;pe++)for(var ve=0;ve<I;ve++){var me=c?O(M[ve],V[ve],he):M[ve];_?(x.copy(g.normals[pe]).multiplyScalar(me.x),y.copy(g.binormals[pe]).multiplyScalar(me.y),b.copy(m[pe]).add(x).add(y),Ce(b.x,b.y,b.z)):Ce(me.x,me.y,a/r*pe)}for(var ge=d-1;ge>=0;ge--){for(var ye=ge/d,xe=l*Math.cos(ye*Math.PI/2),be=h*Math.sin(ye*Math.PI/2)+f,_e=0,we=L.length;_e<we;_e++){var Me=O(L[_e],F[_e],be);Ce(Me.x,Me.y,a+xe)}for(var Se=0,Ee=S.length;Se<Ee;Se++){var Te=S[Se];j=G[Se];for(var Ae=0,ke=Te.length;Ae<ke;Ae++){var Le=O(Te[Ae],j[Ae],be);_?Ce(Le.x,Le.y+m[r-1].y,m[r-1].x+xe):Ce(Le.x,Le.y,a+xe)}}}function Re(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var o=0,s=r+2*d;o<s;o++){var u=I*o,c=I*(o+1);Oe(t+i+u,t+a+u,t+a+c,t+i+c)}}}function Ce(e,n,r){t.push(e),t.push(n),t.push(r)}function Pe(e,t,n){Ie(e),Ie(t),Ie(n);var r=s.length/3,i=v.generateTopUV(o,s,r-3,r-2,r-1);Ne(i[0]),Ne(i[1]),Ne(i[2])}function Oe(e,t,n,r){Ie(e),Ie(t),Ie(r),Ie(t),Ie(n),Ie(r);var i=s.length/3,a=v.generateSideWallUV(o,s,i-6,i-3,i-2,i-1);Ne(a[0]),Ne(a[1]),Ne(a[3]),Ne(a[1]),Ne(a[2]),Ne(a[3])}function Ie(e){s.push(t[3*e+0]),s.push(t[3*e+1]),s.push(t[3*e+2])}function Ne(e){u.push(e.x),u.push(e.y)}!function(){var e=s.length/3;if(c){for(var t=0,n=I*t,i=0;i<N;i++){var a=k[i];Pe(a[2]+n,a[1]+n,a[0]+n)}n=I*(t=r+2*d);for(var u=0;u<N;u++){var l=k[u];Pe(l[0]+n,l[1]+n,l[2]+n)}}else{for(var h=0;h<N;h++){var f=k[h];Pe(f[2],f[1],f[0])}for(var p=0;p<N;p++){var v=k[p];Pe(v[0]+I*r,v[1]+I*r,v[2]+I*r)}}o.addGroup(e,s.length/3-e,0)}(),function(){var e=s.length/3,t=0;Re(L,t),t+=L.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Re(i,t),t+=i.length}o.addGroup(e,s.length/3-e,1)}()}return a.setAttribute("position",new sd(s,3)),a.setAttribute("uv",new sd(u,2)),a.computeVertexNormals(),a}return a(n,[{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new gy[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(md),$y={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new xh(a,o),new xh(s,u),new xh(c,l)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-l)<Math.abs(o-c)?[new xh(o,1-u),new xh(c,1-h),new xh(f,1-p),new xh(v,1-g)]:[new xh(s,1-u),new xh(l,1-h),new xh(d,1-p),new xh(m,1-g)]}},Xy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;r(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:i,outerRadius:a,thetaSegments:o,phiSegments:s,thetaStart:u,thetaLength:c},o=Math.max(3,o);for(var l=[],h=[],f=[],d=[],p=i,v=(a-i)/(s=Math.max(1,s)),m=new Ch,g=new xh,y=0;y<=s;y++){for(var x=0;x<=o;x++){var b=u+x/o*c;m.x=p*Math.cos(b),m.y=p*Math.sin(b),h.push(m.x,m.y,m.z),f.push(0,0,1),g.x=(m.x/a+1)/2,g.y=(m.y/a+1)/2,d.push(g.x,g.y)}p+=v}for(var _=0;_<s;_++)for(var w=_*(o+1),M=0;M<o;M++){var S=M+w,E=S,T=S+o+1,A=S+o+2,k=S+1;l.push(E,T,k),l.push(T,A,k)}return e.setIndex(l),e.setAttribute("position",new sd(h,3)),e.setAttribute("normal",new sd(f,3)),e.setAttribute("uv",new sd(d,2)),e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(md),Yy=function(e){dl(n,e);var t=bl(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;r(this,n),(i=t.call(this)).type="ShapeGeometry",i.parameters={shapes:e,curveSegments:a};var o=[],s=[],u=[],c=[],l=0,h=0;if(!1===Array.isArray(e))d(e);else for(var f=0;f<e.length;f++)d(e[f]),i.addGroup(l,h,f),l+=h,h=0;function d(e){var t=s.length/3,n=e.extractPoints(a),r=n.shape,i=n.holes;!1===Gy.isClockWise(r)&&(r=r.reverse());for(var l=0,f=i.length;l<f;l++){var d=i[l];!0===Gy.isClockWise(d)&&(i[l]=d.reverse())}for(var p=Gy.triangulateShape(r,i),v=0,m=i.length;v<m;v++){var g=i[v];r=r.concat(g)}for(var y=0,x=r.length;y<x;y++){var b=r[y];s.push(b.x,b.y,0),u.push(0,0,1),c.push(b.x,b.y)}for(var _=0,w=p.length;_<w;_++){var M=p[_],S=M[0]+t,E=M[1]+t,T=M[2]+t;o.push(S,E,T),h+=3}}return i.setIndex(o),i.setAttribute("position",new sd(s,3)),i.setAttribute("normal",new sd(u,3)),i.setAttribute("uv",new sd(c,2)),i}return a(n,[{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(md),Zy=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;r(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:a,heightSegments:o,phiStart:s,phiLength:u,thetaStart:c,thetaLength:l},a=Math.max(3,Math.floor(a)),o=Math.max(2,Math.floor(o));for(var h=Math.min(c+l,Math.PI),f=0,d=[],p=new Ch,v=new Ch,m=[],g=[],y=[],x=[],b=0;b<=o;b++){var _=[],w=b/o,M=0;0==b&&0==c?M=.5/a:b==o&&h==Math.PI&&(M=-.5/a);for(var S=0;S<=a;S++){var E=S/a;p.x=-i*Math.cos(s+E*u)*Math.sin(c+w*l),p.y=i*Math.cos(c+w*l),p.z=i*Math.sin(s+E*u)*Math.sin(c+w*l),g.push(p.x,p.y,p.z),v.copy(p).normalize(),y.push(v.x,v.y,v.z),x.push(E+M,1-w),_.push(f++)}d.push(_)}for(var T=0;T<o;T++)for(var A=0;A<a;A++){var k=d[T][A+1],L=d[T][A],R=d[T+1][A],C=d[T+1][A+1];(0!==T||c>0)&&m.push(k,L,C),(T!==o-1||h<Math.PI)&&m.push(L,R,C)}return e.setIndex(m),e.setAttribute("position",new sd(g,3)),e.setAttribute("normal",new sd(y,3)),e.setAttribute("uv",new sd(x,2)),e}return a(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(md),Jy=function(e){dl(n,e);var t=bl(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,n);var o=a.font;if(!o||!o.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),pl(i,new md);var s=o.generateShapes(e,a.size);return a.depth=void 0!==a.height?a.height:50,void 0===a.bevelThickness&&(a.bevelThickness=10),void 0===a.bevelSize&&(a.bevelSize=8),void 0===a.bevelEnabled&&(a.bevelEnabled=!1),(i=t.call(this,s,a)).type="TextGeometry",i}return n}(qy);(function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="ShadowMaterial",i.color=new ed(0),i.transparent=!0,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n})($f).prototype.isShadowMaterial=!0;var Ky=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new ed(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ed(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new xh(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}($f);Ky.prototype.isMeshStandardMaterial=!0;var Qy=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoat=0,i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new xh(1,1),i.clearcoatNormalMap=null,i.reflectivity=.5,Object.defineProperty(hl(i),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=fh(2.5*(e-1)/(e+1),0,1)}}),i.sheen=null,i.transmission=0,i.transmissionMap=null,i.thickness=.01,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationTint=new ed(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularTint=new ed(1,1,1),i.specularTintMap=null,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ed).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}]),n}(Ky);Qy.prototype.isMeshPhysicalMaterial=!0,function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshPhongMaterial",i.color=new ed(16777215),i.specular=new ed(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ed(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new xh(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}($f).prototype.isMeshPhongMaterial=!0;var ex=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).defines={TOON:""},i.type="MeshToonMaterial",i.color=new ed(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ed(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new xh(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}($f);ex.prototype.isMeshToonMaterial=!0,function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new xh(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.flatShading=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}($f).prototype.isMeshNormalMaterial=!0;var tx=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="MeshLambertMaterial",i.color=new ed(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ed(0),i.emissiveIntensity=1,i.emissiveMap=null,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}($f);tx.prototype.isMeshLambertMaterial=!0,function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new ed(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new xh(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}($f).prototype.isMeshMatcapMaterial=!0,function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Ag).prototype.isLineDashedMaterial=!0;var nx={arraySlice:function(e,t,n){return nx.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){l.push(u.times[f]);for(var p=0;p<c;++p)h.push(u.values[f*c+p])}}0!==l.length&&(u.times=nx.convertArray(l,u.times.constructor),u.values=nx.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=0,l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var h=r.times.length-1,f=void 0;if(a<=r.times[0]){var d=s,p=u-s;f=nx.arraySlice(r.values,d,p)}else if(a>=r.times[h]){var v=h*u+s,m=v+u-s;f=nx.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,x=u-s;g.evaluate(a),f=nx.arraySlice(g.resultBuffer,y,x)}"quaternion"===i&&(new Rh).fromArray(f).normalize().conjugate().toArray(f);for(var b=o.times.length,_=0;_<b;++_){var w=_*l+c;if("quaternion"===i)Rh.multiplyQuaternionsFlat(o.values,w,f,0,o.values,w);else for(var M=l-2*c,S=0;S<M;++S)o.values[w+S]-=f[S]}},s=0;s<i;++s)o(s);return e.blendMode=Zl,e}},rx=function(){function e(t,n,i,a){r(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return a(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();rx.prototype.beforeStart_=rx.prototype.copySampleValue_,rx.prototype.afterEnd_=rx.prototype.copySampleValue_;var ix=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e,i,a,o))._weightPrev=-0,s._offsetPrev=-0,s._weightNext=-0,s._offsetNext=-0,s.DefaultSettings_={endingStart:ql,endingEnd:ql},s}return a(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case $l:i=e,o=2*t-n;break;case Xl:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case $l:a=e,s=2*n-t;break;case Xl:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,x=f*v-f*p,b=0;b!==o;++b)i[b]=m*a[c+b]+g*a[u+b]+y*a[s+b]+x*a[l+b];return i}}]),n}(rx),ax=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o){return r(this,n),t.call(this,e,i,a,o)}return a(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(r-t),l=1-c,h=0;h!==o;++h)i[h]=a[u+h]*l+a[s+h]*c;return i}}]),n}(rx),ox=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o){return r(this,n),t.call(this,e,i,a,o)}return a(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(rx),sx=function(){function e(t,n,i,a){if(r(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=nx.convertArray(n,this.TimeBufferType),this.values=nx.convertArray(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return a(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new ox(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new ax(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new ix(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Gl:t=this.InterpolantFactoryMethodDiscrete;break;case Vl:t=this.InterpolantFactoryMethodLinear;break;case Wl:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gl;case this.InterpolantFactoryMethodLinear:return Vl;case this.InterpolantFactoryMethodSmooth:return Wl}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=nx.arraySlice(n,i,a),this.values=nx.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&nx.isTypedArray(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=nx.arraySlice(this.times),t=nx.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Wl,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var c=o*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=t[c+f];if(d!==t[l+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,x=0;x!==n;++x)t[y+x]=t[g+x];++a}return a!==e.length?(this.times=nx.arraySlice(e,0,a),this.values=nx.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=nx.arraySlice(this.times,0),t=nx.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:nx.convertArray(e.times,Array),values:nx.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();sx.prototype.TimeBufferType=Float32Array,sx.prototype.ValueBufferType=Float32Array,sx.prototype.DefaultInterpolation=Vl;var ux=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(sx);ux.prototype.ValueTypeName="bool",ux.prototype.ValueBufferType=Array,ux.prototype.DefaultInterpolation=Gl,ux.prototype.InterpolantFactoryMethodLinear=void 0,ux.prototype.InterpolantFactoryMethodSmooth=void 0;var cx=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(sx);cx.prototype.ValueTypeName="color";var lx=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(sx);lx.prototype.ValueTypeName="number";var hx=function(e){dl(n,e);var t=bl(n);function n(e,i,a,o){return r(this,n),t.call(this,e,i,a,o)}return a(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,c=u+o;u!==c;u+=4)Rh.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(rx),fx=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new hx(this.times,this.values,this.getValueSize(),e)}}]),n}(sx);fx.prototype.ValueTypeName="quaternion",fx.prototype.DefaultInterpolation=Vl,fx.prototype.InterpolantFactoryMethodSmooth=void 0;var dx=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(sx);dx.prototype.ValueTypeName="string",dx.prototype.ValueBufferType=Array,dx.prototype.DefaultInterpolation=Gl,dx.prototype.InterpolantFactoryMethodLinear=void 0,dx.prototype.InterpolantFactoryMethodSmooth=void 0;var px=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(sx);px.prototype.ValueTypeName="vector";var vx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yl;r(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=a,this.uuid=hh(),this.duration<0&&this.resetDuration()}return a(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(mx(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(sx.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var c=nx.getKeyframeOrder(s);s=nx.sortedArray(s,1,c),u=nx.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new lx(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];nx.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var h={},f=void 0;for(f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)h[l[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==l[f].morphTargets.length;++g){var y=l[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new lx(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(a||1)}else{var x=".bones["+t[c].name+"]";n(px,x+".position",l,"pos",r),n(fx,x+".quaternion",l,"rot",r),n(px,x+".scale",l,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function mx(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lx;case"vector":case"vector2":case"vector3":case"vector4":return px;case"color":return cx;case"quaternion":return fx;case"bool":case"boolean":return ux;case"string":return dx}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];nx.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var gx={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},yx=new function e(t,n,i){r(this,e);var a=this,o=!1,s=0,u=0,c=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){u++,!1===o&&void 0!==a.onStart&&a.onStart(e,s,u),o=!0},this.itemEnd=function(e){s++,void 0!==a.onProgress&&a.onProgress(e,s,u),s===u&&(o=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return c?c(e):e},this.setURLModifier=function(e){return c=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}},xx=function(){function e(t){r(this,e),this.manager=void 0!==t?t:yx,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return a(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),bx={},_x=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=gx.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===bx[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],c=!!s[2],l=s[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout((function(){t&&t(h),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{for(var m in bx[e]=[],bx[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=bx[e];if(delete bx[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),gx.add(e,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,c=r.length;u<c;u++){var l=r[u];l.onError&&l.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=bx[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=bx[e];delete bx[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=bx[e];delete bx[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(m,this.requestHeader[m]);o.send(null)}return i.manager.itemStart(e),o}bx[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(xx),wx=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=gx.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),gx.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(xx),Mx=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){var i=new Wd,a=new wx(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(xx),Sx=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){var i=new Sh,a=new wx(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ul:Bl,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(xx),Ex=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return a(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new fy(t,e))}},{key:"getPoint",value:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){cl(ul(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){cl(ul(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new gy[i.type]).fromJSON(i))}return this}}]),n}(Kg),Tx=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="Path",i.currentPoint=new xh,e&&i.setFromPoints(e),i}return a(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new fy(this.currentPoint.clone(),new xh(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new py(this.currentPoint.clone(),new xh(e,t),new xh(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new ly(this.currentPoint.clone(),new xh(e,t),new xh(n,r),new xh(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new my(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new Qg(e,t,n,r,i,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return cl(ul(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Ex),Ax=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).uuid=hh(),i.type="Shape",i.holes=[],i}return a(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){cl(ul(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){cl(ul(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Tx).fromJSON(i))}return this}}]),n}(Tx),kx=function(e){dl(n,e);var t=bl(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r(this,n),(i=t.call(this)).type="Light",i.color=new ed(e),i.intensity=a,i}return a(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(If);kx.prototype.isLight=!0,function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e,a)).type="HemisphereLight",o.position.copy(If.DefaultUp),o.updateMatrix(),o.groundColor=new ed(i),o}return a(n,[{key:"copy",value:function(e){return kx.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(kx).prototype.isHemisphereLight=!0;var Lx=new cf,Rx=new Ch,Cx=new Ch,Px=function(){function e(t){r(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new xh(512,512),this.map=null,this.mapPass=null,this.matrix=new cf,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Qd,this._frameExtents=new xh(1,1),this._viewportCount=1,this._viewports=[new Th(0,0,1,1)]}return a(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Rx.setFromMatrixPosition(e.matrixWorld),t.position.copy(Rx),Cx.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Cx),t.updateMatrixWorld(),Lx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Ox=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this,new jd(50,1,.5,500))).focus=1,e}return a(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*lh*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),cl(ul(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Px);Ox.prototype.isSpotLightShadow=!0;var Ix=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return r(this,n),(a=t.call(this,e,i)).type="SpotLight",a.position.copy(If.DefaultUp),a.updateMatrix(),a.target=new If,a.distance=o,a.angle=s,a.penumbra=u,a.decay=c,a.shadow=new Ox,a}return a(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(kx);Ix.prototype.isSpotLight=!0;var Nx=new cf,Dx=new Ch,Fx=new Ch,zx=function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this,new jd(90,1,.5,500)))._frameExtents=new xh(4,2),e._viewportCount=6,e._viewports=[new Th(2,1,1,1),new Th(0,1,1,1),new Th(3,1,1,1),new Th(1,1,1,1),new Th(3,0,1,1),new Th(1,0,1,1)],e._cubeDirections=[new Ch(1,0,0),new Ch(-1,0,0),new Ch(0,0,1),new Ch(0,0,-1),new Ch(0,1,0),new Ch(0,-1,0)],e._cubeUps=[new Ch(0,1,0),new Ch(0,1,0),new Ch(0,1,0),new Ch(0,1,0),new Ch(0,0,1),new Ch(0,0,-1)],e}return a(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Dx.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dx),Fx.copy(n.position),Fx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Fx),n.updateMatrixWorld(),r.makeTranslation(-Dx.x,-Dx.y,-Dx.z),Nx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nx)}}]),n}(Px);zx.prototype.isPointLightShadow=!0;var Ux=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return r(this,n),(a=t.call(this,e,i)).type="PointLight",a.distance=o,a.decay=s,a.shadow=new zx,a}return a(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(kx);Ux.prototype.isPointLight=!0;var Bx=function(e){dl(n,e);var t=bl(n);function n(){return r(this,n),t.call(this,new fp(-5,5,5,-5,.5,500))}return n}(Px);Bx.prototype.isDirectionalLightShadow=!0;var Hx=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="DirectionalLight",a.position.copy(If.DefaultUp),a.updateMatrix(),a.target=new If,a.shadow=new Bx,a}return a(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(kx);Hx.prototype.isDirectionalLight=!0;var jx=function(e){dl(n,e);var t=bl(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="AmbientLight",a}return n}(kx);jx.prototype.isAmbientLight=!0;var Gx=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return r(this,n),(a=t.call(this,e,i)).type="RectAreaLight",a.width=o,a.height=s,a}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(kx);Gx.prototype.isRectAreaLight=!0;var Vx=function(){function e(){r(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Ch)}return a(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();Vx.prototype.isSphericalHarmonics3=!0;var Wx=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vx,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r(this,n),(e=t.call(this,void 0,a)).sh=i,e}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(kx);Wx.prototype.isLightProbe=!0;var qx=function(){function e(){r(this,e)}return a(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}();(function(e){dl(n,e);var t=bl(n);function n(){var e;return r(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n})(md).prototype.isInstancedBufferGeometry=!0;var $x=function(e){dl(n,e);var t=bl(n);function n(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return r(this,n),"number"==typeof a&&(s=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=t.call(this,e,i,a)).meshPerAttribute=s,o}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=cl(ul(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(id);$x.prototype.isInstancedBufferAttribute=!0;var Xx=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),i=t.call(this,e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return a(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=gx.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){gx.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(xx);Xx.prototype.isImageBitmapLoader=!0;var Yx=function(){function e(){r(this,e),this.type="ShapePath",this.color=new ed,this.subPaths=[],this.currentPath=null}return a(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Tx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Ax;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],u=-u,s=t[i],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=c*(e.x-o.x)-u*(e.y-o.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i,a,o,s=Gy.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var c=[];if(1===u.length)return a=u[0],(o=new Ax).curves=a.curves,c.push(o),c;var l=!s(u[0].getPoints());l=e?!l:l;var h,f,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(a=u[g]).getPoints()),(i=e?!i:i)?(!l&&p[m]&&m++,p[m]={s:new Ax,p:h},p[m].s.curves=a.curves,l&&m++,v[m]=[]):v[m].push({h:a,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var x=!1,b=[],_=0,w=p.length;_<w;_++)d[_]=[];for(var M=0,S=p.length;M<S;M++)for(var E=v[M],T=0;T<E.length;T++){for(var A=E[T],k=!0,L=0;L<p.length;L++)r(A.p,p[L].p)&&(M!==L&&b.push({froms:M,tos:L,hole:T}),k?(k=!1,d[L].push(A)):x=!0);k&&d[M].push(A)}b.length>0&&(x||(v=d))}for(var R=0,C=p.length;R<C;R++){o=p[R].s,c.push(o);for(var P=0,O=(f=v[R]).length;P<O;P++)o.holes.push(f[P].h)}return c}}]),e}(),Zx=function(){function e(t){r(this,e),this.type="Font",this.data=t}return a(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Jx(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),e}();function Jx(e,t,n){for(var r=Array.from(e),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=a;else{var h=Kx(l,i,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}function Kx(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,u,c,l,h,f,d,p=new Yx;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;)switch(v[m++]){case"m":o=v[m++]*t+n,s=v[m++]*t+r,p.moveTo(o,s);break;case"l":o=v[m++]*t+n,s=v[m++]*t+r,p.lineTo(o,s);break;case"q":u=v[m++]*t+n,c=v[m++]*t+r,l=v[m++]*t+n,h=v[m++]*t+r,p.quadraticCurveTo(l,h,u,c);break;case"b":u=v[m++]*t+n,c=v[m++]*t+r,l=v[m++]*t+n,h=v[m++]*t+r,f=v[m++]*t+n,d=v[m++]*t+r,p.bezierCurveTo(l,h,f,d,u,c)}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}Zx.prototype.isFont=!0;var Qx,eb=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new _x(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)}},{key:"parse",value:function(e){return new Zx(e)}}]),n}(xx),tb=function(e){dl(n,e);var t=bl(n);function n(e){return r(this,n),t.call(this,e)}return a(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new _x(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);(void 0===Qx&&(Qx=new(window.AudioContext||window.webkitAudioContext)),Qx).decodeAudioData(a,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}]),n}(xx),nb=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r(this,n),a=t.call(this,void 0,o);var s=(new ed).set(e),u=(new ed).set(i),c=new Ch(s.r,s.g,s.b),l=new Ch(u.r,u.g,u.b),h=Math.sqrt(Math.PI),f=h*Math.sqrt(.75);return a.sh.coefficients[0].copy(c).add(l).multiplyScalar(h),a.sh.coefficients[1].copy(c).sub(l).multiplyScalar(f),a}return n}(Wx);nb.prototype.isHemisphereLightProbe=!0;var rb=function(e){dl(n,e);var t=bl(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r(this,n),i=t.call(this,void 0,a);var o=(new ed).set(e);return i.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return n}(Wx);rb.prototype.isAmbientLightProbe=!0;var ib=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return a(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(If),ab=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;r(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return a(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),ob=function(){function e(t,n,i){var a,o,s;switch(r(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":a=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:a=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return a(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,c=t+t;u!==c;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Rh.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Rh.multiplyQuaternionsFlat(e,a,e,t,e,n),Rh.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),sb=new RegExp("[\\[\\]\\.:\\/]","g"),ub="[^\\[\\]\\.:\\/]",cb="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",lb=/((?:WC+[\/:])*)/.source.replace("WC",ub),hb=/(WCOD+)?/.source.replace("WCOD",cb),fb=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ub),db=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ub),pb=new RegExp("^"+lb+hb+fb+db+"$"),vb=["material","materials","bones"],mb=function(){function e(t,n,i){r(this,e);var a=i||gb.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return a(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),gb=function(){function e(t,n,i){r(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return a(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(sb,"")}},{key:"parseTrackName",value:function(e){var t=pb.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==vb.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();gb.Composite=mb,gb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gb.prototype.GetterByBindingType=[gb.prototype._getValue_direct,gb.prototype._getValue_array,gb.prototype._getValue_arrayElement,gb.prototype._getValue_toArray],gb.prototype.SetterByBindingTypeAndVersioning=[[gb.prototype._setValue_direct,gb.prototype._setValue_direct_setNeedsUpdate,gb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gb.prototype._setValue_array,gb.prototype._setValue_array_setNeedsUpdate,gb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gb.prototype._setValue_arrayElement,gb.prototype._setValue_arrayElement_setNeedsUpdate,gb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gb.prototype._setValue_fromArray,gb.prototype._setValue_fromArray_setNeedsUpdate,gb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var yb=function(){function e(){r(this,e),this.uuid=hh(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return a(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new gb(h,n[p],r[p]))}else if(d<u){o=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[f]=m,e[m]=h;for(var y=0,x=a;y!==x;++y){var b=i[y],_=b[m],w=b[d];b[d]=_,void 0===w&&(w=new gb(h,n[y],r[y])),b[m]=w}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=t[u];if(void 0!==c&&c>=i){var l=i++,h=e[l];t[h.uuid]=c,e[c]=h,t[u]=l,e[l]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[l],m=p[c];p[c]=v,p[l]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=t[c];if(void 0!==l)if(delete t[c],l<i){var h=--i,f=e[h],d=--a,p=e[d];t[f.uuid]=l,e[l]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],x=g[d];g[l]=y,g[h]=x,g.pop()}}else{var b=--a,_=e[b];b>0&&(t[_.uuid]=l),e[l]=_,e.pop();for(var w=0,M=r;w!==M;++w){var S=n[w];S[l]=S[b],S.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(l);for(var h=c,f=s.length;h!==f;++h){var d=s[h];l[h]=new gb(d,e,t)}return l}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}();yb.prototype.isAnimationObjectGroup=!0;var xb=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;r(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=a;for(var o=n.tracks,s=o.length,u=new Array(s),c={endingStart:ql,endingEnd:ql},l=0;l!==s;++l){var h=o[l].createInterpolant(null);u[l]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=u,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return a(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,c=this._propertyBindings;if(this.blendMode===Zl)for(var l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);else for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),c[f].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=$l,r.endingEnd=$l):(r.endingStart=e?this.zeroSlopeAtStart?$l:ql:Xl,r.endingEnd=t?this.zeroSlopeAtEnd?$l:ql:Xl)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),bb=function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return a(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)a[l]=d;else{if(void 0!==(d=a[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;++(d=new ob(gb.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[l]=d}o[l].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ax(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"==typeof e?vx.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Yl),void 0!==s){var c=s.actionByRoot[i];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var l=new xb(this,a,t,n);return this._bindAction(l,u),this._addInactiveAction(l,o,i),l}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?vx.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);for(var s=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)s[c].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(ah);bb.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var _b=function(){function e(t){r(this,e),"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return a(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),wb=function(e){dl(n,e);var t=bl(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r(this,n),(a=t.call(this,e,i)).meshPerAttribute=o,a}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=cl(ul(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=cl(ul(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(qm);wb.prototype.isInstancedInterleavedBuffer=!0,function(){function e(t,n,i,a,o){r(this,e),this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=a,this.count=o,this.version=0}return a(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}().prototype.isGLBufferAttribute=!0;var Mb=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;r(this,e),this.ray=new uf(t,n),this.near=i,this.far=a,this.camera=null,this.layers=new bf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return a(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Eb(e,this,n,t),n.sort(Sb),n}},{key:"intersectObjects",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)Eb(e[r],this,n,t);return n.sort(Sb),n}}]),e}();function Sb(e,t){return e.distance-t.distance}function Eb(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)Eb(i[a],t,n,!0)}var Tb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(this,e),this.radius=t,this.phi=n,this.theta=i,this}return a(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(fh(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ab=new xh,kb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xh(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xh(-1/0,-1/0);r(this,e),this.min=t,this.max=n}return a(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ab.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Ab.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();kb.prototype.isBox2=!0;var Lb=new Ch,Rb=new Ch,Cb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;r(this,e),this.start=t,this.end=n}return a(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Lb.subVectors(e,this.start),Rb.subVectors(this.end,this.start);var n=Rb.dot(Rb),r=Rb.dot(Lb)/n;return t&&(r=fh(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();(function(e){dl(n,e);var t=bl(n);function n(e){var i;return r(this,n),(i=t.call(this)).material=e,i.render=function(){},i.hasPositions=!1,i.hasNormals=!1,i.hasColors=!1,i.hasUvs=!1,i.positionArray=null,i.normalArray=null,i.colorArray=null,i.uvArray=null,i.count=0,i}return n})(If).prototype.isImmediateRenderObject=!0;var Pb=new Ch,Ob=new cf,Ib=new cf,Nb=function(e){dl(n,e);var t=bl(n);function n(e){var i;r(this,n);for(var a=Db(e),o=new md,s=[],u=[],c=new ed(0,0,1),l=new ed(0,1,0),h=0;h<a.length;h++){var f=a[h];f.parent&&f.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),u.push(c.r,c.g,c.b),u.push(l.r,l.g,l.b))}o.setAttribute("position",new sd(s,3)),o.setAttribute("color",new sd(u,3));var d=new Ag({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=t.call(this,o,d)).type="SkeletonHelper",i.isSkeletonHelper=!0,i.root=e,i.bones=a,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return a(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Ib.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(Ob.multiplyMatrices(Ib,s.matrixWorld),Pb.setFromMatrixPosition(Ob),i.setXYZ(o,Pb.x,Pb.y,Pb.z),Ob.multiplyMatrices(Ib,s.parent.matrixWorld),Pb.setFromMatrixPosition(Ob),i.setXYZ(o+1,Pb.x,Pb.y,Pb.z),o+=2)}r.getAttribute("position").needsUpdate=!0,cl(ul(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Dg);function Db(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Db(e.children[n]));return t}var Fb=function(e){dl(n,e);var t=bl(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;r(this,n),o=new ed(o),s=new ed(s);for(var u=a/2,c=i/a,l=i/2,h=[],f=[],d=0,p=0,v=-l;d<=a;d++,v+=c){h.push(-l,0,v,l,0,v),h.push(v,0,-l,v,0,l);var m=d===u?o:s;m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3}var g=new md;g.setAttribute("position",new sd(h,3)),g.setAttribute("color",new sd(f,3));var y=new Ag({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return n}(Dg),zb=new Float32Array(1);function Ub(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ul(e);if(t){var i=ul(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pl(this,n)}}new Int32Array(zb.buffer),Kg.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Kg.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Tx.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Fb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Nb.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},xx.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),qx.extractUrlBase(e)},xx.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},kb.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},kb.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},kb.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},kb.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Ih.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ih.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ih.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Ih.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ih.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Qh.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Qd.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Cb.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},_h.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},_h.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},_h.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},_h.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},_h.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},_h.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},cf.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},cf.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},cf.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ch).setFromMatrixColumn(this,3)},cf.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},cf.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},cf.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},cf.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},cf.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},cf.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},cf.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},cf.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},cf.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},cf.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},cf.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},cf.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},cf.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},cf.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},cf.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},cf.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Zd.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Rh.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Rh.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},uf.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},uf.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},uf.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Wf.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Wf.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Wf.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Wf.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Wf.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Wf.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Wf.getBarycoord(e,t,n,r,i)},Wf.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Wf.getNormal(e,t,n,r)},Ax.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Ax.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qy(this,e)},Ax.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yy(this,e)},xh.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},xh.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},xh.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ch.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ch.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ch.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Ch.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Ch.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Ch.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Ch.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Ch.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Ch.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Th.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Th.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},If.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},If.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},If.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},If.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},If.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(If.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Id.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Id.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),mg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},jd.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(kx.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(id.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===rh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(rh)}}}),id.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?rh:nh),this},id.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},id.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},md.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},md.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new id(arguments[1],arguments[2])))},md.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},md.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},md.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},md.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},md.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(md.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),qm.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?rh:nh),this},qm.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},qy.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},qy.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},qy.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Wm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},_b.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties($f.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ed}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Bd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Hm.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Hm.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Hm.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Hm.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Hm.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Hm.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Hm.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Hm.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Hm.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Hm.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Hm.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Hm.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Hm.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Hm.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Hm.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Hm.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Hm.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Hm.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Hm.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Hm.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Hm.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Hm.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Hm.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Hm.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Hm.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Hm.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Kl:Jl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Rm.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ah.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),ib.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new tb).load(e,(function(e){t.setBuffer(e)})),this},ab.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Vd.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Vd.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},wh.crossOrigin=void 0,wh.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Sx;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},wh.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Mx;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},wh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},wh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"131"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="131");var Bb=function(e){dl(n,e);var t=Ub(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).dracoLoader=null,i.ktx2Loader=null,i.meshoptDecoder=null,i.pluginCallbacks=[],i.register((function(e){return new Wb(e)})),i.register((function(e){return new Zb(e)})),i.register((function(e){return new Jb(e)})),i.register((function(e){return new qb(e)})),i.register((function(e){return new $b(e)})),i.register((function(e){return new Xb(e)})),i.register((function(e){return new Yb(e)})),i.register((function(e){return new Gb(e)})),i.register((function(e){return new Kb(e)})),i}return a(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:qx.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new _x(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"==typeof e)i=e;else if(qx.decodeText(new Uint8Array(e,0,4))===Qb){try{a[jb.KHR_BINARY_GLTF]=new e_(e)}catch(e){return void(r&&r(e))}i=a[jb.KHR_BINARY_GLTF].content}else i=qx.decodeText(new Uint8Array(e));var s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new b_(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var c=0;c<this.pluginCallbacks.length;c++){var l=this.pluginCallbacks[c](u);o[l.name]=l,a[l.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case jb.KHR_MATERIALS_UNLIT:a[f]=new Vb;break;case jb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[f]=new i_;break;case jb.KHR_DRACO_MESH_COMPRESSION:a[f]=new t_(s,this.dracoLoader);break;case jb.KHR_TEXTURE_TRANSFORM:a[f]=new n_;break;case jb.KHR_MESH_QUANTIZATION:a[f]=new a_;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(n,r)}}}]),n}(xx);function Hb(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var jb={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},Gb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return a(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new ed(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Hx(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Ux(s)).distance=u;break;case"spot":(i=new Ix(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),Vb=function(){function e(){r(this,e),this.name=jb.KHR_MATERIALS_UNLIT}return a(e,[{key:"getMaterialType",value:function(){return td}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new ed(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}]),e}(),Wb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_MATERIALS_CLEARCOAT}return a(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Qy:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new xh(o,-o)}return Promise.all(i)}}]),e}(),qb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_MATERIALS_TRANSMISSION}return a(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Qy:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),$b=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_MATERIALS_VOLUME}return a(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Qy:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;var o=a.attenuationColor||[1,1,1];return t.attenuationTint=new ed(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),Xb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_MATERIALS_IOR}return a(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Qy:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),Yb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_MATERIALS_SPECULAR}return a(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Qy:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularTint=new ed(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularTintMap",a.specularColorTexture).then((function(e){e.encoding=Kl}))),Promise.all(i)}}]),e}(),Zb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.KHR_TEXTURE_BASISU}return a(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=n.images[i.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,o)}}]),e}(),Jb=function(){function e(t){r(this,e),this.parser=t,this.name=jb.EXT_TEXTURE_WEBP,this.isSupported=null}return a(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Kb=function(){function e(t){r(this,e),this.name=jb.EXT_MESHOPT_COMPRESSION,this.parser=t}return a(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new ArrayBuffer(i*o),u=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(s),i,o,u,r.mode,r.filter),s}))}return null}}]),e}(),Qb="glTF",e_=function e(t){r(this,e),this.name=jb.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:qx.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Qb)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,a=new DataView(t,12),o=0;o<i;){var s=a.getUint32(o,!0);o+=4;var u=a.getUint32(o,!0);if(o+=4,1313821514===u){var c=new Uint8Array(t,12+o,s);this.content=qx.decodeText(c)}else if(5130562===u){var l=12+o;this.body=t.slice(l,l+s)}o+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},t_=function(){function e(t,n){if(r(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=jb.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return a(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},u={};for(var c in a){var l=h_[c]||c.toLowerCase();o[l]=a[c]}for(var h in e.attributes){var f=h_[h]||h.toLowerCase();if(void 0!==a[h]){var d=n.accessors[e.attributes[h]],p=s_[d.componentType];u[f]=p,s[f]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,u)}))}))}}]),e}(),n_=function(){function e(){r(this,e),this.name=jb.KHR_TEXTURE_TRANSFORM}return a(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),r_=function(e){dl(n,e);var t=Ub(n);function n(e){var i;r(this,n),(i=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),l={specular:{value:(new ed).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return i._extraUniforms=l,i.onBeforeCompile=function(e){for(var t in l)e.uniforms[t]=l[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",c)},Object.defineProperties(hl(i),{specular:{get:function(){return l.specular.value},set:function(e){l.specular.value=e}},specularMap:{get:function(){return l.specularMap.value},set:function(e){l.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(e){l.glossiness.value=e}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(e){l.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete i.metalness,delete i.roughness,delete i.metalnessMap,delete i.roughnessMap,i.setValues(e),i}return a(n,[{key:"copy",value:function(e){return cl(ul(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(Ky),i_=function(){function e(){r(this,e),this.name=jb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return a(e,[{key:"getMaterialType",value:function(){return r_}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new ed(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new ed(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new ed(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",o)),i.push(n.assignTexture(e,"specularMap",o))}return Promise.all(i)}},{key:"createMaterial",value:function(e){var t=new r_(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),a_=function e(){r(this,e),this.name=jb.KHR_MESH_QUANTIZATION},o_=function(e){dl(n,e);var t=Ub(n);function n(e,i,a,o){return r(this,n),t.call(this,e,i,a,o)}return a(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}}]),n}(rx);o_.prototype.beforeStart_=o_.prototype.copySampleValue_,o_.prototype.afterEnd_=o_.prototype.copySampleValue_,o_.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,c=r-t,l=(n-t)/c,h=l*l,f=h*l,d=e*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+l,x=0;x!==o;x++){var b=a[p+x+o],_=a[p+x+s]*c,w=a[d+x+o],M=a[d+x]*c;i[x]=g*b+y*_+v*w+m*M}return i};var s_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},u_={9728:kl,9729:Cl,9984:Ll,9985:1007,9986:Rl,9987:Pl},c_={33071:Tl,33648:Al,10497:El},l_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},h_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},f_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},d_={CUBICSPLINE:void 0,LINEAR:Vl,STEP:Gl};function p_(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function v_(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function m_(e,t){void 0!==t.extras&&("object"===o(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function g_(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function y_(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function x_(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var b_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Hb,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new Xx(this.options.manager):this.textureLoader=new Sx(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new _x(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return a(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};v_(i,a,r),m_(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var u=0,c=e.length;u<c;u++){var l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[jb.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(p_(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,a,o=e[0],s=l_[r.type],u=s_[r.componentType],c=u.BYTES_PER_ELEMENT,l=c*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(f&&f!==l){var p=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new u(o,p*f,r.count*f/c),m=new qm(i,f/c),t.cache.add(v,m)),a=new Xm(m,s,h%f/c,d)}else i=null===o?new u(r.count*s):new u(o,h,r.count*s),a=new id(i,s,d);if(void 0!==r.sparse){var g=l_.SCALAR,y=s_[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,_=new y(e[1],x,r.sparse.count*g),w=new u(e[2],b,r.sparse.count*s);null!==o&&(a=new id(a.array.slice(),a.itemSize,a.normalized));for(var M=0,S=_.length;M<S;M++){var E=_[M];if(a.setX(E,w[M*s]),s>=2&&a.setY(E,w[M*s+1]),s>=3&&a.setZ(E,w[M*s+2]),s>=4&&a.setW(E,w[M*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,i,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=this.options,o=i.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var u=self.URL||self.webkitURL,c=t.uri||"",l=!1,h=!0,f=c.search(/\.jpe?g($|\?)/i)>0||0===c.search(/^data\:image\/jpeg/);if(("image/jpeg"===t.mimeType||f)&&(h=!1),void 0!==t.bufferView)c=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);h=6===n||4===n||3===n}l=!0;var r=new Blob([e],{type:t.mimeType});return c=u.createObjectURL(r)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var d=Promise.resolve(c).then((function(e){return new Promise((function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){var n=new Sh(e);n.needsUpdate=!0,t(n)}),n.load(p_(e,a.path),i,void 0,r)}))})).then((function(t){!0===l&&u.revokeObjectURL(c),t.flipY=!1,o.name&&(t.name=o.name),h||(t.format=Ul);var n=(i.samplers||{})[o.sampler]||{};return t.magFilter=u_[n.magFilter]||Cl,t.minFilter=u_[n.minFilter]||Pl,t.wrapS=c_[n.wrapS]||El,t.wrapT=c_[n.wrapT]||El,r.associations.set(t,{type:"textures",index:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[s]=d,d}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[jb.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[jb.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var o=r.associations.get(i);i=r.extensions[jb.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,o)}}return e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new zg,$f.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,c=this.cache.get(u);c||(c=new Ag,$f.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(u,c)),n=c}if(r||i||a){var l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),r&&(l+="vertex-tangents:"),i&&(l+="vertex-colors:"),a&&(l+="flat-shading:");var h=this.cache.get(l);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(l,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return Ky}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=a.extensions||{},u=[];if(s[jb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=i[jb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),u.push(c.extendParams(o,a,n))}else if(s[jb.KHR_MATERIALS_UNLIT]){var l=i[jb.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),u.push(l.extendParams(o,a,n))}else{var h=a.pbrMetallicRoughness||{};if(o.color=new ed(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var f=h.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}void 0!==h.baseColorTexture&&u.push(n.assignTexture(o,"map",h.baseColorTexture)),o.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,o.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(u.push(n.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=2);var d=a.alphaMode||"OPAQUE";return"BLEND"===d?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===d&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==td&&(u.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new xh(1,-1),void 0!==a.normalTexture.scale&&o.normalScale.set(a.normalTexture.scale,-a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==td&&(u.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==td&&(o.emissive=(new ed).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==td&&u.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture)),Promise.all(u).then((function(){var r;return r=t===r_?i[jb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),a.name&&(r.name=a.name),r.map&&(r.map.encoding=Kl),r.emissiveMap&&(r.emissiveMap.encoding=Kl),m_(r,a),n.associations.set(r,{type:"materials",index:e}),a.extensions&&v_(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=gb.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[jb.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return w_(n,e,t)}))}for(var a,o,s=[],u=0,c=e.length;u<c;u++){var l=e[u],h=(void 0,(o=(a=l).extensions&&a.extensions[jb.KHR_DRACO_MESH_COMPRESSION])?"draco:"+o.bufferView+":"+o.indices+":"+y_(o.attributes):a.indices+":"+y_(a.attributes)+":"+a.mode),f=r[h];if(f)s.push(f.promise);else{var d;d=l.extensions&&l.extensions[jb.KHR_DRACO_MESH_COMPRESSION]?i(l):w_(new md,l,t),r[h]={primitive:l,promise:d},s.push(d)}}return Promise.all(s)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,i=this.extensions,a=r.meshes[e],o=a.primitives,s=[],u=0,c=o.length;u<c;u++){var l=void 0===o[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new Ky({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),t.DefaultMaterial):this.getDependency("material",o[u].material);s.push(l)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],u=[],c=0,l=s.length;c<l;c++){var h=s[c],f=o[c],d=void 0,p=r[c];if(4===f.mode||5===f.mode||6===f.mode||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new mg(h,p):new Id(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),5===f.mode?d.geometry=M_(d.geometry,1):6===f.mode&&(d.geometry=M_(d.geometry,2));else if(1===f.mode)d=new Dg(h,p);else if(3===f.mode)d=new Og(h,p);else if(2===f.mode)d=new Fg(h,p);else{if(0!==f.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new Gg(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&g_(d,a),d.name=n.createUniqueName(a.name||"mesh_"+e),m_(d,a),f.extensions&&v_(i,d,f),n.assignFinalMaterial(d),u.push(d)}if(1===u.length)return u[0];for(var v=new Nm,m=0,g=u.length;m<g;m++)v.add(u[m]);return v}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new jd(yh.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new fp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),m_(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[],s=0,u=t.channels.length;s<u;s++){var c=t.channels[s],l=t.samplers[c.sampler],h=c.target,f=void 0!==h.node?h.node:h.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,p=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",p)),a.push(l),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){for(var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=[],c=function(e,t){var n=r[e],c=i[e],l=a[e],h=o[e],f=s[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var d=void 0;switch(f_[f.path]){case f_.weights:d=lx;break;case f_.rotation:d=fx;break;default:d=px}var p=n.name?n.name:n.uuid,v=void 0!==h.interpolation?d_[h.interpolation]:Vl,m=[];f_[f.path]===f_.weights?n.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);var g=l.array;if(l.normalized){for(var y=x_(g.constructor),x=new Float32Array(g.length),b=0,_=g.length;b<_;b++)x[b]=g[b]*y;g=x}for(var w=0,M=m.length;w<M;w++){var S=new d(m[w]+"."+f_[f.path],c.array,g,v);"CUBICSPLINE"===h.interpolation&&(S.createInterpolant=function(e){return new o_(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}},l=0,h=r.length;l<h;l++)c(l);var f=t.name?t.name:"animation_"+e;return new vx(f,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if((o=!0===i.isBone?new gg:t.length>1?new Nm:1===t.length?t[0]:new If)!==t[0])for(var s=0,u=t.length;s<u;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),m_(o,i),i.extensions&&v_(n,o,i),void 0!==i.matrix){var c=new cf;c.fromArray(i.matrix),o.applyMatrix4(c)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.set(o,{type:"nodes",index:e}),o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],i=new Nm;r.name&&(i.name=this.createUniqueName(r.name)),m_(i,r),r.extensions&&v_(n,i,r);for(var a=r.nodes||[],o=[],s=0,u=a.length;s<u;s++)o.push(__(a[s],i,t,this));return Promise.all(o).then((function(){return i}))}}]),e}();function __(e,t,n,r){var i=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then((function(e){for(var n=[],i=0,a=(t=e).joints.length;i<a;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],i=[],a=0,o=n.length;a<o;a++){var s=n[a];if(s){r.push(s);var u=new cf;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new _g(r,i),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var a=[];if(i.children)for(var o=i.children,s=0,u=o.length;s<u;s++){var c=o[s];a.push(__(c,e,n,r))}return Promise.all(a)}))}function w_(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=h_[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return m_(e,t),function(e,t,n){var r=t.attributes,i=new Ih;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new Ch(o[0],o[1],o[2]),new Ch(s[0],s[1],s[2])),a.normalized){var u=x_(s_[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var c=t.targets;if(void 0!==c){for(var l=new Ch,h=new Ch,f=0,d=c.length;f<d;f++){var p=c[f];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=x_(s_[v.componentType]);h.multiplyScalar(y)}l.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}e.boundingBox=i;var x=new Qh;i.getCenter(x.center),x.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=x}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=0,o=t.length;a<o;a++){var s=t[a];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],c=[],l=0,h=t.length;l<h;l++){var f=t[l];if(r){var d=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):e.attributes.position;u.push(d)}if(i){var p=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):e.attributes.normal;c.push(p)}}return Promise.all([Promise.all(u),Promise.all(c)]).then((function(t){var n=t[0],a=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function M_(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var c=0;c<o;c++)c%2==0?(s.push(n.getX(c)),s.push(n.getX(c+1)),s.push(n.getX(c+2))):(s.push(n.getX(c+2)),s.push(n.getX(c+1)),s.push(n.getX(c)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(s),l}var S_=function(e){dl(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ul(t);if(n){var i=ul(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pl(this,e)});function o(){var e;return r(this,o),(e=i.apply(this,arguments)).up.set(0,0,1),e}return a(o,[{key:"centerOn",value:function(e){var t=e.geometry.bbox.get(),n=(e.xScale(t.center[0]+e.xScale._range/2)-e.xScale(t.center[0]-e.xScale._range/2))/2,r=(e.yScale(t.center[1]+e.yScale._range/2)-e.yScale(t.center[1]-e.yScale._range/2))/2,i=Math.max(e.xScale._range,e.yScale._range),a=this.fov/360*Math.PI*2,o=Math.sin((Math.PI-a)/2)/(Math.sin(a)/i);this.position.set(1.4*n,-1.5*r,.3*o),this.lookAt(n,r,0),this.parentControl&&this.parentControl.target&&(this.parentControl.target.set(n,r,0),this.parentControl.update())}}]),o}(jd),E_=S_;var T_=function(e){dl(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ul(t);if(n){var i=ul(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pl(this,e)});function a(){var e;r(this,a),e=i.call(this);var t=new jx(10066329,.8),n=new Hx(16777215,.7);return n.position.set(1e3,0,2e3),e.add(t),e.add(n),e}return a}(Nm);function A_(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function k_(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return A_({type:"LineString",coordinates:e},t,n)}function L_(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function R_(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function C_(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function P_(e){return"Feature"===e.type?e.geometry:e}function O_(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(e),i=P_(t),a=i.type,o=t.bbox,s=i.coordinates;if(o&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,o))return!1;"Polygon"===a&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(I_(r,s[c][0],n.ignoreBoundary)){for(var l=!1,h=1;h<s[c].length&&!l;)I_(r,s[c][h],!n.ignoreBoundary)&&(l=!0),h++;l||(u=!0)}return u}function I_(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,a=t.length-1;i<t.length;a=i++){var o=t[i][0],s=t[i][1],u=t[a][0],c=t[a][1];if(e[1]*(o-u)+s*(u-e[0])+c*(e[0]-o)==0&&(o-e[0])*(u-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!n;s>e[1]!=c>e[1]&&e[0]<(u-o)*(e[1]-s)/(c-s)+o&&(r=!r)}return r}function N_(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function D_(e,t){!function(e,t){var n,r,i,a,o,s,u,c,l,h,f=0,d="FeatureCollection"===e.type,p="Feature"===e.type,v=d?e.features.length:1;for(n=0;n<v;n++){for(s=d?e.features[n].geometry:p?e.geometry:e,c=d?e.features[n].properties:p?e.properties:{},l=d?e.features[n].bbox:p?e.bbox:void 0,h=d?e.features[n].id:p?e.id:void 0,o=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<o;i++)if(null!==(a=u?s.geometries[i]:s))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,c,l,h))return!1;f++}}(e,(function(e,n,r,i,a){var o,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(A_(e,r,{bbox:i,id:a}),n,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var u=0;u<e.coordinates.length;u++){var c=e.coordinates[u];if(!1===t(A_({type:o,coordinates:c},r),n,u))return!1}}))}var F_=function(e){if(!e)throw new Error("geojson is required");var t=[];return D_(e,(function(e){!function(e,t){var n=[],r=e.geometry;if(null!==r){switch(r.type){case"Polygon":n=C_(r);break;case"LineString":n=[C_(r)]}n.forEach((function(n){var r=function(e,t){var n=[];return e.reduce((function(e,r){var i,a,o,s,u,c,l=k_([e,r],t);return l.bbox=(a=r,o=(i=e)[0],s=i[1],[o<(u=a[0])?o:u,s<(c=a[1])?s:c,o>u?o:u,s>c?s:c]),n.push(l),r})),n}(n,e.properties);r.forEach((function(e){e.id=t.length,t.push(e)}))}))}}(e,t)})),L_(t)},z_=n(5210);function U_(e,t){var n=C_(e),r=C_(t);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],a=n[0][1],o=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],h=r[1][1],f=(h-c)*(o-i)-(l-u)*(s-a);if(0===f)return null;var d=((l-u)*(a-c)-(h-c)*(i-u))/f,p=((o-i)*(a-c)-(s-a)*(i-u))/f;return d>=0&&d<=1&&p>=0&&p<=1?function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!R_(e[0])||!R_(e[1]))throw new Error("coordinates must contain numbers");return A_({type:"Point",coordinates:e},t,n)}([i+d*(o-i),a+d*(s-a)]):null}var B_=function(e,t){var n={},r=[];if("LineString"===e.type&&(e=A_(e)),"LineString"===t.type&&(t=A_(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var i=U_(e,t);return i&&r.push(i),L_(r)}var a=z_();return a.load(F_(t)),N_(F_(e),(function(e){N_(a.search(e),(function(t){var i=U_(e,t);if(i){var a=C_(i).join(",");n[a]||(n[a]=!0,r.push(i))}}))})),L_(r)};function H_(e,t){void 0===t&&(t={});var n=P_(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),n.type){case"Polygon":return function(e,t){return void 0===t&&(t={}),j_(P_(e).coordinates,t.properties?t.properties:"Feature"===e.type?e.properties:{})}(n,t);case"MultiPolygon":return function(e,t){void 0===t&&(t={});var n=P_(e).coordinates,r=t.properties?t.properties:"Feature"===e.type?e.properties:{},i=[];return n.forEach((function(e){i.push(j_(e,r))})),L_(i)}(n,t);default:throw new Error("invalid poly")}}function j_(e,t){return e.length>1?function(e,t,n){return void 0===n&&(n={}),A_({type:"MultiLineString",coordinates:e},t,n)}(e,t):k_(e[0],t)}function G_(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(W_(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function V_(e,t){for(var n=0,r=t.coordinates;n<r.length;n++)if(O_(r[n],e))return!0;return B_(t,H_(e)).features.length>0}function W_(e,t,n){var r=n[0]-e[0],i=n[1]-e[1],a=t[0]-e[0],o=t[1]-e[1];return 0==r*o-i*a&&(Math.abs(a)>=Math.abs(o)?a>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:o>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1])}var q_={type:"change"},$_={type:"start"},X_={type:"end"},Y_=function(e){dl(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ul(t);if(n){var i=ul(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pl(this,e)});function a(e,t){var n,o,s,u,c,l,h;r(this,a),n=i.call(this),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.object=e,n.domElement=t,n.domElement.style.touchAction="none",n.enabled=!0,n.target=new Ch,n.minDistance=0,n.maxDistance=1/0,n.minZoom=0,n.maxZoom=1/0,n.minPolarAngle=0,n.maxPolarAngle=Math.PI,n.minAzimuthAngle=-1/0,n.maxAzimuthAngle=1/0,n.enableDamping=!1,n.dampingFactor=.05,n.enableZoom=!0,n.zoomSpeed=1,n.enableRotate=!0,n.rotateSpeed=1,n.enablePan=!0,n.panSpeed=1,n.screenSpacePanning=!0,n.keyPanSpeed=7,n.autoRotate=!1,n.autoRotateSpeed=2,n.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},n.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},n.touches={ONE:0,TWO:2},n.target0=n.target.clone(),n.position0=n.object.position.clone(),n.zoom0=n.object.zoom,n._domElementKeyEvents=null,n.getPolarAngle=function(){return m.phi},n.getAzimuthalAngle=function(){return m.theta},n.getDistance=function(){return this.object.position.distanceTo(this.target)},n.listenToKeyEvents=function(e){e.addEventListener("keydown",ee),this._domElementKeyEvents=e},n.saveState=function(){f.target0.copy(f.target),f.position0.copy(f.object.position),f.zoom0=f.object.zoom},n.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent(q_),f.update(),p=d.NONE},n.update=(o=new Ch,s=(new Rh).setFromUnitVectors(e.up,new Ch(0,1,0)),u=s.clone().invert(),c=new Ch,l=new Rh,h=2*Math.PI,function(){var e=f.object.position;o.copy(e).sub(f.target),o.applyQuaternion(s),m.setFromVector3(o),f.autoRotate&&p===d.NONE&&O(2*Math.PI/60/60*f.autoRotateSpeed),f.enableDamping?(m.theta+=g.theta*f.dampingFactor,m.phi+=g.phi*f.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);var t=f.minAzimuthAngle,n=f.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=h:t>Math.PI&&(t-=h),n<-Math.PI?n+=h:n>Math.PI&&(n-=h),m.theta=t<=n?Math.max(t,Math.min(n,m.theta)):m.theta>(t+n)/2?Math.max(t,m.theta):Math.min(n,m.theta)),m.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(f.minDistance,Math.min(f.maxDistance,m.radius)),!0===f.enableDamping?f.target.addScaledVector(x,f.dampingFactor):f.target.add(x),o.setFromSpherical(m),o.applyQuaternion(u),e.copy(f.target).add(o),f.object.lookAt(f.target),!0===f.enableDamping?(g.theta*=1-f.dampingFactor,g.phi*=1-f.dampingFactor,x.multiplyScalar(1-f.dampingFactor)):(g.set(0,0,0),x.set(0,0,0)),y=1,!!(b||c.distanceToSquared(f.object.position)>v||8*(1-l.dot(f.object.quaternion))>v)&&(f.dispatchEvent(q_),c.copy(f.object.position),l.copy(f.object.quaternion),b=!1,!0)}),n.dispose=function(){f.domElement.removeEventListener("contextmenu",te),f.domElement.removeEventListener("pointerdown",Y),f.domElement.removeEventListener("pointercancel",K),f.domElement.removeEventListener("wheel",Q),f.domElement.removeEventListener("pointermove",Z),f.domElement.removeEventListener("pointerup",J),null!==f._domElementKeyEvents&&f._domElementKeyEvents.removeEventListener("keydown",ee)};var f=hl(n),d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=d.NONE,v=1e-6,m=new Tb,g=new Tb,y=1,x=new Ch,b=!1,_=new xh,w=new xh,M=new xh,S=new xh,E=new xh,T=new xh,A=new xh,k=new xh,L=new xh,R=[],C={};function P(){return Math.pow(.95,f.zoomSpeed)}function O(e){g.theta-=e}function I(e){g.phi-=e}var N,D=(N=new Ch,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),x.add(N)}),F=function(){var e=new Ch;return function(t,n){!0===f.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(f.object.up,e)),e.multiplyScalar(t),x.add(e)}}(),z=function(){var e=new Ch;return function(t,n){var r=f.domElement;if(f.object.isPerspectiveCamera){var i=f.object.position;e.copy(i).sub(f.target);var a=e.length();a*=Math.tan(f.object.fov/2*Math.PI/180),D(2*t*a/r.clientHeight,f.object.matrix),F(2*n*a/r.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(D(t*(f.object.right-f.object.left)/f.object.zoom/r.clientWidth,f.object.matrix),F(n*(f.object.top-f.object.bottom)/f.object.zoom/r.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();function U(e){f.object.isPerspectiveCamera?y/=e:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*e)),f.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function B(e){f.object.isPerspectiveCamera?y*=e:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/e)),f.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function H(e){_.set(e.clientX,e.clientY)}function j(e){S.set(e.clientX,e.clientY)}function G(){if(1===R.length)_.set(R[0].pageX,R[0].pageY);else{var e=.5*(R[0].pageX+R[1].pageX),t=.5*(R[0].pageY+R[1].pageY);_.set(e,t)}}function V(){if(1===R.length)S.set(R[0].pageX,R[0].pageY);else{var e=.5*(R[0].pageX+R[1].pageX),t=.5*(R[0].pageY+R[1].pageY);S.set(e,t)}}function W(){var e=R[0].pageX-R[1].pageX,t=R[0].pageY-R[1].pageY,n=Math.sqrt(e*e+t*t);A.set(0,n)}function q(e){if(1==R.length)w.set(e.pageX,e.pageY);else{var t=ie(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);w.set(n,r)}M.subVectors(w,_).multiplyScalar(f.rotateSpeed);var i=f.domElement;O(2*Math.PI*M.x/i.clientHeight),I(2*Math.PI*M.y/i.clientHeight),_.copy(w)}function $(e){if(1===R.length)E.set(e.pageX,e.pageY);else{var t=ie(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);E.set(n,r)}T.subVectors(E,S).multiplyScalar(f.panSpeed),z(T.x,T.y),S.copy(E)}function X(e){var t=ie(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);k.set(0,i),L.set(0,Math.pow(k.y/A.y,f.zoomSpeed)),U(L.y),A.copy(k)}function Y(e){!1!==f.enabled&&(0===R.length&&(f.domElement.setPointerCapture(e.pointerId),f.domElement.addEventListener("pointermove",Z),f.domElement.addEventListener("pointerup",J)),function(e){R.push(e)}(e),"touch"===e.pointerType?function(e){switch(re(e),R.length){case 1:switch(f.touches.ONE){case 0:if(!1===f.enableRotate)return;G(),p=d.TOUCH_ROTATE;break;case 1:if(!1===f.enablePan)return;V(),p=d.TOUCH_PAN;break;default:p=d.NONE}break;case 2:switch(f.touches.TWO){case 2:if(!1===f.enableZoom&&!1===f.enablePan)return;f.enableZoom&&W(),f.enablePan&&V(),p=d.TOUCH_DOLLY_PAN;break;case 3:if(!1===f.enableZoom&&!1===f.enableRotate)return;f.enableZoom&&W(),f.enableRotate&&G(),p=d.TOUCH_DOLLY_ROTATE;break;default:p=d.NONE}break;default:p=d.NONE}p!==d.NONE&&f.dispatchEvent($_)}(e):function(e){var t;switch(e.button){case 0:t=f.mouseButtons.LEFT;break;case 1:t=f.mouseButtons.MIDDLE;break;case 2:t=f.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===f.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),p=d.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===f.enablePan)return;j(e),p=d.PAN}else{if(!1===f.enableRotate)return;H(e),p=d.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===f.enableRotate)return;H(e),p=d.ROTATE}else{if(!1===f.enablePan)return;j(e),p=d.PAN}break;default:p=d.NONE}p!==d.NONE&&f.dispatchEvent($_)}(e))}function Z(e){!1!==f.enabled&&("touch"===e.pointerType?function(e){switch(re(e),p){case d.TOUCH_ROTATE:if(!1===f.enableRotate)return;q(e),f.update();break;case d.TOUCH_PAN:if(!1===f.enablePan)return;$(e),f.update();break;case d.TOUCH_DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;!function(e){f.enableZoom&&X(e),f.enablePan&&$(e)}(e),f.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;!function(e){f.enableZoom&&X(e),f.enableRotate&&q(e)}(e),f.update();break;default:p=d.NONE}}(e):function(e){if(!1!==f.enabled)switch(p){case d.ROTATE:if(!1===f.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),M.subVectors(w,_).multiplyScalar(f.rotateSpeed);var t=f.domElement;O(2*Math.PI*M.x/t.clientHeight),I(2*Math.PI*M.y/t.clientHeight),_.copy(w),f.update()}(e);break;case d.DOLLY:if(!1===f.enableZoom)return;!function(e){k.set(e.clientX,e.clientY),L.subVectors(k,A),L.y>0?U(P()):L.y<0&&B(P()),A.copy(k),f.update()}(e);break;case d.PAN:if(!1===f.enablePan)return;!function(e){E.set(e.clientX,e.clientY),T.subVectors(E,S).multiplyScalar(f.panSpeed),z(T.x,T.y),S.copy(E),f.update()}(e)}}(e))}function J(e){!1!==f.enabled&&(e.pointerType,f.dispatchEvent(X_),p=d.NONE,ne(e),0===R.length&&(f.domElement.releasePointerCapture(e.pointerId),f.domElement.removeEventListener("pointermove",Z),f.domElement.removeEventListener("pointerup",J)))}function K(e){ne(e)}function Q(e){!1===f.enabled||!1===f.enableZoom||p!==d.NONE&&p!==d.ROTATE||(e.preventDefault(),f.dispatchEvent($_),function(e){e.deltaY<0?B(P()):e.deltaY>0&&U(P()),f.update()}(e),f.dispatchEvent(X_))}function ee(e){!1!==f.enabled&&!1!==f.enablePan&&function(e){var t=!1;switch(e.code){case f.keys.UP:z(0,f.keyPanSpeed),t=!0;break;case f.keys.BOTTOM:z(0,-f.keyPanSpeed),t=!0;break;case f.keys.LEFT:z(f.keyPanSpeed,0),t=!0;break;case f.keys.RIGHT:z(-f.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),f.update())}(e)}function te(e){!1!==f.enabled&&e.preventDefault()}function ne(e){delete C[e.pointerId];for(var t=0;t<R.length;t++)if(R[t].pointerId==e.pointerId)return void R.splice(t,1)}function re(e){var t=C[e.pointerId];void 0===t&&(t=new xh,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ie(e){var t=e.pointerId===R[0].pointerId?R[1]:R[0];return C[t.pointerId]}return f.domElement.addEventListener("contextmenu",te),f.domElement.addEventListener("pointerdown",Y),f.domElement.addEventListener("pointercancel",K),f.domElement.addEventListener("wheel",Q,{passive:!1}),n.update(),n}return a}(ah);var Z_=new xf(0,0,0,"YXZ"),J_=new Ch,K_={type:"change"},Q_={type:"lock"},ew={type:"unlock"},tw=Math.PI/2,nw=function(e){dl(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ul(t);if(n){var i=ul(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pl(this,e)});function a(e,t){var n;r(this,a),n=i.call(this),void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),n.domElement=t,n.isLocked=!1,n.minPolarAngle=0,n.maxPolarAngle=Math.PI;var o,s=hl(n);function u(t){if(!1!==s.isLocked){var n=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;Z_.setFromQuaternion(e.quaternion),Z_.y-=.002*n,Z_.x-=.002*r,Z_.x=Math.max(tw-s.maxPolarAngle,Math.min(tw-s.minPolarAngle,Z_.x)),e.quaternion.setFromEuler(Z_),s.dispatchEvent(K_)}}function c(){s.domElement.ownerDocument.pointerLockElement===s.domElement?(s.dispatchEvent(Q_),s.isLocked=!0):(s.dispatchEvent(ew),s.isLocked=!1)}function l(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}return n.connect=function(){s.domElement.ownerDocument.addEventListener("mousemove",u),s.domElement.ownerDocument.addEventListener("pointerlockchange",c),s.domElement.ownerDocument.addEventListener("pointerlockerror",l)},n.disconnect=function(){s.domElement.ownerDocument.removeEventListener("mousemove",u),s.domElement.ownerDocument.removeEventListener("pointerlockchange",c),s.domElement.ownerDocument.removeEventListener("pointerlockerror",l)},n.dispose=function(){this.disconnect()},n.getObject=function(){return e},n.getDirection=(o=new Ch(0,0,-1),function(t){return t.copy(o).applyQuaternion(e.quaternion)}),n.moveForward=function(t){J_.setFromMatrixColumn(e.matrix,0),J_.crossVectors(e.up,J_),e.position.addScaledVector(J_,t)},n.moveRight=function(t){J_.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(J_,t)},n.lock=function(){this.domElement.requestPointerLock()},n.unlock=function(){s.domElement.ownerDocument.exitPointerLock()},n.connect(),n}return a}(ah);function rw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ul(e);if(t){var i=ul(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pl(this,n)}}var iw=function(e){dl(n,e);var t=rw(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).enableDamping=!0,a.dampingFactor=.2,a.enableKeys=!1,a.rotateSpeed=.3,a.zoomSpeed=1,a.minAzimuthAngle=Math.PI*(1/4),a.maxPolarAngle=Math.PI*(1/2.2),a.minDistance=10,a.maxDistance=1e3,a.minZoom=10,a.maxZoom=1e3,a.enablePan=!0,a.screenSpacePanning=!1,a}return a(n,[{key:"activate",value:function(e){this.enabled=!0}},{key:"deactivate",value:function(){this.enabled=!1}}]),n}(Y_),aw=function(e){dl(n,e);var t=rw(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).velocity=new Ch,a.direction=new Ch,a.euler=new xf(0,0,0,"ZYX"),a.raycaster=new Mb(new Ch,new Ch(0,0,-1),0,5),a.state={_moving:!1,_moveForward:!1,_moveBackward:!1,_moveLeft:!1,_moveRight:!1,_canJump:!0},Object.defineProperties(a.state,{moving:{get:function(){return a.state._moving},set:function(e){a.state._moving=e,e||(a.velocity.x=0,a.velocity.y=0)}},moveForward:{get:function(){return a.state._moveForward},set:function(e){e!==a.state._moveForward&&(a.state._moveForward=e,a.update())}},moveBackward:{get:function(){return a.state._moveBackward},set:function(e){e!==a.state._moveBackward&&(a.state._moveBackward=e,a.update())}},moveLeft:{get:function(){return a.state._moveLeft},set:function(e){e!==a.state._moveLeft&&(a.state._moveLeft=e,a.update())}},moveRight:{get:function(){return a.state._moveRight},set:function(e){e!==a.state._moveRight&&(a.state._moveRight=e,a.update())}},canJump:{get:function(){return a.getObject().position.z<=(a.state.isOnTatami?3:2.5)},set:function(){a.getObject().position.z+=.1,a.update()}}}),a.onKeyDown=a.onKeyDown.bind(hl(a)),a.onKeyUp=a.onKeyUp.bind(hl(a)),a.onMouseMove=a.onMouseMove.bind(hl(a)),a.update=a.update.bind(hl(a)),a.lastTime=performance.now(),a.lastPosition=a.getObject().position,a.buildings=[],a.trees=[],a.floor=[],a}return a(n,[{key:"onKeyDown",value:function(e){if(this.enabled)switch(this.state.moving=!0,e.code){case"ArrowUp":case"KeyW":this.state.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.state.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.state.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.state.moveRight=!0;break;case"Space":this.state.canJump&&(this.velocity.z+=140),this.state.canJump=!1}}},{key:"onKeyUp",value:function(e){if(this.enabled&&"Space"!==e.code)switch(this.state.moving=!1,e.code){case"ArrowUp":case"KeyW":this.state.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.state.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.state.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.state.moveRight=!1}}},{key:"isFalling",value:function(){return this.raycaster.ray.origin.copy(this.getObject().position),this.raycaster.ray.direction.set(0,0,-1),0===this.raycaster.intersectObjects(this.floor).length&&this.state.canJump}},{key:"isOnTatami",value:function(){this.raycaster.ray.origin.copy(this.getObject().position),this.raycaster.ray.direction.set(0,0,-1);var e=this.raycaster.intersectObject(this.tatami);return this.dispatchEvent({type:"onTatami",value:e.length>0}),e.length>0}},{key:"isColliding",value:function(){var e=this.getObject().position,t={type:"Polygon",coordinates:[Array.apply(null,Array(10)).map((function(t,n){var r=Math.PI*n/10;return[e.x+2*Math.sin(r),e.y+2*Math.cos(r)]}))]};return this.buildings.features.filter((function(e){return 0===e.properties.base&&(n=t,r=!1,D_(e,(function(e){D_(n,(function(t){if(!0===r)return!0;r=!function(e,t){var n=!0;return D_(e,(function(e){D_(t,(function(t){if(!1===n)return!1;n=function(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return n=e.coordinates,r=t.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!G_(t,e);case"Polygon":return!O_(e,t)}break;case"LineString":switch(t.type){case"Point":return!G_(e,t);case"LineString":return!(B_(e,t).features.length>0);case"Polygon":return!V_(t,e)}break;case"Polygon":switch(t.type){case"Point":return!O_(t,e);case"LineString":return!V_(e,t);case"Polygon":return!function(e,t){for(var n=0,r=e.coordinates[0];n<r.length;n++)if(O_(r[n],t))return!0;for(var i=0,a=t.coordinates[0];i<a.length;i++)if(O_(a[i],e))return!0;return B_(H_(e),H_(t)).features.length>0}(t,e)}}var n,r;return!1}(e.geometry,t.geometry)}))})),n}(e.geometry,t.geometry)}))})),r);var n,r})).length>0}},{key:"onColliding",value:function(e){var t=this.getObject().position,n=this.getDirection(new Ch(0,0,-1));throw this.getObject().position.fromArray([t.x-10*n.x,t.y-10*n.y,t.z]),this.state.moving=!1,new Exception("Collision")}},{key:"update",value:function(e){if(this.enabled){var t=Math.min(.075,e&&this.lastTime?(e-this.lastTime)/1e3:.075);if(this.state.falling)this.velocity.z-=9.8*50*t,this.getObject().position.z+=this.velocity.z*t,this.getObject().position.z<-1e3&&(this.deactivate(),document.dispatchEvent(new Event("gameover")));else try{this.state.falling=this.isFalling(),this.state.isOnTatami=this.isOnTatami(),this.direction.y=Number(this.state.moveForward)-Number(this.state.moveBackward),this.direction.x=Number(this.state.moveRight)-Number(this.state.moveLeft),this.direction.normalize(),this.velocity.x-=5*this.velocity.x*t,this.velocity.y-=5*this.velocity.y*t,this.state.canJump?this.velocity.z=0:this.velocity.z-=539*t;var n=this.state.isOnTatami?50-Math.min(25,100/this.distance):200;(this.state.moveForward||this.state.moveBackward)&&(this.velocity.y-=this.direction.y*n*t),(this.state.moveLeft||this.state.moveRight)&&(this.velocity.x-=this.direction.x*n*t),this.moveRight(-this.velocity.x*t),this.moveForward(-this.velocity.y*t),this.getObject().position.z=Math.max(this.state.isOnTatami?3:2.5,this.getObject().position.z+this.velocity.z*t),!this.state.isOnTatami&&this.isColliding()&&this.onColliding(t)}catch(e){console.log("on collision")}this.lastTime=e,this.lastPosition=this.getObject().position,this.dispatchEvent({type:"change"}),(this.state.moving||!this.state.canJump||this.state.falling)&&requestAnimationFrame(this.update)}}},{key:"activate",value:function(e){this.getObject().rotation.copy(e.rotation),this.enabled=!0,document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.lock()}},{key:"deactivate",value:function(){this.enabled=!1,document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("pointerlockchange",this.onPointerLockChange),this.unlock()}},{key:"onMouseMove",value:function(e){if(this.enabled&&this.isLocked){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.euler.setFromQuaternion(this.getObject().quaternion,"ZYX"),this.euler.z-=5e-4*t,this.euler.x-=5e-4*n,this.euler.x=Math.max(.42*Math.PI,Math.min(.8*Math.PI,this.euler.x)),this.getObject().quaternion.setFromEuler(this.euler),this.dispatchEvent({type:"change"})}}}]),n}(nw);function ow(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)throw"Invalid constructor arguments";this._el=e}ow.prototype.$on=function(e,t){this._el.addEventListener(e,t)},ow.prototype.$off=function(e,t){this._el.removeEventListener(e,t)},ow.prototype.$emit=function(e,t){this._el.dispatchEvent(new CustomEvent(e,{detail:t}))},ow.asEmitter=function(e){var t=new ow(document.createElement("div"));return e.$on=t.$on.bind(t),e.$off=t.$off.bind(t),e.$emit=t.$emit.bind(t),e};var sw=ow;function uw(e,t){var n=t[1]-t[0],r=e[1]-e[0],i=function(t){return(t-e[0])/r*n};return i._domain=n,i._range=r,i}var cw=[238580,5075606],lw=[238007,5075560],hw=function(e){dl(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ul(t);if(n){var i=ul(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pl(this,e)});function o(e,t){var n,a,s,u;r(this,o),n=i.apply(this,arguments),sw.asEmitter(hl(n)),n.done=!1,n.canvasEl=e,n.background=null,n.gameMode=t,n.state={_mode:"touch"===t||"cover"===t?"orbit":"pointer",orbit:{position:new Ch(0,0,100),rotation:new xf(1.08,.57,.28,"XYZ")},pointer:{position:new Ch(175,254,2.5),rotation:new xf(.5*Math.PI,.5*Math.PI,0,"XYZ")}},n.cameras={orbit:new E_(45,window.innerWidth/window.innerHeight,1,4e3),pointer:new E_(60,window.innerWidth/window.innerHeight,.1,400)},n.controls={orbit:new iw(n.cameras.orbit,n.canvasEl),pointer:new aw(n.cameras.pointer,document.body)},Object.defineProperties(n.state,{mode:{get:function(){return n.state._mode},set:function(e){"cover"!==t&&n.state._mode!==e&&(n.control.deactivate(),n.state._mode=e,n.control.activate(n.state),"pointer"===n.state._mode?(n.remove(n.marker),n.remove(n.targetLabel),n.add(n.legoPiece),n.add(n.armRight),n.add(n.armLeft)):(n.add(n.marker),n.add(n.targetLabel),n.remove(n.legoPiece),n.remove(n.armRight),n.remove(n.armLeft)),n.control.dispatchEvent({type:"init"}))}},position:{get:function(){return n.state[n.state.mode].position},set:function(e){n.state[n.state.mode].position=e}},rotation:{get:function(){return n.state[n.state.mode].rotation},set:function(e){n.state[n.state.mode].rotation=e}}}),Object.defineProperty(hl(n),"camera",{get:function(){return n.cameras[n.state.mode]}}),Object.defineProperty(hl(n),"control",{get:function(){return n.controls[n.state.mode]}});for(var c=0,l=["orbit","pointer"];c<l.length;c++){var h=l[c];n.cameras[h].position.copy(n.state[h].position),n.cameras[h].rotation.copy(n.state[h].rotation),n.cameras[h].parentControl=n.controls[h]}return n.lights=new T_,n.add(n.lights),Object.defineProperties(hl(n),{bbox:{get:function(){return a.get()},set:function(e){a=e,n.$emit("bbox:update",{bbox:e.get()})}},xScale:{get:function(){return u},set:function(e){u=e,n.$emit("scale:update",{dim:"x",fn:e})}},yScale:{get:function(){return s},set:function(e){s=e,this.$emit("scale:update",{dim:"y",fn:e})}}}),n.geojsonLayers={},n.$on("scale:update",(function(e){var t;for(var r in n.geojsonLayers)t=n.geojsonLayers[r],"x"===e.detail.dim?t.xScale=e.detail.fn:"y"===e.detail.dim&&(t.yScale=e.detail.fn),t.built=!1})),n.$on("bbox:update",(function(e){var t=e.detail.bbox,r=document.getElementById("canvas");if(r.clientWidth<r.clientHeight){var i=r.clientHeight/r.clientWidth-1,a=t.lats[1]-t.lats[0],o=t.lngs,s=[t.lats[0]-a*i*.5,t.lats[1]+a*i*.5];n.xScale=new uw(o,[0,r.clientWidth]),n.yScale=new uw(s,[0,r.clientHeight])}else{var u=r.clientWidth/r.clientHeight-1,c=t.lngs[1]-t.lngs[0],l=[t.lngs[0]-c*u*.5,t.lngs[1]+c*u*.5],h=t.lats;n.xScale=new uw(l,[0,r.clientWidth]),n.yScale=new uw(h,[0,r.clientHeight])}n.build(),n.render()})),n}return a(o,[{key:"onControlInit",value:function(e){var t=this;"orbit"===this.state.mode&&this.geojsonLayers.campus&&this.geojsonLayers.campus.built&&this.control.object.centerOn(this.geojsonLayers.campus),setTimeout((function(){return t.control.dispatchEvent({type:"change"})}),100)}},{key:"onControlChange",value:function(e){!this.done&&this.control.enabled&&(this.state.position.copy(this.camera.position),this.state.rotation.copy(this.camera.rotation),"pointer"===this.state.mode&&this.updatePositions(),this.$emit("control:change",{control:this.control,scene:this}))}},{key:"updatePositions",value:function(){var e=this.controls.pointer.getObject().position;if(this.marker&&(this.marker.position.copy(e),this.marker.position.z+=20),this.legoPiece){var t=this.controls.pointer.getDirection(new Ch(0,0,0)),n=this.controls.pointer.getObject().rotation.clone(),r=n.reorder("ZYX"),i=r.x,a=this.state.worldScale;if(this.legoPiece.position.set(e.x+2*t.x*a,e.y+2*t.y*a,e.z-1.5*a-2*Math.cos(i)*.5),this.armRight.position.set(e.x+1.5*t.x*a,e.y+1.5*t.y*a,e.z-1.2*a-2*Math.cos(i)*.5),this.armRight.position.x+=.7*Math.cos(n.z)*a,this.armRight.position.y+=.7*Math.sin(n.z)*a,this.armLeft.position.set(e.x+1.5*t.x*a,e.y+1.5*t.y*a,e.z-1.2*a-2*Math.cos(i)*.5),this.armLeft.position.x-=.7*Math.cos(n.z)*a,this.armLeft.position.y-=.7*Math.sin(n.z)*a,this.legoPiece.rotation.copy(n),this.armRight.rotation.set(-n.x+.8*Math.PI,-n.y,n.z+Math.PI,"ZYX"),this.armLeft.rotation.set(-n.x+.8*Math.PI,-n.y,n.z+Math.PI,"ZYX"),this.controls.pointer.state.isOnTatami){this.legoPiece.position.z-=.25,this.armLeft.position.z-=.25,this.armRight.position.z-=.25;var o=this.piecesLayer.getNearest({x:e.x+9*t.x*a,y:e.y+9*t.y*a,z:.25*a},this.controls.pointer.getObject().rotation.reorder("ZYX"));this.legoShadow.position.copy(o),this.closinesRing.position.copy(o),this.closinesRing.position.z=.55*a,r.x=.5*Math.PI,this.legoShadow.rotation.copy(r),this.legoShadow.rotation.z=this.piecesLayer.geometry.shapes[0].rotation.z}}}},{key:"addLayer",value:function(e){if(!e.name)throw new Error("Layer must be named");e.scene=this,e.xScale=this.xScale,e.yScale=this.yScale,this.geojsonLayers[e.name]=e,e.built&&this.render()}},{key:"build",value:function(){for(var e in this.geojsonLayers)this.geojsonLayers[e].worldScale=this.state.worldScale||1,this.geojsonLayers[e].build()}},{key:"render",value:function(){var e;for(var t in this.controls.trees=[],this.geojsonLayers)e=this.geojsonLayers[t],"campus"===t&&e.built?this.controls.pointer.floor=e.geometry.shapes:"buildings"===t&&e.built?this.controls.pointer.buildings=e.geometry.json:t.toLowerCase().match(/trees/)&&e.built?this.controls.pointer.trees=this.controls.pointer.trees.concat(e.geometry.shapes):"pieces"===t&&e.built&&(this.piecesLayer=e,this.controls.pointer.tatami=e.geometry.shapes[0]),e.built&&e.render()}},{key:"onResize",value:function(){this.$emit("bbox:update",{bbox:this.bbox}),this.controls.orbit.update()}},{key:"onUnlock",value:function(){"cover"!==this.gameMode&&(this.controls.pointer.deactivate(),"pointer"!==this.state.mode||this.done||this.state.manualUnlock||document.dispatchEvent(new CustomEvent("unlock")),this.state.manualUnlock&&(this.state.manualUnlock=!1))}},{key:"onTatami",value:function(e){e.value?this.getObjectById(this.legoShadow.id)||(this.add(this.legoShadow),this.add(this.closinesRing)):this.getObjectById(this.legoShadow.id)&&(this.remove(this.legoShadow),this.remove(this.closinesRing))}},{key:"initPosition",value:function(){var e,t,n,r=[this.xScale(cw[0]),this.yScale(cw[1])],i=[this.xScale(lw[0]),this.yScale(lw[1])];(e=this.controls.pointer.getObject().position).set.apply(e,r.concat([2])),this.exitLabel&&((t=this.exitLabel.position).set.apply(t,r.concat([.5])),this.exitLabel.position.x+=15,this.exitLabel.position.y-=0,(n=this.targetLabel.position).set.apply(n,i.concat([.5])),this.targetLabel.position.x+=35,this.targetLabel.position.y-=5),this.updatePositions()}},{key:"bind",value:function(){this.onUnlock=this.onUnlock.bind(this),this.onControlChange=this.onControlChange.bind(this),this.onControlInit=this.onControlInit.bind(this),this.onTatami=this.onTatami.bind(this),this.controls.pointer.addEventListener("unlock",this.onUnlock),this.controls.pointer.addEventListener("change",this.onControlChange),this.controls.pointer.addEventListener("init",this.onControlInit),this.controls.orbit.addEventListener("change",this.onControlChange),this.controls.orbit.addEventListener("init",this.onControlInit),this.controls.pointer.addEventListener("onTatami",this.onTatami)}},{key:"unbind",value:function(){this.controls.pointer.removeEventListener("unlock",this.onUnlock),this.controls.pointer.removeEventListener("change",this.onControlChange),this.controls.pointer.removeEventListener("init",this.onControlInit),this.controls.orbit.removeEventListener("change",this.onControlChange),this.controls.orbit.removeEventListener("init",this.onControlInit),this.controls.pointer.removeEventListener("onTatami",this.onTatami)}}]),o}(Wm),fw=hw;function dw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function pw(e,t,n){return pw=dw()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&fl(i,n.prototype),i},pw.apply(null,arguments)}function vw(e,t,n){var r=this;this._bbox={SW:[1/0,1/0],NE:[-1/0,-1/0],Z:[0,0],edges:{x:[null,null],y:[null,null]}},function(e,t){for(var n,r,i,a,o=0;o<e.length;o++)if(n=e[o],"Point"===(r=e[o].geometry).type)t(n,r.coordinates);else if("MultiPoint"===r.type)for(var s=0;s<r.coordinates.length;s++)t(n,r.coordinates[s]);else if("LineString"===r.type)for(var u=0;u<r.coordinates.length;u++)t(n,r.coordinates[u]);else if("MultiLineString"===r.type)for(var c=0;c<r.coordinates.length;c++){i=r.coordinates[c];for(var l=0;l<i.length;l++)t(n,i[l])}else if("Polygon"===r.type)for(var h=0;h<r.coordinates.length;h++){i=r.coordinates[h];for(var f=0;f<i.length;f++)t(n,i[f])}else if("MultiPolygon"===r.type)for(var d=0;d<r.coordinates.length;d++){a=r.coordinates[d];for(var p=0;p<a.length;p++){i=a[p];for(var v=0;v<i.length;v++)t(n,i[v])}}}(e,(function(e,n){r.updateZ(e,t),r.update(n)}))}vw.prototype.get=function(){var e={sw:this._bbox.SW,ne:this._bbox.NE,z:this._bbox.Z,lngs:[this._bbox.SW[0],this._bbox.NE[0]],lats:[this._bbox.SW[1],this._bbox.NE[1]],edges:this._bbox.edges};return e.center=[e.lngs[0]+(e.lngs[1]-e.lngs[0])/2,e.lats[0]+(e.lats[1]-e.lats[0])/2],e},vw.prototype.update=function(e){e[0]<this._bbox.SW[0]&&(this._bbox.SW[0]=e[0],this._bbox.edges.x[0]=e),e[1]<this._bbox.SW[1]&&(this._bbox.SW[1]=e[1],this._bbox.edges.y[0]=e),e[0]>this._bbox.NE[0]&&(this._bbox.NE[0]=e[0],this._bbox.edges.x[1]=e),e[1]>this._bbox.NE[1]&&(this._bbox.NE[1]=e[1],this._bbox.edges.y[1]=e)},vw.prototype.updateZ=function(e,t){t&&(this._bbox.Z[0]=null==this._bbox.Z[0]?e.properties[t]:Number(this._bbox.Z[0])<Number(e.properties[t])?Number(this._bbox.Z[0]):Number(e.properties[t]),this._bbox.Z[1]=null==this._bbox.Z[1]?props[t]:Number(this._bbox.Z[1])>Number(e.properties[t])?Number(this._bbox.Z[1]):Number(e.properties[t]))};var mw=vw;function gw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _w={color:7128526,z:null};function ww(e,t){var n=arguments,r=this;this.json=e,t=t||{},this.settings=bw(bw({},_w),t),this.bbox=new mw(e.features,t.z,t.projection);var i=this.bbox.get(),a=document.getElementById("canvas");if(a.clientWidth<a.clientHeight){var o=a.clientHeight/a.clientWidth-1,s=i.lats[1]-i.lats[0],u=i.lngs,c=[i.lats[0]-s*o*.5,i.lats[1]-s*o*.5];this.xScale=this.xScale||new uw(u,[0,a.clientWidth]),this.yScale=this.yScale||new uw(c,[0,a.clientHeight])}else{var l=a.clientWidth/a.clientHeight-1,h=i.lngs[1]-i.lngs[0],f=[i.lngs[0]-h*l*.5,i.lngs[1]+h*l*.5],d=i.lngs;this.xScale=this.xScale||new uw(f,[0,a.clientWidth]),this.yScale=this.yScale||new uw(d,[0,a.clientHeight])}this.material=this.Material(t);var p=this.build;this.build=function(){r.scale(),p.apply(r,n),r.built=!0,r.$emit("build",{geometry:r})},this.shapes=new Array,sw.asEmitter(this)}ww.prototype.scale=function(){var e,t=this,n=gw(this.json.features);try{var r=function(){var n=e.value;if(n.properties.rescaled)return"continue";var r=n.geometry.type;"Point"===r?n.geometry.coordinates=[t.xScale(n.geometry.coordinates[0]),t.yScale(n.geometry.coordinates[1])]:"LineString"===r?n.geometry.coordinates=n.geometry.coordinates.map((function(e){return[t.xScale(e[0]),t.yScale(e[1])]})):"Polygon"===r?n.geometry.coordinates.forEach((function(e,r){n.geometry.coordinates[r]=e.map((function(e){return[t.xScale(e[0]),t.yScale(e[1])]}))})):"MultiPolygon"===r&&n.geometry.coordinates.forEach((function(e,r){e.forEach((function(e,i){n.geometry.coordinates[r][i]=e.map((function(e){return[t.xScale(e[0]),t.yScale(e[1])]}))}))})),n.properties.rescaled=!0};for(n.s();!(e=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}},ww.prototype.build=function(){},ww.prototype.render=function(){if(!this.scene)throw new Error("Scene must be binded before render");var e,t=gw(this.shapes);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.scene.add(n)}}catch(e){t.e(e)}finally{t.f()}},ww.prototype.Shape=Ax,ww.prototype.Geometry=function(e,t){return null!=t.z?new qy(e,bw({bevelEnabled:!1},t)):new Yy(e,t)},ww.prototype.Mesh=Id,ww.prototype.Material=function(e){return new ex(e)},ww.prototype.buildUVSurface=function(e,t,n,r,i){n=n||1,r=r||1;var a=this.bbox.get(),o=[this.xScale(a.lngs[0]),this.xScale(a.lngs[1])],s=[this.yScale(a.lats[0]),this.yScale(a.lats[1])],u=new np(o[1]-o[0],s[1]-s[0],1,1),c=new td({map:e,color:16777215,transparent:!0}),l=new Id(u,c);return l.position.set(o[0]+(o[1]-o[0])/2,s[0]+(s[1]-s[0])/2,i),l.rotateZ(.1*Math.PI),l},ww.prototype.buildEdges=function(e,t){return t=t.clone(),["r","g","b"].map((function(e){t[e]=.5*t[e]})),e=new Jg(e),new Dg(e,new Ag({color:t.getHex()}))},ww.prototype.buildWireframe=function(e,t){var n=new td({wireframe:!0,transparent:!0,color:t});return new Id(e,n)};var Mw=ww;function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Aw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Aw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kw(e,t){Mw.call(this,e,t)}kw.prototype=Object.create(Mw.prototype),kw.prototype.build=function(){var e,t=(this.settings.zFactor||1)*this.worldScale,n=Tw(this.json.features);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=(i.properties[this.settings.base]||0)*t,o=(i.properties[this.settings.z]||this.settings.z)*t-a,s=Tw(i.geometry.coordinates);try{for(s.s();!(r=s.n()).done;){var u,c=Tw(r.value);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,f=new this.Shape,d=!1,p=Tw(h);try{for(p.s();!(l=p.n()).done;){var v=l.value;d?f.lineTo.apply(f,ol(v)):(f.moveTo.apply(f,ol(v)),d=!0)}}catch(e){p.e(e)}finally{p.f()}var m=new this.Geometry(f,Ew({depth:o},this.settings)),g=this.material;"function"==typeof this.settings.color&&(g=this.material.clone()).color.set(this.settings.color(i));var y=new this.Mesh(m,g);if(g.map){var x=this.buildUVSurface(g.map,m,g.map.repeat.x,g.map.repeat.y);y.add(x)}if(this.settings.edges){var b=this.buildEdges(m,g.color);y.add(b)}y.position.z=a,this.shapes.push(y)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}};var Lw=kw;function Rw(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=e[n-1];if(n>0)if(this.needsInterpolation(i,r)){t=[i,r],t=this.interpolatePoints(t);for(var a=0;a<t.length;a++)this.push(t[a])}else this.push(r);else this.push(r)}}Rw.prototype=new Array,Rw.prototype.needsInterpolation=function(e,t){var n=t[0],r=t[1],i=e[0],a=e[1],o=Math.abs(n-i),s=Math.abs(r-a);return o>5||s>5},Rw.prototype.interpolatePoints=function(e){for(var t,n,r=[],i=0;i<e.length-1;i++)t=e[i],n=e[i+1],this.needsInterpolation(n,t)?(r.push(t),r.push(this.getMidpoint(t,n))):r.push(t);return r.push(e[e.length-1]),r.length>e.length?r=this.interpolatePoints(r):r},Rw.prototype.getMidpoint=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},Rw.getSubVectors=function(e,t){return[t[0]-e[0],t[1]-e[1]]},Rw.getAzimuth=function(e,t){var n=Rw.getSubVectors(e,t),r=n[1]/n[0];return 0===r?n[0]<0?Math.PI:0:Math.atan(r)},Rw.getDistance=function(e,t){var n=Rw.getAzimuth(e,t);return(t[0]-e[0])/Math.cos(n)};var Cw=Rw;function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Iw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dw(e,t){Mw.call(this,e,t)}Dw.prototype=Object.create(Mw.prototype),Dw.prototype.build=function(){var e,t=Iw(this.json.features);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=(this.settings.zFactor||1)*this.worldScale,i=(n.properties[this.settings.base]||this.settings.base||0)*r,a=(n.properties[this.settings.z]||this.settings.z)*r-i,o=null;this.settings.primitive_type&&(o=new mw([n],this.settings.z).get());var s,u=Iw(n.geometry.coordinates);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,h=void 0,f=void 0;if(h=this.material,"function"==typeof this.settings.color&&(h=this.material.clone()).color.set(this.settings.color(n)),this.settings.primitive_type){o.lngs,o.lats;var d,p=null,v=0,m=1/0,g=null,y=Iw(c);try{for(y.s();!(d=y.n()).done;){var x=d.value;if(p){var b=Math.abs(Cw.getDistance(p,x)),_=Math.abs(Cw.getAzimuth(p,x));b>v&&(g=_,v=b),b<m&&(m=b),p=x}else p=x}}catch(e){y.e(e)}finally{y.f()}"box"===this.settings.primitive_type?l=new Dd(v,m,a):"plane"===this.settings.primitive_type&&(l=new np(v,m,1,1)),(f=new this.Mesh(l,h)).position.set(o.center[0],o.center[1],i),f.rotateZ(Math.PI-g)}else{var w,M=new this.Shape,S=!1,E=Iw(c);try{for(E.s();!(w=E.n()).done;){var T=w.value;S?M.lineTo.apply(M,ol(T)):(M.moveTo.apply(M,ol(T)),S=!0)}}catch(e){E.e(e)}finally{E.f()}l=new this.Geometry(M,Ow({depth:a},this.settings)),f=new this.Mesh(l,h)}if(this.settings.edges){var A=this.buildEdges(l,h.color);f.add(A)}this.shapes.push(f)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){t.e(e)}finally{t.f()}};var Fw=Dw;function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bw(e,t){Mw.call(this,e,t)}function Hw(e,t){var n=t[0]-e[0],r=(t[1]-e[1])/n;return 0===r?n<0?Math.PI:0:Math.atan(r)}function jw(e,t,n,r){var i=1===r?t:e,a=Hw(e,t)+.5*Math.PI;return[Math.cos(a)*n+i[0],Math.sin(a)*n+i[1]]}function Gw(e,t){return(t[0]-e[0])/Math.cos(Hw(e,t))}Bw.prototype=Object.create(Mw.prototype),Bw.prototype.build=function(){var e,t=this,n=this.settings.zFactor||1,r=this.settings.radius||1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.json.features);try{var a=function(){var i=e.value,a=(i.properties[t.settings.base]||0)*n,o=(i.properties[t.settings.z]||t.settings.z)*n-a,s=void 0,u=void 0;i.geometry.coordinates.reduce((function(e,t,n,i){return s=t,(u=i[n+1])&&e.push([jw(s,u,r,0),jw(s,u,r,1),Math.abs(Gw(s,u)),[s[0]+(u[0]-s[0])/2,u[0]+(u[1]-s[1])/2,a],Hw(s,u)]),e}),[]).map((function(e){var n=new Ax;n.moveTo(e[0][0]),n.lineTo(e[0][1]),n.lineTo(e[1][1]),n.lineTo(e[1][0]),n.lineTo(e[0][0]);var r=new qy(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({depth:o},t.settings)),i=new Id(r,t.material);t.shapes.push(i)}))};for(i.s();!(e=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}};var Vw=Bw;function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qw(e,t){Mw.call(this,e,t)}qw.prototype=Object.create(Mw.prototype),qw.prototype.build=function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ww(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ww(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.json.features);try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=(this.settings.zFactor||1)*this.worldScale,a=(r.properties[this.settings.base]||this.settings.base||0)*i,o=(r.properties[this.settings.z]||this.settings.z)*i-a,s=r.geometry.coordinates;n="cylinder"===this.settings.geom_primitive?new this.CylinderGeometry(this.settings.radius,o,8):"cone"===this.settings.geom_primitive?new this.ConeGeometry(this.settings.radius,o,8):new this.SphereGeometry(this.settings.radius,15,8);var u=this.material;"function"==typeof this.settings.color&&(u=this.material.clone()).color.set(this.settings.color(r));var c,l=new this.Mesh(n,u);if("cylinder"===this.settings.geom_primitive)(c=l.position).set.apply(c,ol(s).concat([o/2+a]));else if("cone"===this.settings.geom_primitive){var h;(h=l.position).set.apply(h,ol(s).concat([o/2+a]))}else{var f;(f=l.position).set.apply(f,ol(s).concat([o]))}l.rotateX(.5*Math.PI),this.shapes.push(l)}}catch(e){t.e(e)}finally{t.f()}},qw.prototype.CylinderGeometry=function(e,t,n){return new Wg(e,e,t,n)},qw.prototype.SphereGeometry=function(e,t,n){return new Zy(e,t,n)},qw.prototype.ConeGeometry=function(e,t,n){return new qg(e,t,n)},qw.prototype.Material=function(e){return new ex(e)};var $w=qw;function Xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xw(Object(n),!0).forEach((function(t){ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zw={data:null,color:7128526};function Jw(e){var t,n,r,i=this;e=e||{},this.settings=Yw(Yw({},Zw),e),this.data=this.settings.data,delete this.settings.data,this.name=this.settings.name,delete this.settings.name,this.settings.side=2,sw.asEmitter(this),this.parse=this.parse.bind(this),Object.defineProperties(this,{scene:{get:function(){return t},set:function(e){if(t=e,i.geometry)i.geometry.scene=e;else{var n=i;i.$on("geometry:init",(function t(r){r.detail.geometry.scene=e,n.$off("geometry:init",t)}))}}},built:{get:function(){return i.geometry&&i.geometry.built},set:function(){i.geometry&&(i.geometry.built=!1)}},xScale:{get:function(){return r},set:function(e){r=e,i.geometry&&(i.geometry.xScale=e),i.built&&i.build()}},yScale:{get:function(){return n},set:function(e){n=e,i.geometry&&(i.geometry.yScale=e),i.built&&i.build()}}})}Jw.prototype.parse=function(e){var t;if(e=e||this.json,this.json=e,"Feature"===e.type){var n;t=null===(n=e.geometry)||void 0===n?void 0:n.type,this.data=[e.properties]}else{if("FeatureCollection"!==e.type)throw new Error("Unrecognized geojson format");var r;t=e.features.length?null===(r=e.features[0].geometry)||void 0===r?void 0:r.type:null,this.data=e.features.map((function(e){return e.properties}))}switch(t){case"MultiPolygon":this.geometry=new Lw(this.json,this.settings);break;case"Polygon":this.geometry=new Fw(this.json,this.settings);break;case"LineString":this.geometry=new Vw(this.json,this.settings);break;case"Point":this.geometry=new $w(this.json,this.settings);break;default:throw new Error("Unrecognized geometry")}return this.scene&&(this.geometry.scene=this.scene),this.xScale&&(this.geometry.xScale=this.xScale),this.yScale&&(this.geometry.yScale=this.yScale),this.$emit("geometry:init",{geometry:this.geometry,layer:this}),this},Jw.prototype.build=function(){this.geometry&&!this.built&&(this.geometry.worldScale=this.worldScale,this.geometry.build())},Jw.prototype.render=function(){this.built&&this.geometry.render()},Jw.prototype.localToWorld=function(){var e=this.bbox.get().lngs[1]-this.bbox.get().lngs[0],t=this.bbox.get().lats[1]-this.bbox.get().lngs[1],n={x:this.bbox.get().center[0],y:this.bbox.get().center[1]},r=n[1]-t/2,i=n[0]-e/2+vector.x,a=r+vector.y,o={x:i-n[0],y:a-n[1]};if(0===o.x&&0===o.y)return pw(xh,ol(n));var s=Math.atan(o.y/o.x);return Math.abs(o.y)>0?Math.sin(s):Math.abs(o.x)>0&&Math.cos(s),new xh(n[0])};var Kw=Jw;function Qw(e){(e=e||{}).color=11184810,e.name="campus",e.side=2,Kw.call(this,e)}Qw.prototype=Object.create(Kw.prototype),Qw.prototype.load=function(){var e=this;return fetch("/static/data/campus.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var eM=Qw;function tM(e){(e=e||{}).z="alt",e.zFactor=5,e.base="base",e.edges=!0,e.color=function(e){switch(e.properties.id){case 1:return 15700992;case 2:return 5611546;case 3:return 5086938;case 4:return 7536768;case 5:return 12526456;case 6:return 14113905;case 7:return 16750080;case 8:return 8086216;case 9:return 5733805;case 10:return 5024677;case 11:return 1515819;case 12:return 15310433;case 13:return 8394011;default:return 8947848}},e.name="buildings",Kw.call(this,e)}tM.prototype=Object.create(Kw.prototype),tM.prototype.load=function(){var e=this;return fetch("/static/data/buildings.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var nM=tM;function rM(e){(e=e||{}).color=10735033,e.z=.3,e.name="grass",Kw.call(this,e)}rM.prototype=Object.create(Kw.prototype),rM.prototype.load=function(){var e=this;return fetch("/static/data/grass.geojson",{method:"GET"}).then((function(t){return t.json().then((function(t){return e.parse(t)}))}))};var iM=rM;function aM(e){(e=e||{}).z=.2,e.color=8224125,e.name="paths",Kw.call(this,e)}aM.prototype=Object.create(Kw.prototype),aM.prototype.load=function(){var e=this;return fetch("/static/data/paths.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var oM=aM;function sM(e){(e=e||{}).z=4,e.zFactor=1,e.radius=.5,e.color=8224125,e.canopiColor=65280,e.name="spheric_trees",e.geom_primitive="cylinder",Kw.call(this,e)}sM.prototype=Object.create(Kw.prototype),sM.prototype.load=function(){var e=this;return fetch("/static/data/trees.tall.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var uM=sM;function cM(e){(e=e||{}).z=8,e.zFactor=1,e.radius=5,e.color=4757096,e.name="spheric_canopies",e.geom_primitive="sphere",Kw.call(this,e)}cM.prototype=Object.create(Kw.prototype),cM.prototype.load=function(){var e=this;return fetch("/static/data/trees.sphere.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var lM=cM;function hM(e){(e=e||{}).z=6,e.zFactor=1,e.radius=.5,e.color=8224125,e.name="tall_trees",e.geom_primitive="cylinder",Kw.call(this,e)}hM.prototype=Object.create(Kw.prototype),hM.prototype.load=function(){var e=this;return fetch("/static/data/trees.sphere.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var fM=hM;function dM(e){(e=e||{}).z=14,e.zFactor=1,e.radius=3.5,e.base=4,e.color=4757096,e.name="tall_canopies",e.geom_primitive="cone",Kw.call(this,e)}dM.prototype=Object.create(Kw.prototype),dM.prototype.load=function(){var e=this;return fetch("/static/data/trees.tall.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)}))};var pM=dM;function vM(e){(e=e||{}).color=10988969,e.name="lego",e.z=.5,e.base=0,e.primitive_type="box",Kw.call(this,e),this.loader=new Sx}vM.prototype=Object.create(Kw.prototype),vM.prototype.load=function(){var e=this;return new Promise((function(t,n){e.loader.load("/static/images/lego.texture--gray.png",(function(r){r.wrapS=El,r.wrapT=El,r.repeat.set(120,75),e.settings.map=r,fetch("/static/data/lego.base.geojson",{method:"GET"}).then((function(t){return t.json().then(e.parse)})).then((function(e){return t()})).catch((function(e){return n(e)}))}))}))},vM.prototype.render=function(){Kw.prototype.render.call(this)};var mM=vM;function gM(e){(e=e||{}).color=10988969,e.transparent=!0,e.name="pieces",e.z=.5,e.base=0,e.primitive_type="box",Kw.call(this,e),this.loader=new Sx}gM.prototype=Object.create(Kw.prototype),gM.prototype.load=function(e){var t=this;return new Promise((function(n,r){t.loader.load("/puzzle/"+e,(function(e){e.magFilter=kl,e.center.set(.5,.5),t.settings.map=e,fetch("/static/data/lego.base.geojson",{method:"GET"}).then((function(e){return e.json().then(t.parse)})).then((function(e){return n()})).catch((function(e){return r(e)}))}))}))},gM.prototype.render=function(){Kw.prototype.render.call(this)},gM.prototype.localToWorld=function(e){var t=this.geometry.shapes[0];t.updateWorldMatrix();var n=t.geometry,r=n.parameters.width,i=n.parameters.height,a={x:t.position.x,y:t.position.y},o=a.y+i/2,s=a.x-r/2+e.x,u=o-e.y,c=s-a.x,l=u-a.y;if(0===c&&0===l)return new Ch(a.x,a.y,.5);var h=Math.atan(l/c),f=0!==l?l/Math.sin(h):0!==c?c/Math.cos(h):0;return new Ch(a.x+Math.cos(h+t.rotation.z)*f,a.y+Math.sin(h+t.rotation.z)*f,.5)},gM.prototype.getTargetLocation=function(e){if(this.built){var t=this.geometry.shapes[0].geometry.parameters.width/120,n=this.geometry.shapes[0].geometry.parameters.height/75,r=(e.col+1)*t-.5*t,i=(e.row+1)*n-.5*n;return this.localToWorld({x:r,y:i})}},gM.prototype.getNearest=function(e,t){var n=this.geometry.shapes[0],r=n.geometry.parameters.width,i=n.geometry.parameters.height,a=n.rotation.reorder("ZYX"),o=Math.round((t.z-a.z)*(360/(2*Math.PI)))%360;o<0&&(o=360+o),o=o>45&&o<=135?1:o>135&&o<=225?2:o>225&&o<=315?3:4;var s=r/120,u=i/75,c=this.localToWorld({x:0,y:0}),l=n.position.x-r/2,h=n.position.y+i/2,f={x:e.x-c.x,y:c.y-e.y},d=Math.atan(f.x/f.y),p=Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2)),v=l-Math.sin(d-a.z)*p-l,m=h-(h+Math.cos(d-a.z)*p),g=Math.min(l+120*s-.5*s,Math.max(l+.5*s,l+s*Math.round(v/s)+.5*s*(1==o?-1:1))),y=Math.min(h-.5*u,Math.max(h-75*u+.5*u,h-u*Math.round(m/u)+.5*u*(2==o?-1:1))),x=Math.sqrt(Math.pow(g-l,2)+Math.pow(h-y,2)),b=1.5*Math.PI+Math.atan((g-l)/(h-y)),_={x:c.x+Math.cos(b+a.z)*x,y:c.y+Math.sin(b+a.z)*x};return new Ch(_.x,_.y,e.z)};var yM,xM,bM=gM,_M=function(){function e(t,n,i){r(this,e),this.focus=!1,this.done=!1,this.mode=i,this.playerData=n,this.mode=i,this.canvas=t,this.renderer=new Hm({alpha:!0,canvas:this.canvas,pixelRatio:window.devicePixelRatio,antialias:!0}),this.renderer.setClearColor(0,0),this.scene=new fw(this.canvas,i),this.paint=function(e,t,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,a=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,l)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c}(100,this.paint,this),this.onKeyDown=this.onKeyDown.bind(this),this.onResize=this.onResize.bind(this),this.initialize()}return a(e,[{key:"bind",value:function(){this.onControlsChange=this.onControlsChange.bind(this),this.scene.$on("control:change",this.onControlsChange),document.addEventListener("keydown",this.onKeyDown,!0),window.addEventListener("resize",this.onResize),this.scene.bind()}},{key:"unbind",value:function(){this.scene.$off("control:change",this.onControlsChange),document.removeEventListener("keydown",this.onKeyDown,!0),window.removeEventListener("resize",this.onResize),this.scene.unbind()}},{key:"lock",value:function(e){e?this.scene.control.activate(this.scene.state):this.scene.control.deactivate()}},{key:"paint",value:function(){this.resizeToDisplaySize()&&(this.scene.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.scene.camera.updateProjectionMatrix()),this.renderer.render(this.scene,this.scene.camera)}},{key:"resizeToDisplaySize",value:function(){var e=this.renderer.domElement,t=e.clientWidth,n=e.clientHeight;return(e.height!==n||e.width!==t)&&(this.renderer.setSize(t,n,!1),!0)}},{key:"onResize",value:function(){this.scene.onResize(),this.paint()}},{key:"onKeyDown",value:function(e){var t=this;if(!1!==this.scene.control.enabled&&"cover"!==this.mode)if("KeyM"===e.code&&("pointer"===this.scene.state.mode?(this.scene.state.manualUnlock=!0,this.scene.state.mode="orbit"):this.scene.state.mode="pointer",document.dispatchEvent(new CustomEvent("help",{detail:{target:this.scene.state.mode}}))),"KeyH"===e.code)document.dispatchEvent(new CustomEvent("help",{detail:{target:this.scene.state.mode}}));else if("Escape"===e.code)e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.scene.control.deactivate(),"orbit"===this.scene.state.mode&&document.dispatchEvent(new CustomEvent("unlock"));else if("Enter"===e.code||"NumpadEnter"===e.code){if(!this.isOnTarget)return;this.scene.state.manualUnlock=!0,this.done=!0,this.scene.done=!0,this.scene.legoShadow.children.forEach((function(e){e.material=new tx({color:"rgb(".concat(t.playerData.red,", ").concat(t.playerData.green,", ").concat(t.playerData.blue,")")})})),this.scene.remove(this.scene.legoPiece),this.scene.legoShadow.position.z=-.3*this.scene.state.worldScale,this.paint(),document.dispatchEvent(new CustomEvent("done")),this.scene.control.deactivate()}}},{key:"initialize",value:function(){var e=this,t=new eM,n=new nM,r=new iM,i=new oM,a=new uM,o=new lM,s=new fM,u=new pM,c=new mM,l=new bM,h=new qg(10,50,32),f=new ex({color:16711680}),d=new Id(h,f);d.rotation.x=.5*-Math.PI;var p=this;(new eb).load("/static/helvetiker_bold.typeface.json",(function(e){var t=new ex({color:16777215}),n=new np(100,30),r=new Jy("Sortida",{size:14,font:e,height:.5,curveSegments:12,bevelEnabled:!1}),i=new np(100,30),a=new Jy("Arribada",{size:13,font:e,height:.5,curveSegments:12,bevelEnabled:!1}),o=new Id(n,f);o.position.y+=5;var s=new Id(r,t);s.position.x-=30,s.position.y-=7,o.add(s);var u=new Id(i,f);u.position.y+=5;var c=new Id(a,t);c.position.x-=35,c.position.y-=7,u.add(c),o.rotation.z+=.41*Math.PI,u.rotation.z+=.11*Math.PI,p.scene.exitLabel=o,p.scene.targetLabel=u,"cover"===p.mode&&(p.scene.add(o),p.scene.add(u));try{p.scene.bbox&&p.scene.initPosition()}catch(e){}})),this.scene.marker=d;var v=new Xy(1.3,1.4,20,1,.25*-Math.PI,.5*Math.PI),m=new tx({transparent:!0,opacity:.8,color:16646021,shininess:150}),g=new Id(v,m),y=new Ax;y.moveTo(-.5,0),y.lineTo(0,1),y.lineTo(.5,0),y.bezierCurveTo(.4,.175,-.4,.175,-.5,0);var x=new Yy(y);x.rotateZ(.48*-Math.PI);var b=new Id(x,m);b.position.x+=1.4,g.add(b),this.scene.closinesRing=g,this.loadGltfs((function(){t.load().then((function(t){e.scene.bbox=t.geometry.bbox,e.scene.initPosition(),"pointer"!==e.mode&&e.scene.camera.centerOn(t);var h=document.getElementById("canvas");if(h.clientWidth<h.clientHeight?e.scene.state.worldScale=Math.min(1,(t.yScale(1)-t.yScale(0))/1):e.scene.state.worldScale=Math.min(1,(t.xScale(1)-t.xScale(0))/1),e.scene.legoPiece){var f,d,p=Array.apply(null,Array(3)).map((function(t){return e.scene.state.worldScale}));(f=e.scene.legoPiece.scale).set.apply(f,ol(p)),(d=e.scene.legoShadow.scale).set.apply(d,ol(p))}Promise.all([n.load(),r.load(),i.load(),a.load(),s.load(),c.load(),l.load(e.playerData.id)]).then((function(t){o.parse(a.json),u.parse(s.json),e.scene.build(),e.scene.render(),e.paint(),e.target=l.getTargetLocation(e.playerData)}))}))})),this.scene.addLayer(t),this.scene.addLayer(n),this.scene.addLayer(r),this.scene.addLayer(i),this.scene.addLayer(a),this.scene.addLayer(o),this.scene.addLayer(s),this.scene.addLayer(u),this.scene.addLayer(c),this.scene.addLayer(l)}},{key:"loadGltfs",value:function(e){var t=this;if("pointer"===this.mode){var n=new Bb;n.load("/static/gltf/piezaLego.gltf",(function(r){var i=r.scene;n.load("/static/gltf/arm.gltf",(function(n){var r=n.scene;r.rotation.reorder("ZYX"),r.rotation.x=.3*Math.PI,r.scale.set(1.3,1.3,1.3),i.position.fromArray(t.scene.camera.position.toArray()),i.position.z=1,i.rotation.x=.5*Math.PI;var a=i.clone();i.children.forEach((function(e){"Mesh"===e.type&&(e.material=new tx({color:"rgb(".concat(t.playerData.red,", ").concat(t.playerData.green,", ").concat(t.playerData.blue,")")}))})),a.children.forEach((function(e){"Mesh"===e.type&&(e.material=new td({color:16777215,opacity:.3,transparent:!0}))})),r.children.forEach((function(e){"Mesh"===e.type&&(e.material=new ex({color:"rgb(240, 200, 160)",side:2}))}));var o=r.clone();o.scale.x=-1*o.scale.x,t.scene.add(i),t.scene.add(r),t.scene.add(o),t.scene.legoPiece=i,t.scene.legoShadow=a,t.scene.armRight=r,t.scene.armLeft=o,e.call(t)}))}))}else e.call(this)}},{key:"distanceToTarget",value:function(e){return this.scene.legoShadow.updateMatrixWorld(),this.scene.legoShadow.position.distanceTo(e)}},{key:"onControlsChange",value:function(e){if(!this.done&&"pointer"===this.scene.state.mode&&this.scene.control.state.isOnTatami){var t=this.distanceToTarget(this.target);this.scene.controls.pointer.distance=t;var n,r=this.scene.closinesRing.position.x-this.target.x,i=this.scene.closinesRing.position.y-this.target.y;i>0?(n=Math.atan(r/i),n=1.5*Math.PI-n):(n=Math.atan(i/r),r>0&&(n+=Math.PI)),this.scene.closinesRing.rotation.z=n,t<=.4?(this.scene.legoShadow.children.forEach((function(e){e.material.color.setHex(65280)})),this.isOnTarget=!0,this.paint()):(this.scene.legoShadow.children.forEach((function(e){e.material.color.setHex(16711680)})),this.paint(),this.isOnTarget=!1)}else this.scene.controls.pointer.distance=1e3;this.paint()}}]),e}();function wM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var MM={data:function(){return{started:!1,gameLock:void 0,showControls:!1,showInstructions:!1,game:null,waiting:!1,gameOver:!1,controls:"pointer",done:!1,userName:null,userArea:null,userOpinion:null,doneImage:!1}},beforeMount:function(){var e=this;fetch("/piece/"+this.pieceId).then((function(e){return e.json()})).then((function(t){e.game=new _M(document.getElementById("canvas"),t,e.isTouch?"touch":"pointer"),e.isTouch||e.isResume?e.game.bind():(e.coverMap=new _M(document.getElementById("coverMap"),t,"cover"),e.coverMap.bind())})).catch((function(e){console.error("Error while fetching the piece"),console.log(e)})),this.controls=this.isTouch?"orbit":"pointer"},mounted:function(){document.removeEventListener("unlock",this.onGameUnlock),document.addEventListener("unlock",this.onGameUnlock),document.removeEventListener("help",this.onHelp),document.addEventListener("help",this.onHelp),document.removeEventListener("gameover",this.onGameOver),document.addEventListener("gameover",this.onGameOver),document.removeEventListener("done",this.onDone),document.addEventListener("done",this.onDone)},computed:{isTouch:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isResume:function(){return"resume"===this.$route.name},pieceId:function(){return this.$route.query.pieceId},menuTitle:function(){return this.gameOver?"Game Over":"Menú"},carouselImageWidth:function(){return Math.min(window.innerHeight,window.innerWidth)+"px"},doneImageSrc:function(){return"/puzzle/0"}},methods:{exit:function(){this.game.unbind(),this.$router.push({path:"/",query:{pieceId:this.pieceId}})},onGameUnlock:function(){this.gameLock=!1},onHelp:function(e){var t=this;clearTimeout(yM),this.controls=e.detail.target,this.showControls=!0,yM=setTimeout((function(e){return t.showControls=!1}),e.detail.timeout||7e3)},restart:function(){this.game.unbind(),this.game=new _M(this.game.canvas,this.game.playerData,this.isTouch?"orbit":"pointer"),this.started=!1,this.gameOver=!1,this.showInstructions=!1,this.gameLock=!0},onGameOver:function(){this.gameOver=!0},onDone:function(){var e=this;this.done=!0,this.game.unbind(),fetch("piece/".concat(this.pieceId),{method:"POST"}).then((function(t){t.json().then((function(t){t.success&&e.$nextTick((function(){e.$refs.modal.classList.add("visible")}))}))}))},reload:function(){window.location.reload()},sent:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wM(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.$el.querySelectorAll(".form p input"));try{for(t.s();!(e=t.n()).done;)e.value.classList.add("sent")}catch(e){t.e(e)}finally{t.f()}this.$el.querySelector(".form p textarea").classList.add("sent"),this.$el.querySelector(".submit-btn").classList.add("submitted"),this.$el.querySelector(".submit-btn").innerText="Enviat"},submitForm:function(e,t,n){var r=this;clearTimeout(xM),xM=setTimeout((function(){fetch("/form/"+r.pieceId,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field:e,value:t})})}),500),n.classList.remove("sent")},showVideo:function(){window.addEventListener("popstate",(function(e){console.log("location: "+window.location+", state: "+JSON.stringify(e.state))})),fetch("/static/resources.json").then((function(e){e.json().then((function(e){window.open(e.VIDEO_URL)}))}))},goToGame:function(){window.open("/#/game/?pieceId="+(null!=this.pieceId?this.pieceId:Math.ceil(9e3*Math.random())))}},watch:{gameLock:function(e,t){var n=this;n.waiting=!0,setTimeout((function(){n.waiting=!1,e?(n.started=!0,n.showControls=!0,n.isTouch||n.isResume||(n.coverMap.unbind(),window.audioObj.play()),n.game.bind(),n.game.scene.state.mode=n.isTouch?"orbit":"pointer",n.onHelp({detail:{target:"pointer",timeout:14e3}})):(n.isTouch||n.isResume||(n.$nextTick((function(){n.$refs.coverMap.removeChild(n.$refs.coverMap.children[0]),n.$refs.coverMap.innerHTML='<canvas id="coverMap"></canvas>',n.coverMap=new _M(document.getElementById("coverMap"),n.coverMap.playerData,"cover"),n.coverMap.bind()})),window.audioObj.pause(),window.audioObj.currentTime=0),n.game.unbind())}),1e3),n.isTouch||n.isResume||n.coverMap.lock(!e),n.game.lock(e)},userName:function(e){var t=this.$el.querySelector(".form p input.name");this.submitForm("name",e,t)},userArea:function(e){var t=this.$el.querySelector(".form p input.area");this.submitForm("area",e,t)},userOpinion:function(e){var t=this.$el.querySelector(".form p textarea.opinion");this.submitForm("opinion",e,t)}}},SM=el(MM,rl,[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controls"},[n("div",{staticClass:"control move"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/arrows-icon.svg"}}),e._v(" "),n("img",{attrs:{src:"/static/images/wasd-icon.svg"}})]),e._v(" "),n("p",[e._v("Per moure’t pel campus i pel puzle, has d’utilitzar les fletxes o aquestes lletres, el que prefereixis.")])]),e._v(" "),n("div",{staticClass:"control action"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/enter-icon.svg"}})]),e._v(" "),n("p",[e._v("Per col·locar la teva peça quan arribis al lloc que li correspon.")])]),e._v(" "),n("label",{staticClass:"general"},[e._v("Durant tot el joc pots utilitzar aquests comandaments:")]),e._v(" "),n("div",{staticClass:"control map"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/map-icon.svg"}})]),e._v(" "),n("p",[e._v("Per anar al mapa i veure on ets.")])]),e._v(" "),n("div",{staticClass:"control menu"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/esc-icon.svg"}})]),e._v(" "),n("p",[e._v("Per aturar el joc i tornar al menú.")])]),e._v(" "),n("div",{staticClass:"control help"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/help-icon.svg"}})]),e._v(" "),n("p",[e._v("Per veure un resum dels controls.")])]),e._v(" "),n("label",{staticClass:"map"},[e._v("Si surts del joc i vas al mapa, hauràs d’utilitzar el ratolí:")]),e._v(" "),n("div",{staticClass:"control orbit"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/left-click-icon.svg"}})]),e._v(" "),n("p",[e._v("Per voltejar el mapa.")])]),e._v(" "),n("div",{staticClass:"control pan"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/right-click-icon.svg"}})]),e._v(" "),n("p",[e._v("Per desplaçar el mapa.")])]),e._v(" "),n("div",{staticClass:"control zoom"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/static/images/zoom-icon.svg"}})]),e._v(" "),n("p",[e._v("Per apropar o allunyar el mapa.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"movement"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Fletxes")]),n("br"),e._v("per desplaçar-se.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"jump"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Barra espaiadora")]),n("br"),e._v("per saltar.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"camera"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Ratolí")]),n("br"),e._v("per moure la càmera.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"enter"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("“Enter”")]),n("br"),e._v("per col·locar la peça.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"orbit"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Click esquerra")]),n("br"),e._v("per rotar.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"pan"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Click dret")]),n("br"),e._v("per desplaçar.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"zoom"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Scroll")]),n("br"),e._v("pel zoom.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"centered"},[n("li",{staticClass:"escape"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Menú")])])])]),e._v(" "),n("li",{staticClass:"map"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Mapa")])])])]),e._v(" "),n("li",{staticClass:"help"},[n("div",{staticClass:"icon"},[n("p",[n("strong",[e._v("Controls")])])])])])}],!1,null,null,null);SM.options.__file="src/views/Game.vue";var EM=SM.exports;cu.use(Kc),new cu({router:new Kc({routes:[{path:"/",name:"cover",component:nl},{path:"/game",name:"game",component:EM},{path:"/game/resume",name:"resume",component:EM}]}),template:'<div id="app"><router-view></router-view></div>'}).$mount("#app"),window.audioObj=new Audio("/static/multimedia/soundtrack.mp3")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n(1206),n(7450),n(3727)}();